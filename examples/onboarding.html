<!DOCTYPE html>
<html>
  <head>
    <title>
      onboarding_example
    </title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="icon" href="favicon.ico" />

    <!-- Bootstrap core CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
      integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
      crossorigin="anonymous"
    />

    <style>
      /* Variables */

      :root {
        --navbar-height: 56px;
        --user-response-panel-height: 110px;
        --bg-color: #c7bdb5; /*global chat bg color*/
        --user-color: #417505; /*user name & placeholder avatar bg*/
        --speaker-color: #888; /*default color for speaker name & placeholder avatar bg*/
        --sidebar-bg-color: #fff;
        --navbar-bg-color: #fff;
        --passage-bg-color: #fff;
        --passage-text-color: #000;
      }

      /* Atomic Utilities */

      .bg-color {
        background-color: var(--bg-color);
      }

      .minh-full {
        min-height: calc(
          100vh - var(--navbar-height) - var(--user-response-panel-height) -
            17px - 5px
        );
      }

      .ml--3 {
        margin-left: -1rem !important;
      }

      @media (min-width: 992px) {
        .w-lg-auto {
          width: auto !important;
        }
      }

      /* General */

      html,
      body {
        overflow-x: hidden; /* Prevent scroll on narrow devices */
        position: relative;
        min-height: 100%;
      }

      body {
        padding-top: var(--navbar-height);
        margin-bottom: calc(
          var(--user-response-panel-height) + 18px + 5px
        ); /* + height of hint + hr */
      }

      /* Offcanvas sidebar */

      @media (max-width: 991.98px) {
        .offcanvas-collapse {
          z-index: 1100;
          position: fixed;
          top: var(--navbar-height); /* Height of navbar */
          bottom: 0;
          left: 100%;
          width: 100%;
          padding-right: 1rem;
          padding-left: 1rem;
          overflow-y: auto;
          visibility: hidden;
          background-color: var(--sidebar-bg-color);
          transition-timing-function: ease-in-out;
          transition-duration: 0.3s;
          transition-property: left, visibility;
        }
        .offcanvas-collapse.open {
          left: 0;
          visibility: visible;
        }
      }

      /* Nav */

      nav.navbar {
        height: var(--navbar-height);
        background-color: var(--navbar-bg-color);
        padding: 0.5rem 15px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      nav .nav-title {
        font-size: 1.5rem;
        line-height: 40px;
        margin: 0 auto;
      }

      nav .nav-icon {
        width: 35px;
      }

      /* Chat Panel */

      .chat-panel {
        padding-top: 15px;
      }

      .chat-passage-wrapper {
        position: relative;
        margin: 0.5rem 0;
      }

      .chat-passage-wrapper[data-speaker="you"] {
        text-align: right;
      }
      .chat-passage-wrapper[data-speaker="you"] .chat-passage:before {
        text-align: right;
        color: var(--user-color);
      }

      .chat-passage {
        display: inline-block;
        padding: 0.25rem 0.5rem;
        margin-left: 35px;
        background-color: var(--passage-bg-color);
        max-width: calc(100% - 80px);
        text-align: left;
      }
      @media (min-width: 576px) {
        .chat-passage {
          max-width: calc(100% - 100px);
        }
      }
      @media (min-width: 768px) {
        .chat-passage {
          max-width: calc(100% - 80px);
        }
      }
      @media (min-width: 992px) {
        .chat-passage {
          max-width: calc(100% - 100px);
        }
      }

      .chat-passage:before {
        content: attr(data-speaker);
        display: block;
        font-size: 0.75rem;
        text-transform: capitalize;
        color: var(--speaker-color);
      }

      .chat-passage p {
        margin: 0;
      }

      .chat-passage img {
        max-width: 100%;
        max-height: calc(100vh - 2 * var(--user-response-panel-height));
        padding: 0.25rem 0;
      }
      .chat-passage iframe {
        max-width: 100%;
        max-height: calc(100vh - 2 * var(--user-response-panel-height));
      }

      .chat-passage figure {
        margin-bottom: 0.25rem;
        font-size: 0.75rem;
      }

      /* User Response Panel */

      .user-response-panel {
        padding-right: 15px;
        padding-left: 15px;
      }
      @media (min-width: 992px) {
        .user-response-panel {
          max-width: calc(
            100% / (12 / 6)
          ); /* 100% / (12/[col width of chat-panel]) */
          margin: 0 auto;
        }
      }

      .user-response-panel hr {
        margin: 0;
        border-top: 5px solid white;
      }

      .user-response-hint {
        font-style: italic;
        font-size: 0.75rem;
        text-align: center;
        height: 18px;
      }
      @media (max-width: 379.98px) {
        .user-response-hint {
          font-size: 0.6rem;
          height: 14px;
        }
        body {
          margin-bottom: calc(
            var(--user-response-panel-height) + 14px + 5px
          ); /* + height of hint + hr */
        }
        .minh-full {
          min-height: calc(
            100vh - var(--navbar-height) - var(--user-response-panel-height) -
              14px - 5px
          );
        }
      }
      @media (max-width: 319.98px) {
        .user-response-hint {
          font-size: 0.5rem;
          height: 12px;
        }
        body {
          margin-bottom: calc(
            var(--user-response-panel-height) + 12px + 5px
          ); /* + height of hint + hr */
        }
        .minh-full {
          min-height: calc(
            100vh - var(--navbar-height) - var(--user-response-panel-height) -
              12px - 5px
          );
        }
      }

      .user-reponse-wrapper {
        height: var(--user-response-panel-height);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .user-response-panel .user-response {
        display: inline-block;
        padding: 0.5rem;
        margin: 0.25rem;
        background-color: var(--passage-bg-color);
        color: var(--passage-text-color);
        border-top: 2px solid transparent;
        transition: border-color 0.15s ease-in;
      }
      .user-response-panel .user-response:hover {
        text-decoration: none;
        border-color: var(--user-color);
      }

      /* Passage Avatars */

      .chat-passage-wrapper:before {
        margin-right: 5px;
        position: absolute;
        vertical-align: top;
        content: "";
        width: 30px;
        height: 30px;
        background-size: 30px 30px;
        border-radius: 15px;
        background-color: var(--speaker-color);
      }
      .chat-passage-wrapper[data-speaker="you"]:before {
        display: none;
      }
      .chat-passage-wrapper[data-speaker="you"]:after {
        margin-left: -30px;
        position: absolute;
        vertical-align: top;
        content: "";
        width: 30px;
        height: 30px;
        background-size: 30px 30px;
        border-radius: 15px;
        background-color: var(--user-color);
      }
      .chat-passage[data-speaker="you"] {
        margin-left: 0;
        margin-right: 35px;
      }

      /* Typing Animation */

      div.wave {
        position: relative;
        text-align: center;
        margin-left: auto;
        margin-right: auto;
      }
      div.wave .dot {
        display: inline-block;
        width: 6px;
        height: 6px;
        border-radius: 50%;
        margin-right: 2px;
        background: var(--passage-text-color);
        animation: wave 1.2s ease-in-out infinite;
      }
      div.wave .dot:nth-child(2) {
        animation-delay: 0.1s;
      }

      div.wave .dot:nth-child(3) {
        animation-delay: 0.2s;
      }

      @keyframes wave {
        0%,
        50%,
        100% {
          transform: initial;
        }

        25% {
          transform: translateY(-15px);
        }
      }

      /* Modal */

      .modal-dialog {
        max-width: 420px;
      }

      /* 
 * counter extra padding-right added by BS4 modal
 * https://stackoverflow.com/questions/32862394/bootstrap-modals-keep-adding-padding-right-to-body-after-closed
 */
      body.modal-open {
        padding-right: 0 !important;
      }
      body.modal-open .user-response-panel {
        padding-right: 15px !important;
      }
      body.modal-open nav.navbar {
        padding-right: 15px !important;
      }
    </style>
  </head>
  <body class="bg-white">
    <nav class="navbar navbar-expand-lg fixed-top">
      <h1 id="ptitle" class="nav-title">onboarding_example</h1>
    </nav>

    <main role="main" class="container-fluid">
      <div class="row">
        <div class="left-sidebar col-lg d-none d-lg-block">
          <div
            id="left-sidebar-container"
            class="content-container position-fixed mt-3 mt-lg-5 m-lg-4"
          ></div>
        </div>
        <div class="chat-panel col-lg-6 minh-full bg-color">
          <div id="phistory" class="history chat-history"></div>
          <div id="passage" class="active"></div>
          <div id="animation-container">
            <div class="chat-passage-wrapper">
              <div class="chat-passage">
                <div class="wave">
                  <span class="dot"></span>
                  <span class="dot"></span>
                  <span class="dot"></span>
                </div>
              </div>
            </div>
          </div>
          <div class="user-response-panel fixed-bottom bg-color">
            <hr />
            <div
              id="user-response-hint"
              class="user-response-hint content-container"
            ></div>
            <div id="user-response-panel" class="user-reponse-wrapper"></div>
          </div>
        </div>
        <div class="right-sidebar col-lg offcanvas-collapse">
          <div class="position-fixed ml--3 w-100 w-lg-auto h-100">
            <div
              id="right-sidebar-container"
              class="content-container m-3 m-sm-5 m-lg-3 mt-lg-5 m-xl-5 mt-xl-5"
            ></div>
          </div>
        </div>
      </div>
    </main>
    <!-- UUID://DEC7B08C-8D6C-416E-A86D-180A53DBF339// --><tw-storydata
      name="onboarding_example"
      startnode="11"
      creator="Tweego"
      creator-version="2.0.0+089d4ca77e5b"
      ifid="DEC7B08C-8D6C-416E-A86D-180A53DBF339"
      zoom="1"
      format="TEST_ChatbookViewer"
      format-version="0.1.1"
      options=""
      hidden
      ><style
        role="stylesheet"
        id="twine-user-stylesheet"
        type="text/twine-css"
      ></style
      ><script
        role="script"
        id="twine-user-script"
        type="text/twine-javascript"
      >
        story.directive("@yaml", function(info, rendered, passage, story) {
          // "story" and "passage" are the current story & passage respectively
          console.log("YAML data from " + passage.id);
          console.log("Directive contained: " + info);
          return rendered;
        });</script
      ><tw-tag name="prompt-firstName" color="yellow"></tw-tag
      ><tw-tag name="speaker-bot" color="orange"></tw-tag
      ><tw-tag name="speaker-system" color="purple"></tw-tag
      ><tw-tag name="system" color="purple"></tw-tag
      ><tw-tag name="auto" color="green"></tw-tag
      ><tw-tag name="metadata" color="blue"></tw-tag
      ><tw-tag name="prologue" color="blue"></tw-tag
      ><tw-passagedata
        pid="1"
        name="gql references"
        tags="system prologue"
        position="25,125"
        size="200,100"
        >###@yaml CURRENT_AUTHORIZATION: &amp;CURRENT_AUTHORIZATION | query
        currentAuthorization { currentUser { id, firstName, authorizations
        (orderBy: PRIMARY_KEY_ASC) { nodes { providerId, providerEmails } } } }
        UPDATE_USER_DATA: &amp;UPDATE_USER_DATA | mutation updateUserData
        ($input: UpdateUserInput!) { updateUser(input:$input) { user { id } } }
        UPDATE_USER_DATA_VARS: &amp;UPDATE_USER_DATA_VARS | { &quot;input&quot;:
        { &quot;id&quot;: {{userId}}, &quot;patch&quot;: {
        &quot;firstName&quot;: &quot;{{firstName}}&quot;,
        &quot;aboutPronoun&quot;: &quot;{{aboutPronoun}}&quot;,
        &quot;conjugatedPronoun&quot;: &quot;{{conjugatedPronoun}}&quot;,
        &quot;possessivePronoun&quot;: &quot;{{possessivePronoun}}&quot;,
        &quot;primaryEmail&quot;: &quot;{{email}}&quot; } } }
        ###</tw-passagedata
      ><tw-passagedata
        pid="2"
        name="Name Not OK"
        tags="speaker-bot prompt-firstName"
        position="475,125"
        size="100,100"
        >Okay, what name would you like me to use? [[Confirm
        Email]]</tw-passagedata
      ><tw-passagedata
        pid="3"
        name="Confirm Email"
        tags="speaker-bot multiline"
        position="475,275"
        size="100,100"
        >Ok. And the email {{which origin &quot;google-oauth2.+&quot;
        &quot;Google&quot; &quot;linkedin.+&quot; &quot;LinkedIn&quot;
        &quot;.*&quot; &quot;your email provider&quot;}} gave me is {{email}}.
        You can always update that later. One last thing How should I refer to
        you? [[&quot;He&quot; pronouns (he/him)]] [[&quot;She&quot; pronouns
        (she/her)]] [[&quot;They&quot; pronouns (they/them)]] [[&quot;Ze&quot;
        pronouns (ze/zir)]] [[I&#39;d like to be specific]] [[Just use my
        name]]</tw-passagedata
      ><tw-passagedata
        pid="4"
        name='"He" pronouns (he/him)'
        tags="auto system"
        position="300,425"
        size="100,100"
        >#@yaml set: aboutPronoun him #@yaml set: conjugatedPronoun he #@yaml
        set: posessivePronoun his [[Save]]</tw-passagedata
      ><tw-passagedata
        pid="5"
        name='"She" pronouns (she/her)'
        tags="auto system"
        position="425,425"
        size="100,100"
        >#@yaml set: aboutPronoun her #@yaml set: conjugatedPronoun she #@yaml
        set: posessivePronoun her [[Save]]</tw-passagedata
      ><tw-passagedata
        pid="6"
        name='"They" pronouns (they/them)'
        tags="auto system"
        position="550,425"
        size="100,100"
        >#@yaml set: aboutPronoun them #@yaml set: conjugatedPronoun they #@yaml
        set: posessivePronoun their [[Save]]</tw-passagedata
      ><tw-passagedata
        pid="7"
        name='"Ze" pronouns (ze/zir)'
        tags="auto system"
        position="675,425"
        size="100,100"
        >#@yaml set: aboutPronoun zir #@yaml set: conjugatedPronoun ze #@yaml
        set: posessivePronoun zir [[Save]]</tw-passagedata
      ><tw-passagedata
        pid="8"
        name="I&#39;d like to be specific"
        tags="speaker-bot auto"
        position="800,425"
        size="100,100"
        >Okay. You can do that in your profile once we&#39;re done here.
        [[Save]]</tw-passagedata
      ><tw-passagedata
        pid="9"
        name="Just use my name"
        tags="auto speaker-bot"
        position="925,425"
        size="100,100"
        >#@yaml set: aboutPronoun {{firstName}} #@yaml set: conjugatedPronoun
        {{firstName}} #@yaml set: posessivePronoun {{firstName}} No problem
        [[Save]]</tw-passagedata
      ><tw-passagedata
        pid="10"
        name="Save"
        tags="speaker-bot auto"
        position="600,725"
        size="100,100"
        >That&#39;s everything, let me save it for you. [[Save
        Action]]</tw-passagedata
      ><tw-passagedata
        pid="11"
        name="start"
        tags="speaker-bot multiline"
        position="300,125"
        size="100,100"
        >###@yaml - graphql: id: currentAuthorization query:
        *CURRENT_AUTHORIZATION store: - &quot;currentUser.id&quot;: userId -
        &quot;currentUser.firstName&quot;: firstName -
        &quot;currentUser.authorizations.nodes[0].providerEmails[0]&quot;: email
        - &quot;currentUser.authorizations.nodes[0].providerId&quot;: origin ###
        Hey there! I&#39;m Karl (he/him). The AI ibex of Aibex. I asked {{which
        origin &quot;google-oauth2.+&quot; &quot;Google&quot;
        &quot;linkedin.+&quot; &quot;LinkedIn&quot; &quot;.*&quot; &quot;your
        email provider&quot;}} what your name was, and they said &quot;{{default
        firstName &quot;to just use your email address&quot;}}&quot;. Is that
        right? [[Yes-&gt;Confirm Email]] [[No-&gt;Name Not OK]]</tw-passagedata
      ><tw-passagedata
        pid="12"
        name="Next Steps"
        tags="speaker-bot auto"
        position="750,875"
        size="100,100"
        >Next up, I&#39;d like to walk you through how Aibex works. close this,
        and when you&#39;re ready, let&#39;s chat about &quot;What Is
        Aibex&quot; [[end]]</tw-passagedata
      ><tw-passagedata
        pid="13"
        name="end"
        tags="system"
        position="925,875"
        size="100,100"
        >#@yaml end: true</tw-passagedata
      ><tw-passagedata
        pid="14"
        name="Save Action"
        tags="auto speaker-bot"
        position="600,875"
        size="100,100"
        >###@yaml graphql: id: updateUserData query: *UPDATE_USER_DATA
        variables: *UPDATE_USER_DATA_VARS format: true store: - SUCCESS:
        updateResult ### {{~# if updateResult ~}} Great, all saved {{~&gt; line
        ~}} You can update all of this from your profile, too. {{~ else ~}}
        Awkward. Something went wrong. We&#39;ll come back to this {{~/ if ~}}
        [[Next Steps]]</tw-passagedata
      ></tw-storydata
    >
    <script>
      (function(factory) {
        typeof define === "function" && define.amd
          ? define(factory)
          : factory();
      })(function() {
        "use strict";

        function _defineProperty(obj, key, value) {
          if (key in obj) {
            Object.defineProperty(obj, key, {
              value: value,
              enumerable: true,
              configurable: true,
              writable: true,
            });
          } else {
            obj[key] = value;
          }

          return obj;
        }

        var defineProperty = _defineProperty;

        var commonjsGlobal =
          typeof globalThis !== "undefined"
            ? globalThis
            : typeof window !== "undefined"
            ? window
            : typeof global !== "undefined"
            ? global
            : typeof self !== "undefined"
            ? self
            : {};

        /**
         * lodash (Custom Build) <https://lodash.com/>
         * Build: `lodash modularize exports="npm" -o ./`
         * Copyright jQuery Foundation and other contributors <https://jquery.org/>
         * Released under MIT license <https://lodash.com/license>
         * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
         * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
         */

        /** Used as references for various `Number` constants. */
        var INFINITY = 1 / 0;

        /** `Object#toString` result references. */
        var symbolTag = "[object Symbol]";

        /** Used to match HTML entities and HTML characters. */
        var reEscapedHtml = /&(?:amp|lt|gt|quot|#39|#96);/g,
          reHasEscapedHtml = RegExp(reEscapedHtml.source);

        /** Used to map HTML entities to characters. */
        var htmlUnescapes = {
          "&amp;": "&",
          "&lt;": "<",
          "&gt;": ">",
          "&quot;": '"',
          "&#39;": "'",
          "&#96;": "`",
        };

        /** Detect free variable `global` from Node.js. */
        var freeGlobal =
          typeof commonjsGlobal == "object" &&
          commonjsGlobal &&
          commonjsGlobal.Object === Object &&
          commonjsGlobal;

        /** Detect free variable `self`. */
        var freeSelf =
          typeof self == "object" && self && self.Object === Object && self;

        /** Used as a reference to the global object. */
        var root = freeGlobal || freeSelf || Function("return this")();

        /**
         * The base implementation of `_.propertyOf` without support for deep paths.
         *
         * @private
         * @param {Object} object The object to query.
         * @returns {Function} Returns the new accessor function.
         */
        function basePropertyOf(object) {
          return function(key) {
            return object == null ? undefined : object[key];
          };
        }

        /**
         * Used by `_.unescape` to convert HTML entities to characters.
         *
         * @private
         * @param {string} chr The matched character to unescape.
         * @returns {string} Returns the unescaped character.
         */
        var unescapeHtmlChar = basePropertyOf(htmlUnescapes);

        /** Used for built-in method references. */
        var objectProto = Object.prototype;

        /**
         * Used to resolve the
         * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
         * of values.
         */
        var objectToString = objectProto.toString;

        /** Built-in value references. */
        var Symbol = root.Symbol;

        /** Used to convert symbols to primitives and strings. */
        var symbolProto = Symbol ? Symbol.prototype : undefined,
          symbolToString = symbolProto ? symbolProto.toString : undefined;

        /**
         * The base implementation of `_.toString` which doesn't convert nullish
         * values to empty strings.
         *
         * @private
         * @param {*} value The value to process.
         * @returns {string} Returns the string.
         */
        function baseToString(value) {
          // Exit early for strings to avoid a performance hit in some environments.
          if (typeof value == "string") {
            return value;
          }
          if (isSymbol(value)) {
            return symbolToString ? symbolToString.call(value) : "";
          }
          var result = value + "";
          return result == "0" && 1 / value == -INFINITY ? "-0" : result;
        }

        /**
         * Checks if `value` is object-like. A value is object-like if it's not `null`
         * and has a `typeof` result of "object".
         *
         * @static
         * @memberOf _
         * @since 4.0.0
         * @category Lang
         * @param {*} value The value to check.
         * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
         * @example
         *
         * _.isObjectLike({});
         * // => true
         *
         * _.isObjectLike([1, 2, 3]);
         * // => true
         *
         * _.isObjectLike(_.noop);
         * // => false
         *
         * _.isObjectLike(null);
         * // => false
         */
        function isObjectLike(value) {
          return !!value && typeof value == "object";
        }

        /**
         * Checks if `value` is classified as a `Symbol` primitive or object.
         *
         * @static
         * @memberOf _
         * @since 4.0.0
         * @category Lang
         * @param {*} value The value to check.
         * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
         * @example
         *
         * _.isSymbol(Symbol.iterator);
         * // => true
         *
         * _.isSymbol('abc');
         * // => false
         */
        function isSymbol(value) {
          return (
            typeof value == "symbol" ||
            (isObjectLike(value) && objectToString.call(value) == symbolTag)
          );
        }

        /**
         * Converts `value` to a string. An empty string is returned for `null`
         * and `undefined` values. The sign of `-0` is preserved.
         *
         * @static
         * @memberOf _
         * @since 4.0.0
         * @category Lang
         * @param {*} value The value to process.
         * @returns {string} Returns the string.
         * @example
         *
         * _.toString(null);
         * // => ''
         *
         * _.toString(-0);
         * // => '-0'
         *
         * _.toString([1, 2, 3]);
         * // => '1,2,3'
         */
        function toString(value) {
          return value == null ? "" : baseToString(value);
        }

        /**
         * The inverse of `_.escape`; this method converts the HTML entities
         * `&amp;`, `&lt;`, `&gt;`, `&quot;`, `&#39;`, and `&#96;` in `string` to
         * their corresponding characters.
         *
         * **Note:** No other HTML entities are unescaped. To unescape additional
         * HTML entities use a third-party library like [_he_](https://mths.be/he).
         *
         * @static
         * @memberOf _
         * @since 0.6.0
         * @category String
         * @param {string} [string=''] The string to unescape.
         * @returns {string} Returns the unescaped string.
         * @example
         *
         * _.unescape('fred, barney, &amp; pebbles');
         * // => 'fred, barney, & pebbles'
         */
        function unescape(string) {
          string = toString(string);
          return string && reHasEscapedHtml.test(string)
            ? string.replace(reEscapedHtml, unescapeHtmlChar)
            : string;
        }

        var lodash_unescape = unescape;

        const TOKEN_ESCAPED_OCTO = "__TOKEN_ESCAPED_BACKSLASH_OCTO__";
        const BLOCK_DIRECTIVE = /^###@([\S]+)([\s\S]*?)###/gm;
        const INLINE_DIRECTIVE = /^#@([\S]+)(.*)/g;

        const extractDirectives = s => {
          const directives = []; // avoid sluring escaped items

          s = s.replace("\\#", TOKEN_ESCAPED_OCTO);
          s.replace(BLOCK_DIRECTIVE, (match, dir, content) => {
            directives.push({
              name: "@".concat(dir),
              content: content.trim(),
            });
            return "";
          });
          s.replace(INLINE_DIRECTIVE, (match, dir, content) => {
            directives.push({
              name: "@".concat(dir),
              content: content.trim(),
            });
            return "";
          });
          return directives;
        };

        const IS_EXTERNAL_URL = /^\w+:\/\/\/?\w/i;
        const LINK_PATTERN = /\[\[(.*?)\]\]/g;

        const extractLinks = str => {
          const links = [];
          const updated = str.replace(LINK_PATTERN, (match, t) => {
            let display = t;
            let target = t; // display|target format

            const barIndex = t.indexOf("|");
            const rightArrIndex = t.indexOf("->");
            const leftArrIndex = t.indexOf("<-");

            switch (true) {
              case barIndex >= 0:
                display = t.substr(0, barIndex);
                target = t.substr(barIndex + 1);
                break;

              case rightArrIndex >= 0:
                display = t.substr(0, rightArrIndex);
                target = t.substr(rightArrIndex + 2);
                break;

              case leftArrIndex >= 0:
                display = t.substr(leftArrIndex + 2);
                target = t.substr(0, leftArrIndex);
                break;
            } // render an external link & stop?

            if (IS_EXTERNAL_URL.test(target)) {
              return (
                '<a href="' + target + '" target="_blank">' + display + "</a>"
              );
            }

            links.push({
              display,
              target,
            });
            return ""; // render nothing if it's a twee link
          });
          return {
            links,
            updated,
            original: str,
          };
        };

        const TOKEN_ESCAPED_OCTO$1 = "__TOKEN_ESCAPED_BACKSLASH_OCTO__";
        const BLOCK_COMMENT = /###[\s\S]*?###/gm;
        const INLINE_COMMENT = /^#.*$/g;

        const stripComments = str =>
          str
            .replace("\\#", TOKEN_ESCAPED_OCTO$1)
            .replace(BLOCK_COMMENT, "")
            .replace(INLINE_COMMENT, "")
            .replace(TOKEN_ESCAPED_OCTO$1, "#")
            .trim();

        function ownKeys(object, enumerableOnly) {
          var keys = Object.keys(object);
          if (Object.getOwnPropertySymbols) {
            var symbols = Object.getOwnPropertySymbols(object);
            if (enumerableOnly)
              symbols = symbols.filter(function(sym) {
                return Object.getOwnPropertyDescriptor(object, sym).enumerable;
              });
            keys.push.apply(keys, symbols);
          }
          return keys;
        }

        function _objectSpread(target) {
          for (var i = 1; i < arguments.length; i++) {
            var source = arguments[i] != null ? arguments[i] : {};
            if (i % 2) {
              ownKeys(source, true).forEach(function(key) {
                defineProperty(target, key, source[key]);
              });
            } else if (Object.getOwnPropertyDescriptors) {
              Object.defineProperties(
                target,
                Object.getOwnPropertyDescriptors(source)
              );
            } else {
              ownKeys(source).forEach(function(key) {
                Object.defineProperty(
                  target,
                  key,
                  Object.getOwnPropertyDescriptor(source, key)
                );
              });
            }
          }
          return target;
        }

        const findStory = win => {
          if (win && win.story) {
            return win.story;
          }

          return {
            state: {},
          };
        };

        const renderPassage = passage => {
          const source = passage.source;
          const directives = extractDirectives(source);
          let result = stripComments(source);

          if (passage) {
            // remove links if set previously
            passage.links = [];
          } // [[links]]

          const linkData = extractLinks(result);
          result = linkData.updated;

          if (passage) {
            passage.links = linkData.links;
          } // before handling any tags, handle any/all directives

          directives.forEach(d => {
            if (!passage.story.directives[d.name]) return;
            passage.story.directives[d.name].forEach(run => {
              result = run(d.content, result, passage, passage.story);
            });
          }); // if system tag, return an empty render set

          if (passage.hasTag("system")) {
            return [];
          } // if prompt tag is set, notify the story

          if (passage) {
            const prompts = passage.prefixTag("prompt");

            if (prompts.length) {
              passage.story.prompt(prompts[0]);
            }
          } // if this is a multiline item, trim, split, and mark each item
          // return the array

          if (passage.hasTag("multiline")) {
            result = result.trim();
            return result.split(/[\r\n]+/g);
          } // else returns an array of 1

          return [result];
        };

        class Passage {
          constructor(id, name, tags, source, story) {
            defineProperty(this, "id", null);

            defineProperty(this, "name", null);

            defineProperty(this, "tags", null);

            defineProperty(this, "tagDict", {});

            defineProperty(this, "source", null);

            defineProperty(this, "links", []);

            defineProperty(this, "getSpeaker", () => {
              const speakerTag =
                this.tags.find(t => t.indexOf("speaker-") === 0) || "";
              const systemTag = this.hasTag("system");
              if (speakerTag) return speakerTag.replace(/^speaker-/, "");
              if (systemTag) return "system";
              return null;
            });

            defineProperty(this, "prefixTag", (pfx, asDict) =>
              this.tags
                .filter(t => t.indexOf("".concat(pfx, "-")) === 0)
                .map(t => t.replace("".concat(pfx, "-"), ""))
                .reduce(
                  (a, t) => {
                    if (asDict)
                      return _objectSpread({}, a, {
                        [t]: 1,
                      });
                    return [...a, t];
                  },
                  asDict ? {} : []
                )
            );

            defineProperty(this, "hasTag", t => this.tagDict[t]);

            defineProperty(this, "render", () => renderPassage(this));

            this.id = id;
            this.name = name;
            this.tags = tags;
            this.source = lodash_unescape(source);
            this.story = story;
            this.tags.forEach(t => (this.tagDict[t] = 1));
          }
        }

        defineProperty(Passage, "render", str =>
          renderPassage(
            new Passage(null, null, null, str, findStory(window || null))
          )
        );

        /**
         * lodash (Custom Build) <https://lodash.com/>
         * Build: `lodash modularize exports="npm" -o ./`
         * Copyright jQuery Foundation and other contributors <https://jquery.org/>
         * Released under MIT license <https://lodash.com/license>
         * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
         * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
         */

        /** Used as references for various `Number` constants. */
        var INFINITY$1 = 1 / 0;

        /** `Object#toString` result references. */
        var symbolTag$1 = "[object Symbol]";

        /** Used to match HTML entities and HTML characters. */
        var reUnescapedHtml = /[&<>"'`]/g,
          reHasUnescapedHtml = RegExp(reUnescapedHtml.source);

        /** Used to map characters to HTML entities. */
        var htmlEscapes = {
          "&": "&amp;",
          "<": "&lt;",
          ">": "&gt;",
          '"': "&quot;",
          "'": "&#39;",
          "`": "&#96;",
        };

        /** Detect free variable `global` from Node.js. */
        var freeGlobal$1 =
          typeof commonjsGlobal == "object" &&
          commonjsGlobal &&
          commonjsGlobal.Object === Object &&
          commonjsGlobal;

        /** Detect free variable `self`. */
        var freeSelf$1 =
          typeof self == "object" && self && self.Object === Object && self;

        /** Used as a reference to the global object. */
        var root$1 = freeGlobal$1 || freeSelf$1 || Function("return this")();

        /**
         * The base implementation of `_.propertyOf` without support for deep paths.
         *
         * @private
         * @param {Object} object The object to query.
         * @returns {Function} Returns the new accessor function.
         */
        function basePropertyOf$1(object) {
          return function(key) {
            return object == null ? undefined : object[key];
          };
        }

        /**
         * Used by `_.escape` to convert characters to HTML entities.
         *
         * @private
         * @param {string} chr The matched character to escape.
         * @returns {string} Returns the escaped character.
         */
        var escapeHtmlChar = basePropertyOf$1(htmlEscapes);

        /** Used for built-in method references. */
        var objectProto$1 = Object.prototype;

        /**
         * Used to resolve the
         * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
         * of values.
         */
        var objectToString$1 = objectProto$1.toString;

        /** Built-in value references. */
        var Symbol$1 = root$1.Symbol;

        /** Used to convert symbols to primitives and strings. */
        var symbolProto$1 = Symbol$1 ? Symbol$1.prototype : undefined,
          symbolToString$1 = symbolProto$1 ? symbolProto$1.toString : undefined;

        /**
         * The base implementation of `_.toString` which doesn't convert nullish
         * values to empty strings.
         *
         * @private
         * @param {*} value The value to process.
         * @returns {string} Returns the string.
         */
        function baseToString$1(value) {
          // Exit early for strings to avoid a performance hit in some environments.
          if (typeof value == "string") {
            return value;
          }
          if (isSymbol$1(value)) {
            return symbolToString$1 ? symbolToString$1.call(value) : "";
          }
          var result = value + "";
          return result == "0" && 1 / value == -INFINITY$1 ? "-0" : result;
        }

        /**
         * Checks if `value` is object-like. A value is object-like if it's not `null`
         * and has a `typeof` result of "object".
         *
         * @static
         * @memberOf _
         * @since 4.0.0
         * @category Lang
         * @param {*} value The value to check.
         * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
         * @example
         *
         * _.isObjectLike({});
         * // => true
         *
         * _.isObjectLike([1, 2, 3]);
         * // => true
         *
         * _.isObjectLike(_.noop);
         * // => false
         *
         * _.isObjectLike(null);
         * // => false
         */
        function isObjectLike$1(value) {
          return !!value && typeof value == "object";
        }

        /**
         * Checks if `value` is classified as a `Symbol` primitive or object.
         *
         * @static
         * @memberOf _
         * @since 4.0.0
         * @category Lang
         * @param {*} value The value to check.
         * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
         * @example
         *
         * _.isSymbol(Symbol.iterator);
         * // => true
         *
         * _.isSymbol('abc');
         * // => false
         */
        function isSymbol$1(value) {
          return (
            typeof value == "symbol" ||
            (isObjectLike$1(value) &&
              objectToString$1.call(value) == symbolTag$1)
          );
        }

        /**
         * Converts `value` to a string. An empty string is returned for `null`
         * and `undefined` values. The sign of `-0` is preserved.
         *
         * @static
         * @memberOf _
         * @since 4.0.0
         * @category Lang
         * @param {*} value The value to process.
         * @returns {string} Returns the string.
         * @example
         *
         * _.toString(null);
         * // => ''
         *
         * _.toString(-0);
         * // => '-0'
         *
         * _.toString([1, 2, 3]);
         * // => '1,2,3'
         */
        function toString$1(value) {
          return value == null ? "" : baseToString$1(value);
        }

        /**
         * Converts the characters "&", "<", ">", '"', "'", and "\`" in `string` to
         * their corresponding HTML entities.
         *
         * **Note:** No other characters are escaped. To escape additional
         * characters use a third-party library like [_he_](https://mths.be/he).
         *
         * Though the ">" character is escaped for symmetry, characters like
         * ">" and "/" don't need escaping in HTML and have no special meaning
         * unless they're part of a tag or unquoted attribute value. See
         * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)
         * (under "semi-related fun fact") for more details.
         *
         * Backticks are escaped because in IE < 9, they can break out of
         * attribute values or HTML comments. See [#59](https://html5sec.org/#59),
         * [#102](https://html5sec.org/#102), [#108](https://html5sec.org/#108), and
         * [#133](https://html5sec.org/#133) of the
         * [HTML5 Security Cheatsheet](https://html5sec.org/) for more details.
         *
         * When working with HTML you should always
         * [quote attribute values](http://wonko.com/post/html-escaping) to reduce
         * XSS vectors.
         *
         * @static
         * @since 0.1.0
         * @memberOf _
         * @category String
         * @param {string} [string=''] The string to escape.
         * @returns {string} Returns the escaped string.
         * @example
         *
         * _.escape('fred, barney, & pebbles');
         * // => 'fred, barney, &amp; pebbles'
         */
        function escape(string) {
          string = toString$1(string);
          return string && reHasUnescapedHtml.test(string)
            ? string.replace(reUnescapedHtml, escapeHtmlChar)
            : string;
        }

        var lodash_escape = escape;

        const selectPassages = "tw-passagedata";
        const selectCss = '*[type="text/twine-css"]';
        const selectJs = '*[type="text/twine-javascript"]';
        const selectActiveLink = "#user-response-panel a[data-passage]";
        const selectActiveButton = "#user-response-panel button[data-passage]";
        const selectActiveInput = "#user-response-panel input";
        const selectActive = ".chat-panel .active";
        const selectHistory = ".chat-panel .history";
        const selectResponses = "#user-response-panel";
        const typingIndicator = "#animation-container";
        const IS_NUMERIC = /^[\d]+$/;
        /**
         * Determine if a provided string contains only numbers
         * In the case of `pid` values for passages, this is true
         */

        const isNumeric = d => IS_NUMERIC.test(d);
        /**
         * Format a user passage (such as a response)
         */

        const USER_PASSAGE_TMPL = ({ id, text }) =>
          '\n  <div class="chat-passage-wrapper" data-speaker="you">\n    <div class="chat-passage phistory" data-speaker="you" data-upassage="'
            .concat(id, '">\n      ')
            .concat(text, "\n    </div>\n  </div>\n");
        /**
         * Format a message from a non-user
         */

        const OTHER_PASSAGE_TMPL = ({ speaker, tags, text }) =>
          '\n  <div data-speaker="'
            .concat(speaker, '" class="chat-passage-wrapper ')
            .concat(tags.join(" "), '">\n    <div data-speaker="')
            .concat(speaker, '" class="chat-passage">\n      ')
            .concat(text, "\n    </div>\n  </div>\n");
        /**
         * Forces a delay via promises in order to spread out messages
         */

        const delay = async (t = 0) =>
          new Promise(resolve => setTimeout(resolve, t)); // Find one/many nodes within a context. We [...findAll] to ensure we're cast as an array
        // not as a node list

        const find = (ctx, s) => ctx.querySelector(s);

        const findAll = (ctx, s) => [...ctx.querySelectorAll(s)] || [];
        /**
         * Standard Twine Format Story Object
         */

        class Story {
          // Twine v2
          constructor(win, src) {
            defineProperty(this, "version", 2);

            defineProperty(this, "document", null);

            defineProperty(this, "story", null);

            defineProperty(this, "name", "");

            defineProperty(this, "startsAt", 0);

            defineProperty(this, "current", 0);

            defineProperty(this, "history", []);

            defineProperty(this, "passages", {});

            defineProperty(this, "showPrompt", false);

            defineProperty(this, "errorMessage", "\u26a0 %s");

            defineProperty(this, "directives", {});

            defineProperty(this, "elements", {});

            defineProperty(this, "userScripts", []);

            defineProperty(this, "userStyles", []);

            defineProperty(this, "start", () => {
              // activate userscripts and styles
              this.userStyles.forEach(s => {
                const t = this.document.createElement("style");
                t.innerHTML = s;
                this.document.body.appendChild(t);
              });
              this.userScripts.forEach(s => {
                // eval is evil, but this is simply how Twine works
                // eslint-disable-line
                globalEval(s);
              }); // when you click on a[data-passage] (response link)...

              this.document.body.addEventListener("click", e => {
                if (!e.target.matches(selectActiveLink)) {
                  return;
                }

                this.advance(
                  this.findPassage(e.target.getAttribute("data-passage")),
                  e.target.innerHTML
                );
              }); // when you click on button[data-passage] (response input)...

              this.document.body.addEventListener("click", e => {
                if (!e.target.matches(selectActiveButton)) {
                  return;
                } // capture and disable showPrompt feature

                const value = find(this.document, selectActiveInput).value;
                this.showPrompt = false;
                this.advance(
                  this.findPassage(e.target.getAttribute("data-passage")),
                  value
                );
              });
              this.advance(this.findPassage(this.startsAt));
            });

            defineProperty(this, "findPassage", idOrName => {
              if (isNumeric(idOrName)) {
                return this.passages[idOrName];
              } else {
                // handle passages with ' and " (can't use a css selector consistently)
                const p = findAll(this.story, "tw-passagedata").filter(
                  p => p.getAttribute("name") === idOrName
                )[0];
                if (!p) return null;
                return this.passages[p.getAttribute("pid")];
              }
            });

            defineProperty(
              this,
              "advance",
              async (passage, userText = null) => {
                this.history.push(passage.id);
                const last = this.current; // .active is captured & cleared

                const existing = this.elements.active.innerHTML;
                this.elements.active.innerHTML = ""; // whatever was in active is moved up into history

                this.elements.history.innerHTML += existing; // if there is userText, it is added to .history

                if (userText) {
                  this.renderUserMessage(
                    last,
                    userText,
                    s => (this.elements.history.innerHTML += s)
                  );
                } // The new passage is rendered and placed in .active
                // after all renders, user options are displayed

                await this.renderPassage(
                  passage,
                  s => (this.elements.active.innerHTML += s)
                );

                if (passage.hasTag("auto")) {
                  // auto advance if the auto tag is set, skipping anything that
                  // could pause our operation
                  this.advance(this.findPassage(passage.links[0].target));
                  return;
                } // if prompt is set from the current node, enable freetext

                if (this.showPrompt) {
                  this.renderTextInput(passage);
                } else {
                  this.renderChoices(passage);
                }
              }
            );

            defineProperty(
              this,
              "renderUserMessage",
              async (pid, text, renderer) => {
                await renderer(
                  USER_PASSAGE_TMPL({
                    pid,
                    text,
                  })
                );
                this.scrollToBottom();
                return Promise.resolve();
              }
            );

            defineProperty(this, "renderPassage", async (passage, renderer) => {
              const speaker = passage.getSpeaker();
              let statements = passage.render();
              let next = statements.shift();
              this.showTyping();

              while (next) {
                const content = OTHER_PASSAGE_TMPL({
                  speaker,
                  tags: passage.tags,
                  text: next,
                });
                await delay(this.calculateDelay(next)); // todo

                await renderer(content);
                next = statements.shift();
              }

              this.hideTyping();
              this.scrollToBottom();
              return Promise.resolve();
            });

            defineProperty(this, "calculateDelay", txt => {
              const typingDelayRatio = 0.3;
              const rate = 20; // ms

              return txt.length * rate * typingDelayRatio;
            });

            defineProperty(this, "showTyping", () => {
              find(this.document, typingIndicator).style.visibility = "visible";
            });

            defineProperty(this, "hideTyping", () => {
              find(this.document, typingIndicator).style.visibility = "hidden";
            });

            defineProperty(this, "scrollToBottom", () => {
              const hist = find(this.document, "#phistory");
              document.scrollingElement.scrollTop = hist.offsetHeight;
            });

            defineProperty(this, "removeChoices", () => {
              const panel = find(this.document, selectResponses);
              panel.innerHTML = "";
            });

            defineProperty(this, "renderChoices", passage => {
              this.removeChoices();
              const panel = find(this.document, selectResponses);
              passage.links.forEach(l => {
                panel.innerHTML += '<a href="javascript:void(0)" class="user-response" data-passage="'
                  .concat(lodash_escape(l.target), '">')
                  .concat(l.display, "</a>");
              });
            });

            defineProperty(this, "renderTextInput", passage => {
              this.removeChoices();
              const panel = find(this.document, selectResponses);
              panel.innerHTML = '<input type="text" id="user-input" placeholder="'
                .concat(
                  this.showPrompt.placeholder,
                  '" /><button data-passage="'
                )
                .concat(
                  lodash_escape(passage.links[0].target),
                  '">&gt;</button>'
                );
            });

            defineProperty(
              this,
              "prompt",
              (saveAs, placeholder) =>
                (this.showPrompt = {
                  saveAs,
                  placeholder,
                })
            );

            defineProperty(this, "directive", (id, cb) => {
              if (!this.directives[id]) {
                this.directives[id] = [];
              }

              this.directives[id].push(cb);
            });

            this.window = win;

            if (src) {
              this.document = document.implementation.createHTMLDocument(
                "Chatbook Injected Content"
              );
            } else {
              this.document = document;
            }

            this.story = find(this.document, "tw-storydata"); // elements

            this.elements = {
              active: find(this.document, selectActive),
              history: find(this.document, selectHistory),
            }; // properties of story node

            this.name = this.story.getAttribute("name") || "";
            this.startsAt = this.story.getAttribute("startnode") || 0;
            findAll(this.story, selectPassages).forEach(p => {
              const id = parseInt(p.getAttribute("pid"));
              const name = p.getAttribute("name");
              const tags = (p.getAttribute("tags") || "").split(/\s+/g);
              const passage = p.innerHTML || "";
              this.passages[id] = new Passage(id, name, tags, passage, this);
            });
            find(this.document, "title").innerHTML = this.name;
            find(this.document, "#ptitle").innerHTML = this.name;
            this.userScripts = (findAll(this.document, selectJs) || []).map(
              el => el.innerHTML
            );
            this.userStyles = (findAll(this.document, selectCss) || []).map(
              el => el.innerHTML
            );
          }
          /**
           * Starts the story by setting up listeners and then advancing
           * to the first item in the stack
           */
        }

        (win => {
          if (typeof win !== "undefined") {
            win.document.addEventListener("DOMContentLoaded", function(event) {
              window.globalEval = eval;
              window.story = new Story(win);
              window.story.start();
            });
          }
        })(window || undefined);
      });
      //# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhdGJvb2sudW1kLmpzIiwic291cmNlcyI6WyIuLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eS5qcyIsIi4uL25vZGVfbW9kdWxlcy9sb2Rhc2gudW5lc2NhcGUvaW5kZXguanMiLCIuLi9zcmMvY29tbW9uL2V4dHJhY3REaXJlY3RpdmVzLmpzIiwiLi4vc3JjL2NvbW1vbi9leHRyYWN0TGlua3MuanMiLCIuLi9zcmMvY29tbW9uL3N0cmlwQ29tbWVudHMuanMiLCIuLi9zcmMvdHdpbmUvUGFzc2FnZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9sb2Rhc2guZXNjYXBlL2luZGV4LmpzIiwiLi4vc3JjL3R3aW5lL1N0b3J5LmpzIiwiLi4vc3JjL3R3aW5lL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleSBpbiBvYmopIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9ialtrZXldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gb2JqO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9kZWZpbmVQcm9wZXJ0eTsiLCIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgSU5GSU5JVFkgPSAxIC8gMDtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBIVE1MIGVudGl0aWVzIGFuZCBIVE1MIGNoYXJhY3RlcnMuICovXG52YXIgcmVFc2NhcGVkSHRtbCA9IC8mKD86YW1wfGx0fGd0fHF1b3R8IzM5fCM5Nik7L2csXG4gICAgcmVIYXNFc2NhcGVkSHRtbCA9IFJlZ0V4cChyZUVzY2FwZWRIdG1sLnNvdXJjZSk7XG5cbi8qKiBVc2VkIHRvIG1hcCBIVE1MIGVudGl0aWVzIHRvIGNoYXJhY3RlcnMuICovXG52YXIgaHRtbFVuZXNjYXBlcyA9IHtcbiAgJyZhbXA7JzogJyYnLFxuICAnJmx0Oyc6ICc8JyxcbiAgJyZndDsnOiAnPicsXG4gICcmcXVvdDsnOiAnXCInLFxuICAnJiMzOTsnOiBcIidcIixcbiAgJyYjOTY7JzogJ2AnXG59O1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xudmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cbi8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlPZmAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZVByb3BlcnR5T2Yob2JqZWN0KSB7XG4gIHJldHVybiBmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgfTtcbn1cblxuLyoqXG4gKiBVc2VkIGJ5IGBfLnVuZXNjYXBlYCB0byBjb252ZXJ0IEhUTUwgZW50aXRpZXMgdG8gY2hhcmFjdGVycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGNociBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gdW5lc2NhcGUuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB1bmVzY2FwZWQgY2hhcmFjdGVyLlxuICovXG52YXIgdW5lc2NhcGVIdG1sQ2hhciA9IGJhc2VQcm9wZXJ0eU9mKGh0bWxVbmVzY2FwZXMpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgU3ltYm9sID0gcm9vdC5TeW1ib2w7XG5cbi8qKiBVc2VkIHRvIGNvbnZlcnQgc3ltYm9scyB0byBwcmltaXRpdmVzIGFuZCBzdHJpbmdzLiAqL1xudmFyIHN5bWJvbFByb3RvID0gU3ltYm9sID8gU3ltYm9sLnByb3RvdHlwZSA6IHVuZGVmaW5lZCxcbiAgICBzeW1ib2xUb1N0cmluZyA9IHN5bWJvbFByb3RvID8gc3ltYm9sUHJvdG8udG9TdHJpbmcgOiB1bmRlZmluZWQ7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udG9TdHJpbmdgIHdoaWNoIGRvZXNuJ3QgY29udmVydCBudWxsaXNoXG4gKiB2YWx1ZXMgdG8gZW1wdHkgc3RyaW5ncy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG4gIC8vIEV4aXQgZWFybHkgZm9yIHN0cmluZ3MgdG8gYXZvaWQgYSBwZXJmb3JtYW5jZSBoaXQgaW4gc29tZSBlbnZpcm9ubWVudHMuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBzeW1ib2xUb1N0cmluZyA/IHN5bWJvbFRvU3RyaW5nLmNhbGwodmFsdWUpIDogJyc7XG4gIH1cbiAgdmFyIHJlc3VsdCA9ICh2YWx1ZSArICcnKTtcbiAgcmV0dXJuIChyZXN1bHQgPT0gJzAnICYmICgxIC8gdmFsdWUpID09IC1JTkZJTklUWSkgPyAnLTAnIDogcmVzdWx0O1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQgZm9yIGBudWxsYFxuICogYW5kIGB1bmRlZmluZWRgIHZhbHVlcy4gVGhlIHNpZ24gb2YgYC0wYCBpcyBwcmVzZXJ2ZWQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9TdHJpbmcobnVsbCk7XG4gKiAvLyA9PiAnJ1xuICpcbiAqIF8udG9TdHJpbmcoLTApO1xuICogLy8gPT4gJy0wJ1xuICpcbiAqIF8udG9TdHJpbmcoWzEsIDIsIDNdKTtcbiAqIC8vID0+ICcxLDIsMydcbiAqL1xuZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IGJhc2VUb1N0cmluZyh2YWx1ZSk7XG59XG5cbi8qKlxuICogVGhlIGludmVyc2Ugb2YgYF8uZXNjYXBlYDsgdGhpcyBtZXRob2QgY29udmVydHMgdGhlIEhUTUwgZW50aXRpZXNcbiAqIGAmYW1wO2AsIGAmbHQ7YCwgYCZndDtgLCBgJnF1b3Q7YCwgYCYjMzk7YCwgYW5kIGAmIzk2O2AgaW4gYHN0cmluZ2AgdG9cbiAqIHRoZWlyIGNvcnJlc3BvbmRpbmcgY2hhcmFjdGVycy5cbiAqXG4gKiAqKk5vdGU6KiogTm8gb3RoZXIgSFRNTCBlbnRpdGllcyBhcmUgdW5lc2NhcGVkLiBUbyB1bmVzY2FwZSBhZGRpdGlvbmFsXG4gKiBIVE1MIGVudGl0aWVzIHVzZSBhIHRoaXJkLXBhcnR5IGxpYnJhcnkgbGlrZSBbX2hlX10oaHR0cHM6Ly9tdGhzLmJlL2hlKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuNi4wXG4gKiBAY2F0ZWdvcnkgU3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byB1bmVzY2FwZS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHVuZXNjYXBlZCBzdHJpbmcuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udW5lc2NhcGUoJ2ZyZWQsIGJhcm5leSwgJmFtcDsgcGViYmxlcycpO1xuICogLy8gPT4gJ2ZyZWQsIGJhcm5leSwgJiBwZWJibGVzJ1xuICovXG5mdW5jdGlvbiB1bmVzY2FwZShzdHJpbmcpIHtcbiAgc3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtcbiAgcmV0dXJuIChzdHJpbmcgJiYgcmVIYXNFc2NhcGVkSHRtbC50ZXN0KHN0cmluZykpXG4gICAgPyBzdHJpbmcucmVwbGFjZShyZUVzY2FwZWRIdG1sLCB1bmVzY2FwZUh0bWxDaGFyKVxuICAgIDogc3RyaW5nO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHVuZXNjYXBlO1xuIiwiY29uc3QgVE9LRU5fRVNDQVBFRF9PQ1RPID0gXCJfX1RPS0VOX0VTQ0FQRURfQkFDS1NMQVNIX09DVE9fX1wiO1xuY29uc3QgQkxPQ0tfRElSRUNUSVZFID0gL14jIyNAKFtcXFNdKykoW1xcc1xcU10qPykjIyMvZ207XG5jb25zdCBJTkxJTkVfRElSRUNUSVZFID0gL14jQChbXFxTXSspKC4qKS9nO1xuXG5jb25zdCBleHRyYWN0RGlyZWN0aXZlcyA9IHMgPT4ge1xuICBjb25zdCBkaXJlY3RpdmVzID0gW107XG5cbiAgLy8gYXZvaWQgc2x1cmluZyBlc2NhcGVkIGl0ZW1zXG4gIHMgPSBzLnJlcGxhY2UoXCJcXFxcI1wiLCBUT0tFTl9FU0NBUEVEX09DVE8pO1xuXG4gIHMucmVwbGFjZShCTE9DS19ESVJFQ1RJVkUsIChtYXRjaCwgZGlyLCBjb250ZW50KSA9PiB7XG4gICAgZGlyZWN0aXZlcy5wdXNoKHsgbmFtZTogYEAke2Rpcn1gLCBjb250ZW50OiBjb250ZW50LnRyaW0oKSB9KTtcbiAgICByZXR1cm4gXCJcIjtcbiAgfSk7XG4gIHMucmVwbGFjZShJTkxJTkVfRElSRUNUSVZFLCAobWF0Y2gsIGRpciwgY29udGVudCkgPT4ge1xuICAgIGRpcmVjdGl2ZXMucHVzaCh7IG5hbWU6IGBAJHtkaXJ9YCwgY29udGVudDogY29udGVudC50cmltKCkgfSk7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH0pO1xuXG4gIHJldHVybiBkaXJlY3RpdmVzO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZXh0cmFjdERpcmVjdGl2ZXM7XG4iLCJjb25zdCBJU19FWFRFUk5BTF9VUkwgPSAvXlxcdys6XFwvXFwvXFwvP1xcdy9pO1xuY29uc3QgTElOS19QQVRURVJOID0gL1xcW1xcWyguKj8pXFxdXFxdL2c7XG5cbmNvbnN0IGV4dHJhY3RMaW5rcyA9IHN0ciA9PiB7XG4gIGNvbnN0IGxpbmtzID0gW107XG4gIGNvbnN0IHVwZGF0ZWQgPSBzdHIucmVwbGFjZShMSU5LX1BBVFRFUk4sIChtYXRjaCwgdCkgPT4ge1xuICAgIGxldCBkaXNwbGF5ID0gdDtcbiAgICBsZXQgdGFyZ2V0ID0gdDtcblxuICAgIC8vIGRpc3BsYXl8dGFyZ2V0IGZvcm1hdFxuICAgIGNvbnN0IGJhckluZGV4ID0gdC5pbmRleE9mKFwifFwiKTtcbiAgICBjb25zdCByaWdodEFyckluZGV4ID0gdC5pbmRleE9mKFwiLT5cIik7XG4gICAgY29uc3QgbGVmdEFyckluZGV4ID0gdC5pbmRleE9mKFwiPC1cIik7XG5cbiAgICBzd2l0Y2ggKHRydWUpIHtcbiAgICAgIGNhc2UgYmFySW5kZXggPj0gMDpcbiAgICAgICAgZGlzcGxheSA9IHQuc3Vic3RyKDAsIGJhckluZGV4KTtcbiAgICAgICAgdGFyZ2V0ID0gdC5zdWJzdHIoYmFySW5kZXggKyAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHJpZ2h0QXJySW5kZXggPj0gMDpcbiAgICAgICAgZGlzcGxheSA9IHQuc3Vic3RyKDAsIHJpZ2h0QXJySW5kZXgpO1xuICAgICAgICB0YXJnZXQgPSB0LnN1YnN0cihyaWdodEFyckluZGV4ICsgMik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBsZWZ0QXJySW5kZXggPj0gMDpcbiAgICAgICAgZGlzcGxheSA9IHQuc3Vic3RyKGxlZnRBcnJJbmRleCArIDIpO1xuICAgICAgICB0YXJnZXQgPSB0LnN1YnN0cigwLCBsZWZ0QXJySW5kZXgpO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvLyByZW5kZXIgYW4gZXh0ZXJuYWwgbGluayAmIHN0b3A/XG4gICAgaWYgKElTX0VYVEVSTkFMX1VSTC50ZXN0KHRhcmdldCkpIHtcbiAgICAgIHJldHVybiAnPGEgaHJlZj1cIicgKyB0YXJnZXQgKyAnXCIgdGFyZ2V0PVwiX2JsYW5rXCI+JyArIGRpc3BsYXkgKyBcIjwvYT5cIjtcbiAgICB9XG5cbiAgICBsaW5rcy5wdXNoKHtcbiAgICAgIGRpc3BsYXksXG4gICAgICB0YXJnZXQsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gXCJcIjsgLy8gcmVuZGVyIG5vdGhpbmcgaWYgaXQncyBhIHR3ZWUgbGlua1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGxpbmtzLFxuICAgIHVwZGF0ZWQsXG4gICAgb3JpZ2luYWw6IHN0cixcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGV4dHJhY3RMaW5rcztcbiIsImNvbnN0IFRPS0VOX0VTQ0FQRURfT0NUTyA9IFwiX19UT0tFTl9FU0NBUEVEX0JBQ0tTTEFTSF9PQ1RPX19cIjtcblxuY29uc3QgQkxPQ0tfQ09NTUVOVCA9IC8jIyNbXFxzXFxTXSo/IyMjL2dtO1xuY29uc3QgSU5MSU5FX0NPTU1FTlQgPSAvXiMuKiQvZztcblxuY29uc3Qgc3RyaXBDb21tZW50cyA9IHN0ciA9PlxuICBzdHJcbiAgICAucmVwbGFjZShcIlxcXFwjXCIsIFRPS0VOX0VTQ0FQRURfT0NUTylcbiAgICAucmVwbGFjZShCTE9DS19DT01NRU5ULCBcIlwiKVxuICAgIC5yZXBsYWNlKElOTElORV9DT01NRU5ULCBcIlwiKVxuICAgIC5yZXBsYWNlKFRPS0VOX0VTQ0FQRURfT0NUTywgXCIjXCIpXG4gICAgLnRyaW0oKTtcblxuZXhwb3J0IGRlZmF1bHQgc3RyaXBDb21tZW50cztcbiIsImltcG9ydCB1bmVzY2FwZSBmcm9tIFwibG9kYXNoLnVuZXNjYXBlXCI7XG5pbXBvcnQgZXh0cmFjdERpcmVjdGl2ZXMgZnJvbSBcIi4uL2NvbW1vbi9leHRyYWN0RGlyZWN0aXZlc1wiO1xuaW1wb3J0IGV4dHJhY3RMaW5rcyBmcm9tIFwiLi4vY29tbW9uL2V4dHJhY3RMaW5rc1wiO1xuaW1wb3J0IHN0cmlwQ29tbWVudHMgZnJvbSBcIi4uL2NvbW1vbi9zdHJpcENvbW1lbnRzXCI7XG5cbmNvbnN0IGZpbmRTdG9yeSA9IHdpbiA9PiB7XG4gIGlmICh3aW4gJiYgd2luLnN0b3J5KSB7XG4gICAgcmV0dXJuIHdpbi5zdG9yeTtcbiAgfVxuICByZXR1cm4geyBzdGF0ZToge30gfTtcbn07XG5cbmNvbnN0IHJlbmRlclBhc3NhZ2UgPSBwYXNzYWdlID0+IHtcbiAgY29uc3Qgc291cmNlID0gcGFzc2FnZS5zb3VyY2U7XG5cbiAgY29uc3QgZGlyZWN0aXZlcyA9IGV4dHJhY3REaXJlY3RpdmVzKHNvdXJjZSk7XG4gIGxldCByZXN1bHQgPSBzdHJpcENvbW1lbnRzKHNvdXJjZSk7XG5cbiAgaWYgKHBhc3NhZ2UpIHtcbiAgICAvLyByZW1vdmUgbGlua3MgaWYgc2V0IHByZXZpb3VzbHlcbiAgICBwYXNzYWdlLmxpbmtzID0gW107XG4gIH1cblxuICAvLyBbW2xpbmtzXV1cbiAgY29uc3QgbGlua0RhdGEgPSBleHRyYWN0TGlua3MocmVzdWx0KTtcbiAgcmVzdWx0ID0gbGlua0RhdGEudXBkYXRlZDtcbiAgaWYgKHBhc3NhZ2UpIHtcbiAgICBwYXNzYWdlLmxpbmtzID0gbGlua0RhdGEubGlua3M7XG4gIH1cblxuICAvLyBiZWZvcmUgaGFuZGxpbmcgYW55IHRhZ3MsIGhhbmRsZSBhbnkvYWxsIGRpcmVjdGl2ZXNcbiAgZGlyZWN0aXZlcy5mb3JFYWNoKGQgPT4ge1xuICAgIGlmICghcGFzc2FnZS5zdG9yeS5kaXJlY3RpdmVzW2QubmFtZV0pIHJldHVybjtcbiAgICBwYXNzYWdlLnN0b3J5LmRpcmVjdGl2ZXNbZC5uYW1lXS5mb3JFYWNoKHJ1biA9PiB7XG4gICAgICByZXN1bHQgPSBydW4oZC5jb250ZW50LCByZXN1bHQsIHBhc3NhZ2UsIHBhc3NhZ2Uuc3RvcnkpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBpZiBzeXN0ZW0gdGFnLCByZXR1cm4gYW4gZW1wdHkgcmVuZGVyIHNldFxuICBpZiAocGFzc2FnZS5oYXNUYWcoXCJzeXN0ZW1cIikpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICAvLyBpZiBwcm9tcHQgdGFnIGlzIHNldCwgbm90aWZ5IHRoZSBzdG9yeVxuICBpZiAocGFzc2FnZSkge1xuICAgIGNvbnN0IHByb21wdHMgPSBwYXNzYWdlLnByZWZpeFRhZyhcInByb21wdFwiKTtcbiAgICBpZiAocHJvbXB0cy5sZW5ndGgpIHtcbiAgICAgIHBhc3NhZ2Uuc3RvcnkucHJvbXB0KHByb21wdHNbMF0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoaXMgaXMgYSBtdWx0aWxpbmUgaXRlbSwgdHJpbSwgc3BsaXQsIGFuZCBtYXJrIGVhY2ggaXRlbVxuICAvLyByZXR1cm4gdGhlIGFycmF5XG4gIGlmIChwYXNzYWdlLmhhc1RhZyhcIm11bHRpbGluZVwiKSkge1xuICAgIHJlc3VsdCA9IHJlc3VsdC50cmltKCk7XG4gICAgcmV0dXJuIHJlc3VsdC5zcGxpdCgvW1xcclxcbl0rL2cpO1xuICB9XG5cbiAgLy8gZWxzZSByZXR1cm5zIGFuIGFycmF5IG9mIDFcbiAgcmV0dXJuIFtyZXN1bHRdO1xufTtcblxuY2xhc3MgUGFzc2FnZSB7XG4gIGlkID0gbnVsbDtcbiAgbmFtZSA9IG51bGw7XG4gIHRhZ3MgPSBudWxsO1xuICB0YWdEaWN0ID0ge307XG4gIHNvdXJjZSA9IG51bGw7XG4gIGxpbmtzID0gW107XG5cbiAgY29uc3RydWN0b3IoaWQsIG5hbWUsIHRhZ3MsIHNvdXJjZSwgc3RvcnkpIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLnRhZ3MgPSB0YWdzO1xuICAgIHRoaXMuc291cmNlID0gdW5lc2NhcGUoc291cmNlKTtcbiAgICB0aGlzLnN0b3J5ID0gc3Rvcnk7XG5cbiAgICB0aGlzLnRhZ3MuZm9yRWFjaCh0ID0+ICh0aGlzLnRhZ0RpY3RbdF0gPSAxKSk7XG4gIH1cblxuICBnZXRTcGVha2VyID0gKCkgPT4ge1xuICAgIGNvbnN0IHNwZWFrZXJUYWcgPSB0aGlzLnRhZ3MuZmluZCh0ID0+IHQuaW5kZXhPZihcInNwZWFrZXItXCIpID09PSAwKSB8fCBcIlwiO1xuICAgIGNvbnN0IHN5c3RlbVRhZyA9IHRoaXMuaGFzVGFnKFwic3lzdGVtXCIpO1xuICAgIGlmIChzcGVha2VyVGFnKSByZXR1cm4gc3BlYWtlclRhZy5yZXBsYWNlKC9ec3BlYWtlci0vLCBcIlwiKTtcbiAgICBpZiAoc3lzdGVtVGFnKSByZXR1cm4gXCJzeXN0ZW1cIjtcbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBwcmVmaXhUYWcgPSAocGZ4LCBhc0RpY3QpID0+XG4gICAgdGhpcy50YWdzXG4gICAgICAuZmlsdGVyKHQgPT4gdC5pbmRleE9mKGAke3BmeH0tYCkgPT09IDApXG4gICAgICAubWFwKHQgPT4gdC5yZXBsYWNlKGAke3BmeH0tYCwgXCJcIikpXG4gICAgICAucmVkdWNlKFxuICAgICAgICAoYSwgdCkgPT4ge1xuICAgICAgICAgIGlmIChhc0RpY3QpXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5hLFxuICAgICAgICAgICAgICBbdF06IDEsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgcmV0dXJuIFsuLi5hLCB0XTtcbiAgICAgICAgfSxcbiAgICAgICAgYXNEaWN0ID8ge30gOiBbXVxuICAgICAgKTtcblxuICBoYXNUYWcgPSB0ID0+IHRoaXMudGFnRGljdFt0XTtcblxuICAvLyBzdGF0aWMgYW5kIGluc3RhbmNlIHJlbmRlcnNcbiAgc3RhdGljIHJlbmRlciA9IHN0ciA9PlxuICAgIHJlbmRlclBhc3NhZ2UoXG4gICAgICBuZXcgUGFzc2FnZShudWxsLCBudWxsLCBudWxsLCBzdHIsIGZpbmRTdG9yeSh3aW5kb3cgfHwgbnVsbCkpXG4gICAgKTtcbiAgcmVuZGVyID0gKCkgPT4gcmVuZGVyUGFzc2FnZSh0aGlzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgUGFzc2FnZTtcbiIsIi8qKlxuICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBJTkZJTklUWSA9IDEgLyAwO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIEhUTUwgZW50aXRpZXMgYW5kIEhUTUwgY2hhcmFjdGVycy4gKi9cbnZhciByZVVuZXNjYXBlZEh0bWwgPSAvWyY8PlwiJ2BdL2csXG4gICAgcmVIYXNVbmVzY2FwZWRIdG1sID0gUmVnRXhwKHJlVW5lc2NhcGVkSHRtbC5zb3VyY2UpO1xuXG4vKiogVXNlZCB0byBtYXAgY2hhcmFjdGVycyB0byBIVE1MIGVudGl0aWVzLiAqL1xudmFyIGh0bWxFc2NhcGVzID0ge1xuICAnJic6ICcmYW1wOycsXG4gICc8JzogJyZsdDsnLFxuICAnPic6ICcmZ3Q7JyxcbiAgJ1wiJzogJyZxdW90OycsXG4gIFwiJ1wiOiAnJiMzOTsnLFxuICAnYCc6ICcmIzk2Oydcbn07XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG52YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eU9mYCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUHJvcGVydHlPZihvYmplY3QpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuICB9O1xufVxuXG4vKipcbiAqIFVzZWQgYnkgYF8uZXNjYXBlYCB0byBjb252ZXJ0IGNoYXJhY3RlcnMgdG8gSFRNTCBlbnRpdGllcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGNociBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gZXNjYXBlLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBjaGFyYWN0ZXIuXG4gKi9cbnZhciBlc2NhcGVIdG1sQ2hhciA9IGJhc2VQcm9wZXJ0eU9mKGh0bWxFc2NhcGVzKTtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIFN5bWJvbCA9IHJvb3QuU3ltYm9sO1xuXG4vKiogVXNlZCB0byBjb252ZXJ0IHN5bWJvbHMgdG8gcHJpbWl0aXZlcyBhbmQgc3RyaW5ncy4gKi9cbnZhciBzeW1ib2xQcm90byA9IFN5bWJvbCA/IFN5bWJvbC5wcm90b3R5cGUgOiB1bmRlZmluZWQsXG4gICAgc3ltYm9sVG9TdHJpbmcgPSBzeW1ib2xQcm90byA/IHN5bWJvbFByb3RvLnRvU3RyaW5nIDogdW5kZWZpbmVkO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRvU3RyaW5nYCB3aGljaCBkb2Vzbid0IGNvbnZlcnQgbnVsbGlzaFxuICogdmFsdWVzIHRvIGVtcHR5IHN0cmluZ3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGJhc2VUb1N0cmluZyh2YWx1ZSkge1xuICAvLyBFeGl0IGVhcmx5IGZvciBzdHJpbmdzIHRvIGF2b2lkIGEgcGVyZm9ybWFuY2UgaGl0IGluIHNvbWUgZW52aXJvbm1lbnRzLlxuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gc3ltYm9sVG9TdHJpbmcgPyBzeW1ib2xUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnO1xuICB9XG4gIHZhciByZXN1bHQgPSAodmFsdWUgKyAnJyk7XG4gIHJldHVybiAocmVzdWx0ID09ICcwJyAmJiAoMSAvIHZhbHVlKSA9PSAtSU5GSU5JVFkpID8gJy0wJyA6IHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTeW1ib2woJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3ltYm9sJyB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZy4gQW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkIGZvciBgbnVsbGBcbiAqIGFuZCBgdW5kZWZpbmVkYCB2YWx1ZXMuIFRoZSBzaWduIG9mIGAtMGAgaXMgcHJlc2VydmVkLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvU3RyaW5nKG51bGwpO1xuICogLy8gPT4gJydcbiAqXG4gKiBfLnRvU3RyaW5nKC0wKTtcbiAqIC8vID0+ICctMCdcbiAqXG4gKiBfLnRvU3RyaW5nKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiAnMSwyLDMnXG4gKi9cbmZ1bmN0aW9uIHRvU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiBiYXNlVG9TdHJpbmcodmFsdWUpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBjaGFyYWN0ZXJzIFwiJlwiLCBcIjxcIiwgXCI+XCIsICdcIicsIFwiJ1wiLCBhbmQgXCJcXGBcIiBpbiBgc3RyaW5nYCB0b1xuICogdGhlaXIgY29ycmVzcG9uZGluZyBIVE1MIGVudGl0aWVzLlxuICpcbiAqICoqTm90ZToqKiBObyBvdGhlciBjaGFyYWN0ZXJzIGFyZSBlc2NhcGVkLiBUbyBlc2NhcGUgYWRkaXRpb25hbFxuICogY2hhcmFjdGVycyB1c2UgYSB0aGlyZC1wYXJ0eSBsaWJyYXJ5IGxpa2UgW19oZV9dKGh0dHBzOi8vbXRocy5iZS9oZSkuXG4gKlxuICogVGhvdWdoIHRoZSBcIj5cIiBjaGFyYWN0ZXIgaXMgZXNjYXBlZCBmb3Igc3ltbWV0cnksIGNoYXJhY3RlcnMgbGlrZVxuICogXCI+XCIgYW5kIFwiL1wiIGRvbid0IG5lZWQgZXNjYXBpbmcgaW4gSFRNTCBhbmQgaGF2ZSBubyBzcGVjaWFsIG1lYW5pbmdcbiAqIHVubGVzcyB0aGV5J3JlIHBhcnQgb2YgYSB0YWcgb3IgdW5xdW90ZWQgYXR0cmlidXRlIHZhbHVlLiBTZWVcbiAqIFtNYXRoaWFzIEJ5bmVucydzIGFydGljbGVdKGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9hbWJpZ3VvdXMtYW1wZXJzYW5kcylcbiAqICh1bmRlciBcInNlbWktcmVsYXRlZCBmdW4gZmFjdFwiKSBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIEJhY2t0aWNrcyBhcmUgZXNjYXBlZCBiZWNhdXNlIGluIElFIDwgOSwgdGhleSBjYW4gYnJlYWsgb3V0IG9mXG4gKiBhdHRyaWJ1dGUgdmFsdWVzIG9yIEhUTUwgY29tbWVudHMuIFNlZSBbIzU5XShodHRwczovL2h0bWw1c2VjLm9yZy8jNTkpLFxuICogWyMxMDJdKGh0dHBzOi8vaHRtbDVzZWMub3JnLyMxMDIpLCBbIzEwOF0oaHR0cHM6Ly9odG1sNXNlYy5vcmcvIzEwOCksIGFuZFxuICogWyMxMzNdKGh0dHBzOi8vaHRtbDVzZWMub3JnLyMxMzMpIG9mIHRoZVxuICogW0hUTUw1IFNlY3VyaXR5IENoZWF0c2hlZXRdKGh0dHBzOi8vaHRtbDVzZWMub3JnLykgZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBXaGVuIHdvcmtpbmcgd2l0aCBIVE1MIHlvdSBzaG91bGQgYWx3YXlzXG4gKiBbcXVvdGUgYXR0cmlidXRlIHZhbHVlc10oaHR0cDovL3dvbmtvLmNvbS9wb3N0L2h0bWwtZXNjYXBpbmcpIHRvIHJlZHVjZVxuICogWFNTIHZlY3RvcnMuXG4gKlxuICogQHN0YXRpY1xuICogQHNpbmNlIDAuMS4wXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IFN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gZXNjYXBlLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBzdHJpbmcuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZXNjYXBlKCdmcmVkLCBiYXJuZXksICYgcGViYmxlcycpO1xuICogLy8gPT4gJ2ZyZWQsIGJhcm5leSwgJmFtcDsgcGViYmxlcydcbiAqL1xuZnVuY3Rpb24gZXNjYXBlKHN0cmluZykge1xuICBzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO1xuICByZXR1cm4gKHN0cmluZyAmJiByZUhhc1VuZXNjYXBlZEh0bWwudGVzdChzdHJpbmcpKVxuICAgID8gc3RyaW5nLnJlcGxhY2UocmVVbmVzY2FwZWRIdG1sLCBlc2NhcGVIdG1sQ2hhcilcbiAgICA6IHN0cmluZztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlc2NhcGU7XG4iLCJpbXBvcnQgUGFzc2FnZSBmcm9tIFwiLi9QYXNzYWdlXCI7XG5pbXBvcnQgZXNjYXBlIGZyb20gXCJsb2Rhc2guZXNjYXBlXCI7XG5cbmNvbnN0IHNlbGVjdFBhc3NhZ2VzID0gXCJ0dy1wYXNzYWdlZGF0YVwiO1xuY29uc3Qgc2VsZWN0Q3NzID0gJypbdHlwZT1cInRleHQvdHdpbmUtY3NzXCJdJztcbmNvbnN0IHNlbGVjdEpzID0gJypbdHlwZT1cInRleHQvdHdpbmUtamF2YXNjcmlwdFwiXSc7XG5jb25zdCBzZWxlY3RBY3RpdmVMaW5rID0gXCIjdXNlci1yZXNwb25zZS1wYW5lbCBhW2RhdGEtcGFzc2FnZV1cIjtcbmNvbnN0IHNlbGVjdEFjdGl2ZUJ1dHRvbiA9IFwiI3VzZXItcmVzcG9uc2UtcGFuZWwgYnV0dG9uW2RhdGEtcGFzc2FnZV1cIjtcbmNvbnN0IHNlbGVjdEFjdGl2ZUlucHV0ID0gXCIjdXNlci1yZXNwb25zZS1wYW5lbCBpbnB1dFwiO1xuY29uc3Qgc2VsZWN0QWN0aXZlID0gXCIuY2hhdC1wYW5lbCAuYWN0aXZlXCI7XG5jb25zdCBzZWxlY3RIaXN0b3J5ID0gXCIuY2hhdC1wYW5lbCAuaGlzdG9yeVwiO1xuY29uc3Qgc2VsZWN0UmVzcG9uc2VzID0gXCIjdXNlci1yZXNwb25zZS1wYW5lbFwiO1xuY29uc3QgdHlwaW5nSW5kaWNhdG9yID0gXCIjYW5pbWF0aW9uLWNvbnRhaW5lclwiO1xuXG5jb25zdCBJU19OVU1FUklDID0gL15bXFxkXSskLztcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSBwcm92aWRlZCBzdHJpbmcgY29udGFpbnMgb25seSBudW1iZXJzXG4gKiBJbiB0aGUgY2FzZSBvZiBgcGlkYCB2YWx1ZXMgZm9yIHBhc3NhZ2VzLCB0aGlzIGlzIHRydWVcbiAqL1xuY29uc3QgaXNOdW1lcmljID0gZCA9PiBJU19OVU1FUklDLnRlc3QoZCk7XG5cbi8qKlxuICogRm9ybWF0IGEgdXNlciBwYXNzYWdlIChzdWNoIGFzIGEgcmVzcG9uc2UpXG4gKi9cbmNvbnN0IFVTRVJfUEFTU0FHRV9UTVBMID0gKHsgaWQsIHRleHQgfSkgPT4gYFxuICA8ZGl2IGNsYXNzPVwiY2hhdC1wYXNzYWdlLXdyYXBwZXJcIiBkYXRhLXNwZWFrZXI9XCJ5b3VcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY2hhdC1wYXNzYWdlIHBoaXN0b3J5XCIgZGF0YS1zcGVha2VyPVwieW91XCIgZGF0YS11cGFzc2FnZT1cIiR7aWR9XCI+XG4gICAgICAke3RleHR9XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuYDtcblxuLyoqXG4gKiBGb3JtYXQgYSBtZXNzYWdlIGZyb20gYSBub24tdXNlclxuICovXG5jb25zdCBPVEhFUl9QQVNTQUdFX1RNUEwgPSAoeyBzcGVha2VyLCB0YWdzLCB0ZXh0IH0pID0+IGBcbiAgPGRpdiBkYXRhLXNwZWFrZXI9XCIke3NwZWFrZXJ9XCIgY2xhc3M9XCJjaGF0LXBhc3NhZ2Utd3JhcHBlciAke3RhZ3Muam9pbihcIiBcIil9XCI+XG4gICAgPGRpdiBkYXRhLXNwZWFrZXI9XCIke3NwZWFrZXJ9XCIgY2xhc3M9XCJjaGF0LXBhc3NhZ2VcIj5cbiAgICAgICR7dGV4dH1cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG5gO1xuXG4vKipcbiAqIEZvcmNlcyBhIGRlbGF5IHZpYSBwcm9taXNlcyBpbiBvcmRlciB0byBzcHJlYWQgb3V0IG1lc3NhZ2VzXG4gKi9cbmNvbnN0IGRlbGF5ID0gYXN5bmMgKHQgPSAwKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdCkpO1xuXG4vLyBGaW5kIG9uZS9tYW55IG5vZGVzIHdpdGhpbiBhIGNvbnRleHQuIFdlIFsuLi5maW5kQWxsXSB0byBlbnN1cmUgd2UncmUgY2FzdCBhcyBhbiBhcnJheVxuLy8gbm90IGFzIGEgbm9kZSBsaXN0XG5jb25zdCBmaW5kID0gKGN0eCwgcykgPT4gY3R4LnF1ZXJ5U2VsZWN0b3Iocyk7XG5jb25zdCBmaW5kQWxsID0gKGN0eCwgcykgPT4gWy4uLmN0eC5xdWVyeVNlbGVjdG9yQWxsKHMpXSB8fCBbXTtcblxuLyoqXG4gKiBTdGFuZGFyZCBUd2luZSBGb3JtYXQgU3RvcnkgT2JqZWN0XG4gKi9cbmNsYXNzIFN0b3J5IHtcbiAgdmVyc2lvbiA9IDI7IC8vIFR3aW5lIHYyXG5cbiAgZG9jdW1lbnQgPSBudWxsO1xuICBzdG9yeSA9IG51bGw7XG4gIG5hbWUgPSBcIlwiO1xuICBzdGFydHNBdCA9IDA7XG4gIGN1cnJlbnQgPSAwO1xuICBoaXN0b3J5ID0gW107XG4gIHBhc3NhZ2VzID0ge307XG4gIHNob3dQcm9tcHQgPSBmYWxzZTtcbiAgZXJyb3JNZXNzYWdlID0gXCJcXHUyNmEwICVzXCI7XG5cbiAgZGlyZWN0aXZlcyA9IHt9O1xuICBlbGVtZW50cyA9IHt9O1xuXG4gIHVzZXJTY3JpcHRzID0gW107XG4gIHVzZXJTdHlsZXMgPSBbXTtcblxuICBjb25zdHJ1Y3Rvcih3aW4sIHNyYykge1xuICAgIHRoaXMud2luZG93ID0gd2luO1xuXG4gICAgaWYgKHNyYykge1xuICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcbiAgICAgICAgXCJDaGF0Ym9vayBJbmplY3RlZCBDb250ZW50XCJcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICB9XG5cbiAgICB0aGlzLnN0b3J5ID0gZmluZCh0aGlzLmRvY3VtZW50LCBcInR3LXN0b3J5ZGF0YVwiKTtcblxuICAgIC8vIGVsZW1lbnRzXG4gICAgdGhpcy5lbGVtZW50cyA9IHtcbiAgICAgIGFjdGl2ZTogZmluZCh0aGlzLmRvY3VtZW50LCBzZWxlY3RBY3RpdmUpLFxuICAgICAgaGlzdG9yeTogZmluZCh0aGlzLmRvY3VtZW50LCBzZWxlY3RIaXN0b3J5KVxuICAgIH07XG5cbiAgICAvLyBwcm9wZXJ0aWVzIG9mIHN0b3J5IG5vZGVcbiAgICB0aGlzLm5hbWUgPSB0aGlzLnN0b3J5LmdldEF0dHJpYnV0ZShcIm5hbWVcIikgfHwgXCJcIjtcbiAgICB0aGlzLnN0YXJ0c0F0ID0gdGhpcy5zdG9yeS5nZXRBdHRyaWJ1dGUoXCJzdGFydG5vZGVcIikgfHwgMDtcblxuICAgIGZpbmRBbGwodGhpcy5zdG9yeSwgc2VsZWN0UGFzc2FnZXMpLmZvckVhY2gocCA9PiB7XG4gICAgICBjb25zdCBpZCA9IHBhcnNlSW50KHAuZ2V0QXR0cmlidXRlKFwicGlkXCIpKTtcbiAgICAgIGNvbnN0IG5hbWUgPSBwLmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG4gICAgICBjb25zdCB0YWdzID0gKHAuZ2V0QXR0cmlidXRlKFwidGFnc1wiKSB8fCBcIlwiKS5zcGxpdCgvXFxzKy9nKTtcbiAgICAgIGNvbnN0IHBhc3NhZ2UgPSBwLmlubmVySFRNTCB8fCBcIlwiO1xuXG4gICAgICB0aGlzLnBhc3NhZ2VzW2lkXSA9IG5ldyBQYXNzYWdlKGlkLCBuYW1lLCB0YWdzLCBwYXNzYWdlLCB0aGlzKTtcbiAgICB9KTtcblxuICAgIGZpbmQodGhpcy5kb2N1bWVudCwgXCJ0aXRsZVwiKS5pbm5lckhUTUwgPSB0aGlzLm5hbWU7XG4gICAgZmluZCh0aGlzLmRvY3VtZW50LCBcIiNwdGl0bGVcIikuaW5uZXJIVE1MID0gdGhpcy5uYW1lO1xuXG4gICAgdGhpcy51c2VyU2NyaXB0cyA9IChmaW5kQWxsKHRoaXMuZG9jdW1lbnQsIHNlbGVjdEpzKSB8fCBbXSkubWFwKFxuICAgICAgZWwgPT4gZWwuaW5uZXJIVE1MXG4gICAgKTtcbiAgICB0aGlzLnVzZXJTdHlsZXMgPSAoZmluZEFsbCh0aGlzLmRvY3VtZW50LCBzZWxlY3RDc3MpIHx8IFtdKS5tYXAoXG4gICAgICBlbCA9PiBlbC5pbm5lckhUTUxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgc3RvcnkgYnkgc2V0dGluZyB1cCBsaXN0ZW5lcnMgYW5kIHRoZW4gYWR2YW5jaW5nXG4gICAqIHRvIHRoZSBmaXJzdCBpdGVtIGluIHRoZSBzdGFja1xuICAgKi9cbiAgc3RhcnQgPSAoKSA9PiB7XG4gICAgLy8gYWN0aXZhdGUgdXNlcnNjcmlwdHMgYW5kIHN0eWxlc1xuICAgIHRoaXMudXNlclN0eWxlcy5mb3JFYWNoKHMgPT4ge1xuICAgICAgY29uc3QgdCA9IHRoaXMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgICAgdC5pbm5lckhUTUwgPSBzO1xuICAgICAgdGhpcy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHQpO1xuICAgIH0pO1xuICAgIHRoaXMudXNlclNjcmlwdHMuZm9yRWFjaChzID0+IHtcbiAgICAgIC8vIGV2YWwgaXMgZXZpbCwgYnV0IHRoaXMgaXMgc2ltcGx5IGhvdyBUd2luZSB3b3Jrc1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgZ2xvYmFsRXZhbChzKTtcbiAgICB9KTtcblxuICAgIC8vIHdoZW4geW91IGNsaWNrIG9uIGFbZGF0YS1wYXNzYWdlXSAocmVzcG9uc2UgbGluaykuLi5cbiAgICB0aGlzLmRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xuICAgICAgaWYgKCFlLnRhcmdldC5tYXRjaGVzKHNlbGVjdEFjdGl2ZUxpbmspKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5hZHZhbmNlKFxuICAgICAgICB0aGlzLmZpbmRQYXNzYWdlKGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtcGFzc2FnZVwiKSksXG4gICAgICAgIGUudGFyZ2V0LmlubmVySFRNTFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIC8vIHdoZW4geW91IGNsaWNrIG9uIGJ1dHRvbltkYXRhLXBhc3NhZ2VdIChyZXNwb25zZSBpbnB1dCkuLi5cbiAgICB0aGlzLmRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xuICAgICAgaWYgKCFlLnRhcmdldC5tYXRjaGVzKHNlbGVjdEFjdGl2ZUJ1dHRvbikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBjYXB0dXJlIGFuZCBkaXNhYmxlIHNob3dQcm9tcHQgZmVhdHVyZVxuICAgICAgY29uc3QgdmFsdWUgPSBmaW5kKHRoaXMuZG9jdW1lbnQsIHNlbGVjdEFjdGl2ZUlucHV0KS52YWx1ZTtcbiAgICAgIHRoaXMuc2hvd1Byb21wdCA9IGZhbHNlO1xuXG4gICAgICB0aGlzLmFkdmFuY2UoXG4gICAgICAgIHRoaXMuZmluZFBhc3NhZ2UoZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1wYXNzYWdlXCIpKSxcbiAgICAgICAgdmFsdWVcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkdmFuY2UodGhpcy5maW5kUGFzc2FnZSh0aGlzLnN0YXJ0c0F0KSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEZpbmQgYSBwYXNzYWdlIGJhc2VkIG9uIGl0cyBpZCBvciBuYW1lXG4gICAqL1xuICBmaW5kUGFzc2FnZSA9IGlkT3JOYW1lID0+IHtcbiAgICBpZiAoaXNOdW1lcmljKGlkT3JOYW1lKSkge1xuICAgICAgcmV0dXJuIHRoaXMucGFzc2FnZXNbaWRPck5hbWVdO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBoYW5kbGUgcGFzc2FnZXMgd2l0aCAnIGFuZCBcIiAoY2FuJ3QgdXNlIGEgY3NzIHNlbGVjdG9yIGNvbnNpc3RlbnRseSlcbiAgICAgIGNvbnN0IHAgPSBmaW5kQWxsKHRoaXMuc3RvcnksIFwidHctcGFzc2FnZWRhdGFcIikuZmlsdGVyKFxuICAgICAgICBwID0+IHAuZ2V0QXR0cmlidXRlKFwibmFtZVwiKSA9PT0gaWRPck5hbWVcbiAgICAgIClbMF07XG4gICAgICBpZiAoIXApIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIHRoaXMucGFzc2FnZXNbcC5nZXRBdHRyaWJ1dGUoXCJwaWRcIildO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQWR2YW5jZSB0aGUgc3RvcnkgdG8gdGhlIHBhc3NhZ2Ugc3BlY2lmaWVkLCBvcHRpb25hbGx5IGFkZGluZyB1c2VyVGV4dFxuICAgKi9cbiAgYWR2YW5jZSA9IGFzeW5jIChwYXNzYWdlLCB1c2VyVGV4dCA9IG51bGwpID0+IHtcbiAgICB0aGlzLmhpc3RvcnkucHVzaChwYXNzYWdlLmlkKTtcbiAgICBjb25zdCBsYXN0ID0gdGhpcy5jdXJyZW50O1xuXG4gICAgLy8gLmFjdGl2ZSBpcyBjYXB0dXJlZCAmIGNsZWFyZWRcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuZWxlbWVudHMuYWN0aXZlLmlubmVySFRNTDtcbiAgICB0aGlzLmVsZW1lbnRzLmFjdGl2ZS5pbm5lckhUTUwgPSBcIlwiO1xuXG4gICAgLy8gd2hhdGV2ZXIgd2FzIGluIGFjdGl2ZSBpcyBtb3ZlZCB1cCBpbnRvIGhpc3RvcnlcbiAgICB0aGlzLmVsZW1lbnRzLmhpc3RvcnkuaW5uZXJIVE1MICs9IGV4aXN0aW5nO1xuXG4gICAgLy8gaWYgdGhlcmUgaXMgdXNlclRleHQsIGl0IGlzIGFkZGVkIHRvIC5oaXN0b3J5XG4gICAgaWYgKHVzZXJUZXh0KSB7XG4gICAgICB0aGlzLnJlbmRlclVzZXJNZXNzYWdlKFxuICAgICAgICBsYXN0LFxuICAgICAgICB1c2VyVGV4dCxcbiAgICAgICAgcyA9PiAodGhpcy5lbGVtZW50cy5oaXN0b3J5LmlubmVySFRNTCArPSBzKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBUaGUgbmV3IHBhc3NhZ2UgaXMgcmVuZGVyZWQgYW5kIHBsYWNlZCBpbiAuYWN0aXZlXG4gICAgLy8gYWZ0ZXIgYWxsIHJlbmRlcnMsIHVzZXIgb3B0aW9ucyBhcmUgZGlzcGxheWVkXG4gICAgYXdhaXQgdGhpcy5yZW5kZXJQYXNzYWdlKFxuICAgICAgcGFzc2FnZSxcbiAgICAgIHMgPT4gKHRoaXMuZWxlbWVudHMuYWN0aXZlLmlubmVySFRNTCArPSBzKVxuICAgICk7XG4gICAgaWYgKHBhc3NhZ2UuaGFzVGFnKFwiYXV0b1wiKSkge1xuICAgICAgLy8gYXV0byBhZHZhbmNlIGlmIHRoZSBhdXRvIHRhZyBpcyBzZXQsIHNraXBwaW5nIGFueXRoaW5nIHRoYXRcbiAgICAgIC8vIGNvdWxkIHBhdXNlIG91ciBvcGVyYXRpb25cbiAgICAgIHRoaXMuYWR2YW5jZSh0aGlzLmZpbmRQYXNzYWdlKHBhc3NhZ2UubGlua3NbMF0udGFyZ2V0KSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gaWYgcHJvbXB0IGlzIHNldCBmcm9tIHRoZSBjdXJyZW50IG5vZGUsIGVuYWJsZSBmcmVldGV4dFxuICAgIGlmICh0aGlzLnNob3dQcm9tcHQpIHtcbiAgICAgIHRoaXMucmVuZGVyVGV4dElucHV0KHBhc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbmRlckNob2ljZXMocGFzc2FnZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW5kZXIgdGV4dCBhcyBpZiBpdCBjYW1lIGZyb20gdGhlIHVzZXJcbiAgICovXG4gIHJlbmRlclVzZXJNZXNzYWdlID0gYXN5bmMgKHBpZCwgdGV4dCwgcmVuZGVyZXIpID0+IHtcbiAgICBhd2FpdCByZW5kZXJlcihcbiAgICAgIFVTRVJfUEFTU0FHRV9UTVBMKHtcbiAgICAgICAgcGlkLFxuICAgICAgICB0ZXh0XG4gICAgICB9KVxuICAgICk7XG4gICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVuZGVyIGEgVHdpbmUrQ2hhdGJvb2sgcGFzc2FnZSBvYmplY3RcbiAgICovXG4gIHJlbmRlclBhc3NhZ2UgPSBhc3luYyAocGFzc2FnZSwgcmVuZGVyZXIpID0+IHtcbiAgICBjb25zdCBzcGVha2VyID0gcGFzc2FnZS5nZXRTcGVha2VyKCk7XG4gICAgbGV0IHN0YXRlbWVudHMgPSBwYXNzYWdlLnJlbmRlcigpO1xuICAgIGxldCBuZXh0ID0gc3RhdGVtZW50cy5zaGlmdCgpO1xuICAgIHRoaXMuc2hvd1R5cGluZygpO1xuICAgIHdoaWxlIChuZXh0KSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gT1RIRVJfUEFTU0FHRV9UTVBMKHtcbiAgICAgICAgc3BlYWtlcixcbiAgICAgICAgdGFnczogcGFzc2FnZS50YWdzLFxuICAgICAgICB0ZXh0OiBuZXh0XG4gICAgICB9KTtcbiAgICAgIGF3YWl0IGRlbGF5KHRoaXMuY2FsY3VsYXRlRGVsYXkobmV4dCkpOyAvLyB0b2RvXG4gICAgICBhd2FpdCByZW5kZXJlcihjb250ZW50KTtcbiAgICAgIG5leHQgPSBzdGF0ZW1lbnRzLnNoaWZ0KCk7XG4gICAgfVxuICAgIHRoaXMuaGlkZVR5cGluZygpO1xuICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfTtcblxuICAvKipcbiAgICogQSByb3VnaCBmdW5jdGlvbiBmb3IgZGV0ZXJtaW5pbmcgYSB3YWl0aW5nIHBlcmlvZCBiYXNlZCBvbiBzdHJpbmcgbGVuZ3RoXG4gICAqL1xuICBjYWxjdWxhdGVEZWxheSA9IHR4dCA9PiB7XG4gICAgY29uc3QgdHlwaW5nRGVsYXlSYXRpbyA9IDAuMztcbiAgICBjb25zdCByYXRlID0gMjA7IC8vIG1zXG4gICAgcmV0dXJuIHR4dC5sZW5ndGggKiByYXRlICogdHlwaW5nRGVsYXlSYXRpbztcbiAgfTtcblxuICAvKipcbiAgICogU2hvd3MgdGhlIHR5cGluZyBpbmRpY2F0b3JcbiAgICovXG4gIHNob3dUeXBpbmcgPSAoKSA9PiB7XG4gICAgZmluZCh0aGlzLmRvY3VtZW50LCB0eXBpbmdJbmRpY2F0b3IpLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcbiAgfTtcblxuICAvKipcbiAgICogSGlkZXMgdGhlIHR5cGluZyBpbmRpY2F0b3JcbiAgICovXG4gIGhpZGVUeXBpbmcgPSAoKSA9PiB7XG4gICAgZmluZCh0aGlzLmRvY3VtZW50LCB0eXBpbmdJbmRpY2F0b3IpLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTY3JvbGxzIHRoZSBkb2N1bWVudCBhcyBmYXIgYXMgcG9zc2libGUgKGJhc2VkIG9uIGhpc3RvcnkgY29udGFpbmVyJ3MgaGVpZ2h0KVxuICAgKi9cbiAgc2Nyb2xsVG9Cb3R0b20gPSAoKSA9PiB7XG4gICAgY29uc3QgaGlzdCA9IGZpbmQodGhpcy5kb2N1bWVudCwgXCIjcGhpc3RvcnlcIik7XG4gICAgZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudC5zY3JvbGxUb3AgPSBoaXN0Lm9mZnNldEhlaWdodDtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSBjaG9pY2VzIHBhbmVsXG4gICAqL1xuICByZW1vdmVDaG9pY2VzID0gKCkgPT4ge1xuICAgIGNvbnN0IHBhbmVsID0gZmluZCh0aGlzLmRvY3VtZW50LCBzZWxlY3RSZXNwb25zZXMpO1xuICAgIHBhbmVsLmlubmVySFRNTCA9IFwiXCI7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGNob2ljZXMgcGFuZWwgd2l0aCBhIHNldCBvZiBvcHRpb25zIGJhc2VkIG9uIHBhc3NhZ2UgbGlua3NcbiAgICovXG4gIHJlbmRlckNob2ljZXMgPSBwYXNzYWdlID0+IHtcbiAgICB0aGlzLnJlbW92ZUNob2ljZXMoKTtcbiAgICBjb25zdCBwYW5lbCA9IGZpbmQodGhpcy5kb2N1bWVudCwgc2VsZWN0UmVzcG9uc2VzKTtcbiAgICBwYXNzYWdlLmxpbmtzLmZvckVhY2gobCA9PiB7XG4gICAgICBwYW5lbC5pbm5lckhUTUwgKz0gYDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIiBjbGFzcz1cInVzZXItcmVzcG9uc2VcIiBkYXRhLXBhc3NhZ2U9XCIke2VzY2FwZShcbiAgICAgICAgbC50YXJnZXRcbiAgICAgICl9XCI+JHtsLmRpc3BsYXl9PC9hPmA7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgYSBmcmVlLXRleHQgaW5wdXQgYmFzZWQgb24gc2hvd1Byb21wdCBzZXR0aW5nc1xuICAgKi9cbiAgcmVuZGVyVGV4dElucHV0ID0gcGFzc2FnZSA9PiB7XG4gICAgdGhpcy5yZW1vdmVDaG9pY2VzKCk7XG4gICAgY29uc3QgcGFuZWwgPSBmaW5kKHRoaXMuZG9jdW1lbnQsIHNlbGVjdFJlc3BvbnNlcyk7XG4gICAgcGFuZWwuaW5uZXJIVE1MID0gYDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwidXNlci1pbnB1dFwiIHBsYWNlaG9sZGVyPVwiJHtcbiAgICAgIHRoaXMuc2hvd1Byb21wdC5wbGFjZWhvbGRlclxuICAgIH1cIiAvPjxidXR0b24gZGF0YS1wYXNzYWdlPVwiJHtlc2NhcGUoXG4gICAgICBwYXNzYWdlLmxpbmtzWzBdLnRhcmdldFxuICAgICl9XCI+Jmd0OzwvYnV0dG9uPmA7XG4gIH07XG5cbiAgLyoqXG4gICAqIEVuYWJsZXMgdGhlIHRleHQtaW5wdXQgaW5zdGVhZCBvZiBzdGFuZGFyZCBjaG9pY2VzXG4gICAqL1xuICBwcm9tcHQgPSAoc2F2ZUFzLCBwbGFjZWhvbGRlcikgPT4gKHRoaXMuc2hvd1Byb21wdCA9IHsgc2F2ZUFzLCBwbGFjZWhvbGRlciB9KTtcblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgY3VzdG9tIGRpcmVjdGl2ZSBmb3IgdGhpcyBzdG9yeVxuICAgKiBTaWduYXR1cmUgb2YgKGRpcmVjdGl2ZUNvbnRlbnQsIG91dHB1dFRleHQsIHN0b3J5LCBwYXNzYWdlLCBuZXh0KVxuICAgKi9cbiAgZGlyZWN0aXZlID0gKGlkLCBjYikgPT4ge1xuICAgIGlmICghdGhpcy5kaXJlY3RpdmVzW2lkXSkge1xuICAgICAgdGhpcy5kaXJlY3RpdmVzW2lkXSA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmRpcmVjdGl2ZXNbaWRdLnB1c2goY2IpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBTdG9yeTtcbiIsImltcG9ydCBTdG9yeSBmcm9tIFwiLi9TdG9yeVwiO1xuXG4od2luID0+IHtcbiAgaWYgKHR5cGVvZiB3aW4gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB3aW4uZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHdpbmRvdy5nbG9iYWxFdmFsID0gZXZhbDtcbiAgICAgIHdpbmRvdy5zdG9yeSA9IG5ldyBTdG9yeSh3aW4pO1xuICAgICAgd2luZG93LnN0b3J5LnN0YXJ0KCk7XG4gICAgfSk7XG4gIH1cbn0pKHdpbmRvdyB8fCB1bmRlZmluZWQpO1xuIl0sIm5hbWVzIjpbImdsb2JhbCIsIlRPS0VOX0VTQ0FQRURfT0NUTyIsIkJMT0NLX0RJUkVDVElWRSIsIklOTElORV9ESVJFQ1RJVkUiLCJleHRyYWN0RGlyZWN0aXZlcyIsInMiLCJkaXJlY3RpdmVzIiwicmVwbGFjZSIsIm1hdGNoIiwiZGlyIiwiY29udGVudCIsInB1c2giLCJuYW1lIiwidHJpbSIsIklTX0VYVEVSTkFMX1VSTCIsIkxJTktfUEFUVEVSTiIsImV4dHJhY3RMaW5rcyIsInN0ciIsImxpbmtzIiwidXBkYXRlZCIsInQiLCJkaXNwbGF5IiwidGFyZ2V0IiwiYmFySW5kZXgiLCJpbmRleE9mIiwicmlnaHRBcnJJbmRleCIsImxlZnRBcnJJbmRleCIsInN1YnN0ciIsInRlc3QiLCJvcmlnaW5hbCIsIkJMT0NLX0NPTU1FTlQiLCJJTkxJTkVfQ09NTUVOVCIsInN0cmlwQ29tbWVudHMiLCJmaW5kU3RvcnkiLCJ3aW4iLCJzdG9yeSIsInN0YXRlIiwicmVuZGVyUGFzc2FnZSIsInBhc3NhZ2UiLCJzb3VyY2UiLCJyZXN1bHQiLCJsaW5rRGF0YSIsImZvckVhY2giLCJkIiwicnVuIiwiaGFzVGFnIiwicHJvbXB0cyIsInByZWZpeFRhZyIsImxlbmd0aCIsInByb21wdCIsInNwbGl0IiwiUGFzc2FnZSIsImNvbnN0cnVjdG9yIiwiaWQiLCJ0YWdzIiwic3BlYWtlclRhZyIsImZpbmQiLCJzeXN0ZW1UYWciLCJwZngiLCJhc0RpY3QiLCJmaWx0ZXIiLCJtYXAiLCJyZWR1Y2UiLCJhIiwidGFnRGljdCIsInVuZXNjYXBlIiwid2luZG93IiwiSU5GSU5JVFkiLCJzeW1ib2xUYWciLCJmcmVlR2xvYmFsIiwiZnJlZVNlbGYiLCJyb290IiwiYmFzZVByb3BlcnR5T2YiLCJvYmplY3RQcm90byIsIm9iamVjdFRvU3RyaW5nIiwiU3ltYm9sIiwic3ltYm9sUHJvdG8iLCJzeW1ib2xUb1N0cmluZyIsImJhc2VUb1N0cmluZyIsImlzU3ltYm9sIiwiaXNPYmplY3RMaWtlIiwidG9TdHJpbmciLCJzZWxlY3RQYXNzYWdlcyIsInNlbGVjdENzcyIsInNlbGVjdEpzIiwic2VsZWN0QWN0aXZlTGluayIsInNlbGVjdEFjdGl2ZUJ1dHRvbiIsInNlbGVjdEFjdGl2ZUlucHV0Iiwic2VsZWN0QWN0aXZlIiwic2VsZWN0SGlzdG9yeSIsInNlbGVjdFJlc3BvbnNlcyIsInR5cGluZ0luZGljYXRvciIsIklTX05VTUVSSUMiLCJpc051bWVyaWMiLCJVU0VSX1BBU1NBR0VfVE1QTCIsInRleHQiLCJPVEhFUl9QQVNTQUdFX1RNUEwiLCJzcGVha2VyIiwiam9pbiIsImRlbGF5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiY3R4IiwicXVlcnlTZWxlY3RvciIsImZpbmRBbGwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiU3RvcnkiLCJzcmMiLCJ1c2VyU3R5bGVzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiYm9keSIsImFwcGVuZENoaWxkIiwidXNlclNjcmlwdHMiLCJnbG9iYWxFdmFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJtYXRjaGVzIiwiYWR2YW5jZSIsImZpbmRQYXNzYWdlIiwiZ2V0QXR0cmlidXRlIiwidmFsdWUiLCJzaG93UHJvbXB0Iiwic3RhcnRzQXQiLCJpZE9yTmFtZSIsInBhc3NhZ2VzIiwicCIsInVzZXJUZXh0IiwiaGlzdG9yeSIsImxhc3QiLCJjdXJyZW50IiwiZXhpc3RpbmciLCJlbGVtZW50cyIsImFjdGl2ZSIsInJlbmRlclVzZXJNZXNzYWdlIiwicmVuZGVyVGV4dElucHV0IiwicmVuZGVyQ2hvaWNlcyIsInBpZCIsInJlbmRlcmVyIiwic2Nyb2xsVG9Cb3R0b20iLCJnZXRTcGVha2VyIiwic3RhdGVtZW50cyIsInJlbmRlciIsIm5leHQiLCJzaGlmdCIsInNob3dUeXBpbmciLCJjYWxjdWxhdGVEZWxheSIsImhpZGVUeXBpbmciLCJ0eHQiLCJ0eXBpbmdEZWxheVJhdGlvIiwicmF0ZSIsInN0eWxlIiwidmlzaWJpbGl0eSIsImhpc3QiLCJzY3JvbGxpbmdFbGVtZW50Iiwic2Nyb2xsVG9wIiwib2Zmc2V0SGVpZ2h0IiwicGFuZWwiLCJyZW1vdmVDaG9pY2VzIiwibCIsImVzY2FwZSIsInBsYWNlaG9sZGVyIiwic2F2ZUFzIiwiY2IiLCJpbXBsZW1lbnRhdGlvbiIsImNyZWF0ZUhUTUxEb2N1bWVudCIsInBhcnNlSW50IiwiZWwiLCJldmVudCIsImV2YWwiLCJz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
    </script>
  </body>
</html>
