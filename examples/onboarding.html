<!DOCTYPE html>
<html>
  <head>
    <title>
      onboarding
    </title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="icon" href="favicon.ico" />

    <!-- Bootstrap core CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
      integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
      crossorigin="anonymous"
    />

    <style>/* Variables */

:root {
  --navbar-height: 56px;
  --user-response-panel-height: 110px;
  --bg-color: #c7bdb5; /*global chat bg color*/
  --user-color: #417505; /*user name & placeholder avatar bg*/
  --speaker-color: #888; /*default color for speaker name & placeholder avatar bg*/
  --sidebar-bg-color: #fff;
  --navbar-bg-color: #fff;
  --passage-bg-color: #fff;
  --passage-text-color: #000;
}

/* Atomic Utilities */

.bg-color {
  background-color: var(--bg-color);
}

.minh-full {
  min-height: calc(
    100vh - var(--navbar-height) - var(--user-response-panel-height) - 17px -
      5px
  );
}

.ml--3 {
  margin-left: -1rem !important;
}

@media (min-width: 992px) {
  .w-lg-auto {
    width: auto !important;
  }
}

/* General */

html,
body {
  overflow-x: hidden; /* Prevent scroll on narrow devices */
  position: relative;
  min-height: 100%;
}

body {
  padding-top: var(--navbar-height);
  margin-bottom: calc(
    var(--user-response-panel-height) + 18px + 5px
  ); /* + height of hint + hr */
}

/* Offcanvas sidebar */

@media (max-width: 991.98px) {
  .offcanvas-collapse {
    z-index: 1100;
    position: fixed;
    top: var(--navbar-height); /* Height of navbar */
    bottom: 0;
    left: 100%;
    width: 100%;
    padding-right: 1rem;
    padding-left: 1rem;
    overflow-y: auto;
    visibility: hidden;
    background-color: var(--sidebar-bg-color);
    transition-timing-function: ease-in-out;
    transition-duration: 0.3s;
    transition-property: left, visibility;
  }
  .offcanvas-collapse.open {
    left: 0;
    visibility: visible;
  }
}

/* Nav */

nav.navbar {
  height: var(--navbar-height);
  background-color: var(--navbar-bg-color);
  padding: 0.5rem 15px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

nav .nav-title {
  font-size: 1.5rem;
  line-height: 40px;
  margin: 0 auto;
}

nav .nav-icon {
  width: 35px;
}

/* Chat Panel */

.chat-panel {
  padding-top: 15px;
}

.chat-passage-wrapper {
  position: relative;
  margin: 0.5rem 0;
}

.chat-passage-wrapper[data-speaker="you"] {
  text-align: right;
}
.chat-passage-wrapper[data-speaker="you"] .chat-passage:before {
  text-align: right;
  color: var(--user-color);
}

.chat-passage {
  display: inline-block;
  padding: 0.25rem 0.5rem;
  margin-left: 35px;
  background-color: var(--passage-bg-color);
  max-width: calc(100% - 80px);
  text-align: left;
}
@media (min-width: 576px) {
  .chat-passage {
    max-width: calc(100% - 100px);
  }
}
@media (min-width: 768px) {
  .chat-passage {
    max-width: calc(100% - 80px);
  }
}
@media (min-width: 992px) {
  .chat-passage {
    max-width: calc(100% - 100px);
  }
}

.chat-passage:before {
  content: attr(data-speaker);
  display: block;
  font-size: 0.75rem;
  text-transform: capitalize;
  color: var(--speaker-color);
}

.chat-passage p {
  margin: 0;
}

.chat-passage img {
  max-width: 100%;
  max-height: calc(100vh - 2 * var(--user-response-panel-height));
  padding: 0.25rem 0;
}
.chat-passage iframe {
  max-width: 100%;
  max-height: calc(100vh - 2 * var(--user-response-panel-height));
}

.chat-passage figure {
  margin-bottom: 0.25rem;
  font-size: 0.75rem;
}

/* User Response Panel */

.user-response-panel {
  padding-right: 15px;
  padding-left: 15px;
}
@media (min-width: 992px) {
  .user-response-panel {
    max-width: calc(
      100% / (12 / 6)
    ); /* 100% / (12/[col width of chat-panel]) */
    margin: 0 auto;
  }
}

.user-response-panel hr {
  margin: 0;
  border-top: 5px solid white;
}

.user-response-hint {
  font-style: italic;
  font-size: 0.75rem;
  text-align: center;
  height: 18px;
}
@media (max-width: 379.98px) {
  .user-response-hint {
    font-size: 0.6rem;
    height: 14px;
  }
  body {
    margin-bottom: calc(
      var(--user-response-panel-height) + 14px + 5px
    ); /* + height of hint + hr */
  }
  .minh-full {
    min-height: calc(
      100vh - var(--navbar-height) - var(--user-response-panel-height) - 14px -
        5px
    );
  }
}
@media (max-width: 319.98px) {
  .user-response-hint {
    font-size: 0.5rem;
    height: 12px;
  }
  body {
    margin-bottom: calc(
      var(--user-response-panel-height) + 12px + 5px
    ); /* + height of hint + hr */
  }
  .minh-full {
    min-height: calc(
      100vh - var(--navbar-height) - var(--user-response-panel-height) - 12px -
        5px
    );
  }
}

.user-reponse-wrapper {
  height: var(--user-response-panel-height);
  display: flex;
  align-items: center;
  justify-content: center;
}

.user-response-panel .user-response {
  display: inline-block;
  padding: 0.5rem;
  margin: 0.25rem;
  background-color: var(--passage-bg-color);
  color: var(--passage-text-color);
  border-top: 2px solid transparent;
  transition: border-color 0.15s ease-in;
}
.user-response-panel .user-response:hover {
  text-decoration: none;
  border-color: var(--user-color);
}

/* Passage Avatars */

.chat-passage-wrapper:before {
  margin-right: 5px;
  position: absolute;
  vertical-align: top;
  content: "";
  width: 30px;
  height: 30px;
  background-size: 30px 30px;
  border-radius: 15px;
  background-color: var(--speaker-color);
}
.chat-passage-wrapper[data-speaker="you"]:before {
  display: none;
}
.chat-passage-wrapper[data-speaker="you"]:after {
  margin-left: -30px;
  position: absolute;
  vertical-align: top;
  content: "";
  width: 30px;
  height: 30px;
  background-size: 30px 30px;
  border-radius: 15px;
  background-color: var(--user-color);
}
.chat-passage[data-speaker="you"] {
  margin-left: 0;
  margin-right: 35px;
}

/* Typing Animation */

div.wave {
  position: relative;
  text-align: center;
  margin-left: auto;
  margin-right: auto;
}
div.wave .dot {
  display: inline-block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  margin-right: 2px;
  background: var(--passage-text-color);
  animation: wave 1.2s ease-in-out infinite;
}
div.wave .dot:nth-child(2) {
  animation-delay: 0.1s;
}

div.wave .dot:nth-child(3) {
  animation-delay: 0.2s;
}

@keyframes wave {
  0%,
  50%,
  100% {
    transform: initial;
  }

  25% {
    transform: translateY(-15px);
  }
}

/* Directives */
.directives {
  display: none;
  font-family: Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console",
    "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono",
    "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier,
    monospace;
  font-size: 12px;
}

.directive {
  white-space: pre;
  border: 1px dashed #666;
  position: relative;
}

.directive::after {
  content: attr(name);
  position: absolute;
  right: 2px;
  top: 2px;
  font-weight: bold;
  font-size: 14px;
  letter-spacing: 0.2em;
}

body.show-directives .directives {
  display: block;
}

/* 
 * counter extra padding-right added by BS4 modal
 * https://stackoverflow.com/questions/32862394/bootstrap-modals-keep-adding-padding-right-to-body-after-closed
 */
body.modal-open {
  padding-right: 0 !important;
}
body.modal-open .user-response-panel {
  padding-right: 15px !important;
}
body.modal-open nav.navbar {
  padding-right: 15px !important;
}
</style>
  </head>
  <body class="bg-white">
    <nav class="navbar navbar-expand-lg fixed-top">
      <h1 id="ptitle" class="nav-title">onboarding</h1>
      <label
        ><input
          type="checkbox"
          name="show_directives"
          id="show_directives"
        />show directives</label
      >
    </nav>

    <main role="main" class="container-fluid">
      <div class="row">
        <div class="left-sidebar col-lg d-none d-lg-block">
          <div
            id="left-sidebar-container"
            class="content-container position-fixed mt-3 mt-lg-5 m-lg-4"
          ></div>
        </div>
        <div class="chat-panel col-lg-6 minh-full bg-color">
          <div id="phistory" class="history chat-history"></div>
          <div id="passage" class="active"></div>
          <div id="animation-container">
            <div class="chat-passage-wrapper">
              <div class="chat-passage">
                <div class="wave">
                  <span class="dot"></span>
                  <span class="dot"></span>
                  <span class="dot"></span>
                </div>
              </div>
            </div>
          </div>
          <div class="user-response-panel fixed-bottom bg-color">
            <hr />
            <div
              id="user-response-hint"
              class="user-response-hint content-container"
            ></div>
            <div id="user-response-panel" class="user-reponse-wrapper"></div>
          </div>
        </div>
        <div class="right-sidebar col-lg offcanvas-collapse">
          <div class="position-fixed ml--3 w-100 w-lg-auto h-100">
            <div
              id="right-sidebar-container"
              class="content-container m-3 m-sm-5 m-lg-3 mt-lg-5 m-xl-5 mt-xl-5"
            ></div>
          </div>
        </div>
      </div>
    </main>
    <!-- UUID://DEC7B08C-8D6C-416E-A86D-180A53DBF339// --><tw-storydata name="onboarding" startnode="10" creator="Tweego" creator-version="2.0.0+089d4ca77e5b" ifid="DEC7B08C-8D6C-416E-A86D-180A53DBF339" zoom="1" format="TEST_ChatbookViewer" format-version="0.2.1" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css"></style><script role="script" id="twine-user-script" type="text/twine-javascript"></script><tw-tag name="prologue" color="blue"></tw-tag><tw-tag name="prompt-firstName" color="yellow"></tw-tag><tw-tag name="speaker-bot" color="orange"></tw-tag><tw-tag name="speaker-system" color="purple"></tw-tag><tw-tag name="system" color="purple"></tw-tag><tw-tag name="auto" color="green"></tw-tag><tw-tag name="metadata" color="blue"></tw-tag><tw-passagedata pid="1" name="Name Not OK" tags="speaker-bot" position="475,125" size="100,100">Okay, what name would you like me to use?

[[Enter Name]]</tw-passagedata><tw-passagedata pid="2" name="Confirm Email" tags="speaker-bot multiline" position="475,275" size="100,100">Ok. And the email {{which origin &quot;google-oauth2.+&quot; &quot;Google&quot; &quot;linkedin.+&quot; &quot;LinkedIn&quot; &quot;.*&quot; &quot;your email provider&quot;}} gave me is {{email}}.

You can always update that later.

One last thing

How should I refer to you?

[[&quot;He&quot; pronouns (he/him)]]
[[&quot;She&quot; pronouns (she/her)]]
[[&quot;They&quot; pronouns (they/them)]]
[[&quot;Ze&quot; pronouns (ze/zir)]]
[[I&#39;d like to be specific]]
[[Just use my name]]</tw-passagedata><tw-passagedata pid="3" name="&quot;He&quot; pronouns (he/him)" tags="system" position="300,425" size="100,100">#@yaml set: aboutPronoun him
#@yaml set: conjugatedPronoun he
#@yaml set: posessivePronoun his

[[Save]]</tw-passagedata><tw-passagedata pid="4" name="&quot;She&quot; pronouns (she/her)" tags="system" position="425,425" size="100,100">#@yaml set: aboutPronoun her
#@yaml set: conjugatedPronoun she
#@yaml set: posessivePronoun her

[[Save]]</tw-passagedata><tw-passagedata pid="5" name="&quot;They&quot; pronouns (they/them)" tags="system" position="550,425" size="100,100">#@yaml set: aboutPronoun them
#@yaml set: conjugatedPronoun they
#@yaml set: posessivePronoun their

[[Save]]</tw-passagedata><tw-passagedata pid="6" name="&quot;Ze&quot; pronouns (ze/zir)" tags="system" position="675,425" size="100,100">#@yaml set: aboutPronoun zir
#@yaml set: conjugatedPronoun ze
#@yaml set: posessivePronoun zir

[[Save]]</tw-passagedata><tw-passagedata pid="7" name="I&#39;d like to be specific" tags="speaker-bot" position="800,425" size="100,100">Okay. You can do that in your profile once we&#39;re done here.

[[Save]]</tw-passagedata><tw-passagedata pid="8" name="Just use my name" tags="speaker-bot" position="925,425" size="100,100">#@yaml set: aboutPronoun {{firstName}}
#@yaml set: conjugatedPronoun {{firstName}}
#@yaml set: posessivePronoun {{firstName}}

No problem

[[Save]]</tw-passagedata><tw-passagedata pid="9" name="Save" tags="speaker-bot" position="600,725" size="100,100">That&#39;s everything, let me save it for you.

[[Save Action]]</tw-passagedata><tw-passagedata pid="10" name="start" tags="speaker-bot multiline" position="300,125" size="100,100">###@yaml
graphql:
  id: currentAuthorization
  query: |
    query currentAuthorization {
      currentUser {
        id,
        firstName,
        authorizations (orderBy: PRIMARY_KEY_ASC) {
          nodes {
            providerId,
            providerEmails
          }
        }
      }
    }
  store:
    - &quot;currentUser.id&quot;: userId
    - &quot;currentUser.firstName&quot;: firstName
    - &quot;currentUser.authorizations.nodes[0].providerEmails[0]&quot;: email
    - &quot;currentUser.authorizations.nodes[0].providerId&quot;: origin
###

Hey there!

I&#39;m Karl (he/him). The AI ibex of Aibex.

I asked {{which origin &quot;google-oauth2.+&quot; &quot;Google&quot; &quot;linkedin.+&quot; &quot;LinkedIn&quot; &quot;.*&quot; &quot;your email provider&quot;}} what your name was, and they said &quot;{{default firstName &quot;to just use your email address&quot;}}&quot;. Is that right?

[[Yes-&gt;Confirm Email]]
[[No-&gt;Name Not OK]]</tw-passagedata><tw-passagedata pid="11" name="Next Steps" tags="speaker-bot" position="750,875" size="100,100">Next up, I&#39;d like to walk you through how Aibex works.
close this, and when you&#39;re ready, let&#39;s chat about &quot;What Is Aibex&quot;

[[end]]</tw-passagedata><tw-passagedata pid="12" name="end" tags="system" position="925,875" size="100,100">#@yaml end: true</tw-passagedata><tw-passagedata pid="13" name="Save Action" tags="speaker-bot" position="600,875" size="100,100">###@yaml
graphql:
  id: updateUserData
  query: |
    mutation updateUserData ($input: UpdateUserInput!) {
      updateUser(input:$input) {
        user {
          id
        }
      }
    }
  variables: |
    {
      &quot;input&quot;: {
        &quot;id&quot;: {{userId}},
        &quot;patch&quot;: {
          &quot;firstName&quot;: &quot;{{firstName}}&quot;,
          &quot;aboutPronoun&quot;: &quot;{{aboutPronoun}}&quot;,
          &quot;conjugatedPronoun&quot;: &quot;{{conjugatedPronoun}}&quot;,
          &quot;possessivePronoun&quot;: &quot;{{possessivePronoun}}&quot;,
          &quot;primaryEmail&quot;: &quot;{{email}}&quot;
        }
      }
    }
  format: true
  store:
    - SUCCESS: updateResult
###

{{~# if updateResult ~}}
  Great, all saved
  {{~&gt; line ~}}
  You can update all of this from your profile, too.
{{~ else ~}}
  Awkward. Something went wrong. We&#39;ll come back to this
{{~/ if ~}}

[[Next Steps]]</tw-passagedata><tw-passagedata pid="14" name="Enter Name" tags="system" position="622,127" size="100,100">#@prompt firstName

[[Confirm Email]]</tw-passagedata></tw-storydata> <script>(function (factory) {
  typeof define === 'function' && define.amd ? define(factory) :
  factory();
}(function () { 'use strict';

  function _defineProperty(obj, key, value) {
    if (key in obj) {
      Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
      });
    } else {
      obj[key] = value;
    }

    return obj;
  }

  var defineProperty = _defineProperty;

  var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

  /**
   * lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="npm" -o ./`
   * Copyright jQuery Foundation and other contributors <https://jquery.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   */

  /** Used as references for various `Number` constants. */
  var INFINITY = 1 / 0;

  /** `Object#toString` result references. */
  var symbolTag = '[object Symbol]';

  /** Used to match HTML entities and HTML characters. */
  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39|#96);/g,
      reHasEscapedHtml = RegExp(reEscapedHtml.source);

  /** Used to map HTML entities to characters. */
  var htmlUnescapes = {
    '&amp;': '&',
    '&lt;': '<',
    '&gt;': '>',
    '&quot;': '"',
    '&#39;': "'",
    '&#96;': '`'
  };

  /** Detect free variable `global` from Node.js. */
  var freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;

  /** Detect free variable `self`. */
  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

  /** Used as a reference to the global object. */
  var root = freeGlobal || freeSelf || Function('return this')();

  /**
   * The base implementation of `_.propertyOf` without support for deep paths.
   *
   * @private
   * @param {Object} object The object to query.
   * @returns {Function} Returns the new accessor function.
   */
  function basePropertyOf(object) {
    return function(key) {
      return object == null ? undefined : object[key];
    };
  }

  /**
   * Used by `_.unescape` to convert HTML entities to characters.
   *
   * @private
   * @param {string} chr The matched character to unescape.
   * @returns {string} Returns the unescaped character.
   */
  var unescapeHtmlChar = basePropertyOf(htmlUnescapes);

  /** Used for built-in method references. */
  var objectProto = Object.prototype;

  /**
   * Used to resolve the
   * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
   * of values.
   */
  var objectToString = objectProto.toString;

  /** Built-in value references. */
  var Symbol = root.Symbol;

  /** Used to convert symbols to primitives and strings. */
  var symbolProto = Symbol ? Symbol.prototype : undefined,
      symbolToString = symbolProto ? symbolProto.toString : undefined;

  /**
   * The base implementation of `_.toString` which doesn't convert nullish
   * values to empty strings.
   *
   * @private
   * @param {*} value The value to process.
   * @returns {string} Returns the string.
   */
  function baseToString(value) {
    // Exit early for strings to avoid a performance hit in some environments.
    if (typeof value == 'string') {
      return value;
    }
    if (isSymbol(value)) {
      return symbolToString ? symbolToString.call(value) : '';
    }
    var result = (value + '');
    return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;
  }

  /**
   * Checks if `value` is object-like. A value is object-like if it's not `null`
   * and has a `typeof` result of "object".
   *
   * @static
   * @memberOf _
   * @since 4.0.0
   * @category Lang
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
   * @example
   *
   * _.isObjectLike({});
   * // => true
   *
   * _.isObjectLike([1, 2, 3]);
   * // => true
   *
   * _.isObjectLike(_.noop);
   * // => false
   *
   * _.isObjectLike(null);
   * // => false
   */
  function isObjectLike(value) {
    return !!value && typeof value == 'object';
  }

  /**
   * Checks if `value` is classified as a `Symbol` primitive or object.
   *
   * @static
   * @memberOf _
   * @since 4.0.0
   * @category Lang
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
   * @example
   *
   * _.isSymbol(Symbol.iterator);
   * // => true
   *
   * _.isSymbol('abc');
   * // => false
   */
  function isSymbol(value) {
    return typeof value == 'symbol' ||
      (isObjectLike(value) && objectToString.call(value) == symbolTag);
  }

  /**
   * Converts `value` to a string. An empty string is returned for `null`
   * and `undefined` values. The sign of `-0` is preserved.
   *
   * @static
   * @memberOf _
   * @since 4.0.0
   * @category Lang
   * @param {*} value The value to process.
   * @returns {string} Returns the string.
   * @example
   *
   * _.toString(null);
   * // => ''
   *
   * _.toString(-0);
   * // => '-0'
   *
   * _.toString([1, 2, 3]);
   * // => '1,2,3'
   */
  function toString(value) {
    return value == null ? '' : baseToString(value);
  }

  /**
   * The inverse of `_.escape`; this method converts the HTML entities
   * `&amp;`, `&lt;`, `&gt;`, `&quot;`, `&#39;`, and `&#96;` in `string` to
   * their corresponding characters.
   *
   * **Note:** No other HTML entities are unescaped. To unescape additional
   * HTML entities use a third-party library like [_he_](https://mths.be/he).
   *
   * @static
   * @memberOf _
   * @since 0.6.0
   * @category String
   * @param {string} [string=''] The string to unescape.
   * @returns {string} Returns the unescaped string.
   * @example
   *
   * _.unescape('fred, barney, &amp; pebbles');
   * // => 'fred, barney, & pebbles'
   */
  function unescape(string) {
    string = toString(string);
    return (string && reHasEscapedHtml.test(string))
      ? string.replace(reEscapedHtml, unescapeHtmlChar)
      : string;
  }

  var lodash_unescape = unescape;

  const TOKEN_ESCAPED_OCTO = "__TOKEN_ESCAPED_BACKSLASH_OCTO__";
  const BLOCK_DIRECTIVE = /^###@([\S]+)([\s\S]*?)###/gm;
  const INLINE_DIRECTIVE = /^#@([\S]+)(.*)$/gm;

  const extractDirectives = s => {
    const directives = []; // avoid using escaped items

    s = s.replace("\\#", TOKEN_ESCAPED_OCTO);

    while (s.match(BLOCK_DIRECTIVE)) {
      s = s.replace(BLOCK_DIRECTIVE, (match, dir, content) => {
        directives.push({
          name: "@".concat(dir),
          content: content.trim()
        });
        return "";
      });
    }

    while (s.match(INLINE_DIRECTIVE)) {
      s = s.replace(INLINE_DIRECTIVE, (match, dir, content) => {
        directives.push({
          name: "@".concat(dir),
          content: content.trim()
        });
        return "";
      });
    }

    return directives;
  };

  const LINK_PATTERN = /\[\[(.*?)\]\]/gm;

  const extractLinks = str => {
    const links = [];
    const original = str;

    while (str.match(LINK_PATTERN)) {
      str = str.replace(LINK_PATTERN, (match, t) => {
        let display = t;
        let target = t; // display|target format

        const barIndex = t.indexOf("|");
        const rightArrIndex = t.indexOf("->");
        const leftArrIndex = t.indexOf("<-");

        switch (true) {
          case barIndex >= 0:
            display = t.substr(0, barIndex);
            target = t.substr(barIndex + 1);
            break;

          case rightArrIndex >= 0:
            display = t.substr(0, rightArrIndex);
            target = t.substr(rightArrIndex + 2);
            break;

          case leftArrIndex >= 0:
            display = t.substr(leftArrIndex + 2);
            target = t.substr(0, leftArrIndex);
            break;
        }

        links.push({
          display,
          target
        });
        return ""; // render nothing if it's a twee link
      });
    }

    return {
      links,
      updated: str,
      original
    };
  };

  const TOKEN_ESCAPED_OCTO$1 = "__TOKEN_ESCAPED_BACKSLASH_OCTO__";
  const BLOCK_COMMENT = /###[\s\S]*?###/gm;
  const INLINE_COMMENT = /^#.*$/gm;

  const stripComments = str => str.replace("\\#", TOKEN_ESCAPED_OCTO$1).replace(BLOCK_COMMENT, "").replace(INLINE_COMMENT, "").replace(TOKEN_ESCAPED_OCTO$1, "#").trim();

  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

  const findStory = win => {
    if (win && win.story) {
      return win.story;
    }

    return {
      state: {}
    };
  };

  const renderPassage = passage => {
    const source = passage.source;
    const directives = extractDirectives(source);
    let result = stripComments(source);

    if (passage) {
      // remove links if set previously
      passage.links = [];
    } // [[links]]


    const linkData = extractLinks(result);
    result = linkData.updated;

    if (passage) {
      passage.links = linkData.links;
    } // before handling any tags, handle any/all directives


    directives.forEach(d => {
      if (!passage.story.directives[d.name]) return;
      passage.story.directives[d.name].forEach(run => {
        result = run(d.content, result, passage, passage.story);
      });
    }); // if system tag, return an empty render set

    if (passage.hasTag("system")) {
      return {
        directives,
        text: []
      };
    } // if prompt tag is set, notify the story


    if (passage) {
      const prompts = passage.prefixTag("prompt");

      if (prompts.length) {
        passage.story.prompt(prompts[0]);
      }
    } // if this is a multiline item, trim, split, and mark each item
    // return the array


    if (passage.hasTag("multiline")) {
      result = result.trim();
      return {
        directives,
        text: result.split(/[\r\n]+/g)
      };
    } // else returns an array of 1


    return {
      directives,
      text: [result]
    };
  };

  class Passage {
    constructor(id, name, tags, source, story) {
      defineProperty(this, "id", null);

      defineProperty(this, "name", null);

      defineProperty(this, "tags", null);

      defineProperty(this, "tagDict", {});

      defineProperty(this, "source", null);

      defineProperty(this, "links", []);

      defineProperty(this, "getSpeaker", () => {
        const speakerTag = this.tags.find(t => t.indexOf("speaker-") === 0) || "";
        const systemTag = this.hasTag("system");
        if (speakerTag) return speakerTag.replace(/^speaker-/, "");
        if (systemTag) return "system";
        return null;
      });

      defineProperty(this, "prefixTag", (pfx, asDict) => this.tags.filter(t => t.indexOf("".concat(pfx, "-")) === 0).map(t => t.replace("".concat(pfx, "-"), "")).reduce((a, t) => {
        if (asDict) return _objectSpread({}, a, {
          [t]: 1
        });
        return [...a, t];
      }, asDict ? {} : []));

      defineProperty(this, "hasTag", t => this.tagDict[t]);

      defineProperty(this, "render", () => renderPassage(this));

      this.id = id;
      this.name = name;
      this.tags = tags;
      this.source = lodash_unescape(source);
      this.story = story;
      this.tags.forEach(t => this.tagDict[t] = 1);
    }

  }

  defineProperty(Passage, "render", str => renderPassage(new Passage(null, null, null, str, findStory(window || null))));

  /**
   * lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="npm" -o ./`
   * Copyright jQuery Foundation and other contributors <https://jquery.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   */

  /** Used as references for various `Number` constants. */
  var INFINITY$1 = 1 / 0;

  /** `Object#toString` result references. */
  var symbolTag$1 = '[object Symbol]';

  /** Used to match HTML entities and HTML characters. */
  var reUnescapedHtml = /[&<>"'`]/g,
      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);

  /** Used to map characters to HTML entities. */
  var htmlEscapes = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#39;',
    '`': '&#96;'
  };

  /** Detect free variable `global` from Node.js. */
  var freeGlobal$1 = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;

  /** Detect free variable `self`. */
  var freeSelf$1 = typeof self == 'object' && self && self.Object === Object && self;

  /** Used as a reference to the global object. */
  var root$1 = freeGlobal$1 || freeSelf$1 || Function('return this')();

  /**
   * The base implementation of `_.propertyOf` without support for deep paths.
   *
   * @private
   * @param {Object} object The object to query.
   * @returns {Function} Returns the new accessor function.
   */
  function basePropertyOf$1(object) {
    return function(key) {
      return object == null ? undefined : object[key];
    };
  }

  /**
   * Used by `_.escape` to convert characters to HTML entities.
   *
   * @private
   * @param {string} chr The matched character to escape.
   * @returns {string} Returns the escaped character.
   */
  var escapeHtmlChar = basePropertyOf$1(htmlEscapes);

  /** Used for built-in method references. */
  var objectProto$1 = Object.prototype;

  /**
   * Used to resolve the
   * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
   * of values.
   */
  var objectToString$1 = objectProto$1.toString;

  /** Built-in value references. */
  var Symbol$1 = root$1.Symbol;

  /** Used to convert symbols to primitives and strings. */
  var symbolProto$1 = Symbol$1 ? Symbol$1.prototype : undefined,
      symbolToString$1 = symbolProto$1 ? symbolProto$1.toString : undefined;

  /**
   * The base implementation of `_.toString` which doesn't convert nullish
   * values to empty strings.
   *
   * @private
   * @param {*} value The value to process.
   * @returns {string} Returns the string.
   */
  function baseToString$1(value) {
    // Exit early for strings to avoid a performance hit in some environments.
    if (typeof value == 'string') {
      return value;
    }
    if (isSymbol$1(value)) {
      return symbolToString$1 ? symbolToString$1.call(value) : '';
    }
    var result = (value + '');
    return (result == '0' && (1 / value) == -INFINITY$1) ? '-0' : result;
  }

  /**
   * Checks if `value` is object-like. A value is object-like if it's not `null`
   * and has a `typeof` result of "object".
   *
   * @static
   * @memberOf _
   * @since 4.0.0
   * @category Lang
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
   * @example
   *
   * _.isObjectLike({});
   * // => true
   *
   * _.isObjectLike([1, 2, 3]);
   * // => true
   *
   * _.isObjectLike(_.noop);
   * // => false
   *
   * _.isObjectLike(null);
   * // => false
   */
  function isObjectLike$1(value) {
    return !!value && typeof value == 'object';
  }

  /**
   * Checks if `value` is classified as a `Symbol` primitive or object.
   *
   * @static
   * @memberOf _
   * @since 4.0.0
   * @category Lang
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
   * @example
   *
   * _.isSymbol(Symbol.iterator);
   * // => true
   *
   * _.isSymbol('abc');
   * // => false
   */
  function isSymbol$1(value) {
    return typeof value == 'symbol' ||
      (isObjectLike$1(value) && objectToString$1.call(value) == symbolTag$1);
  }

  /**
   * Converts `value` to a string. An empty string is returned for `null`
   * and `undefined` values. The sign of `-0` is preserved.
   *
   * @static
   * @memberOf _
   * @since 4.0.0
   * @category Lang
   * @param {*} value The value to process.
   * @returns {string} Returns the string.
   * @example
   *
   * _.toString(null);
   * // => ''
   *
   * _.toString(-0);
   * // => '-0'
   *
   * _.toString([1, 2, 3]);
   * // => '1,2,3'
   */
  function toString$1(value) {
    return value == null ? '' : baseToString$1(value);
  }

  /**
   * Converts the characters "&", "<", ">", '"', "'", and "\`" in `string` to
   * their corresponding HTML entities.
   *
   * **Note:** No other characters are escaped. To escape additional
   * characters use a third-party library like [_he_](https://mths.be/he).
   *
   * Though the ">" character is escaped for symmetry, characters like
   * ">" and "/" don't need escaping in HTML and have no special meaning
   * unless they're part of a tag or unquoted attribute value. See
   * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)
   * (under "semi-related fun fact") for more details.
   *
   * Backticks are escaped because in IE < 9, they can break out of
   * attribute values or HTML comments. See [#59](https://html5sec.org/#59),
   * [#102](https://html5sec.org/#102), [#108](https://html5sec.org/#108), and
   * [#133](https://html5sec.org/#133) of the
   * [HTML5 Security Cheatsheet](https://html5sec.org/) for more details.
   *
   * When working with HTML you should always
   * [quote attribute values](http://wonko.com/post/html-escaping) to reduce
   * XSS vectors.
   *
   * @static
   * @since 0.1.0
   * @memberOf _
   * @category String
   * @param {string} [string=''] The string to escape.
   * @returns {string} Returns the escaped string.
   * @example
   *
   * _.escape('fred, barney, & pebbles');
   * // => 'fred, barney, &amp; pebbles'
   */
  function escape(string) {
    string = toString$1(string);
    return (string && reHasUnescapedHtml.test(string))
      ? string.replace(reUnescapedHtml, escapeHtmlChar)
      : string;
  }

  var lodash_escape = escape;

  const selectPassages = "tw-passagedata";
  const selectCss = '*[type="text/twine-css"]';
  const selectJs = '*[type="text/twine-javascript"]';
  const selectActiveLink = "#user-response-panel a[data-passage]";
  const selectActiveButton = "#user-response-panel button[data-passage]";
  const selectActiveInput = "#user-response-panel input";
  const selectActive = ".chat-panel .active";
  const selectHistory = ".chat-panel .history";
  const selectResponses = "#user-response-panel";
  const typingIndicator = "#animation-container";
  const IS_NUMERIC = /^[\d]+$/;
  /**
   * Determine if a provided string contains only numbers
   * In the case of `pid` values for passages, this is true
   */

  const isNumeric = d => IS_NUMERIC.test(d);
  /**
   * Format a user passage (such as a response)
   */


  const USER_PASSAGE_TMPL = ({
    id,
    text
  }) => "\n  <div class=\"chat-passage-wrapper\" data-speaker=\"you\">\n    <div class=\"chat-passage phistory\" data-speaker=\"you\" data-upassage=\"".concat(id, "\">\n      ").concat(text, "\n    </div>\n  </div>\n");
  /**
   * Format a message from a non-user
   */


  const OTHER_PASSAGE_TMPL = ({
    speaker,
    tags,
    text
  }) => "\n  <div data-speaker=\"".concat(speaker, "\" class=\"chat-passage-wrapper ").concat(tags.join(" "), "\">\n    <div data-speaker=\"").concat(speaker, "\" class=\"chat-passage\">\n      ").concat(text, "\n    </div>\n  </div>\n");

  const DIRECTIVES_TMPL = directives => "\n  <div class=\"directives\">\n    ".concat(directives.map(({
    name,
    content
  }) => "<div class=\"directive\" name=\"".concat(name, "\">").concat(content.trim(), "</div>")).join(""), "\n  </div>\n");
  /**
   * Forces a delay via promises in order to spread out messages
   */


  const delay = async (t = 0) => new Promise(resolve => setTimeout(resolve, t)); // Find one/many nodes within a context. We [...findAll] to ensure we're cast as an array
  // not as a node list


  const find = (ctx, s) => ctx.querySelector(s);

  const findAll = (ctx, s) => [...ctx.querySelectorAll(s)] || [];
  /**
   * Standard Twine Format Story Object
   */


  class Story {
    // Twine v2
    constructor(win, src) {
      defineProperty(this, "version", 2);

      defineProperty(this, "document", null);

      defineProperty(this, "story", null);

      defineProperty(this, "name", "");

      defineProperty(this, "startsAt", 0);

      defineProperty(this, "current", 0);

      defineProperty(this, "history", []);

      defineProperty(this, "passages", {});

      defineProperty(this, "showPrompt", false);

      defineProperty(this, "errorMessage", "\u26a0 %s");

      defineProperty(this, "directives", {});

      defineProperty(this, "elements", {});

      defineProperty(this, "userScripts", []);

      defineProperty(this, "userStyles", []);

      defineProperty(this, "start", () => {
        // activate userscripts and styles
        this.userStyles.forEach(s => {
          const t = this.document.createElement("style");
          t.innerHTML = s;
          this.document.body.appendChild(t);
        });
        this.userScripts.forEach(s => {
          // eval is evil, but this is simply how Twine works
          // eslint-disable-line
          globalEval(s);
        }); // when you click on a[data-passage] (response link)...

        this.document.body.addEventListener("click", e => {
          if (!e.target.matches(selectActiveLink)) {
            return;
          }

          this.advance(this.findPassage(e.target.getAttribute("data-passage")), e.target.innerHTML);
        }); // when you click on button[data-passage] (response input)...

        this.document.body.addEventListener("click", e => {
          if (!e.target.matches(selectActiveButton)) {
            return;
          } // capture and disable showPrompt feature


          const value = find(this.document, selectActiveInput).value;
          this.showPrompt = false;
          this.advance(this.findPassage(e.target.getAttribute("data-passage")), value);
        });
        this.advance(this.findPassage(this.startsAt));
      });

      defineProperty(this, "findPassage", idOrName => {
        if (isNumeric(idOrName)) {
          return this.passages[idOrName];
        } else {
          // handle passages with ' and " (can't use a css selector consistently)
          const p = findAll(this.story, "tw-passagedata").filter(p => lodash_unescape(p.getAttribute("name")) === idOrName)[0];
          if (!p) return null;
          return this.passages[p.getAttribute("pid")];
        }
      });

      defineProperty(this, "advance", async (passage, userText = null) => {
        this.history.push(passage.id);
        const last = this.current; // .active is captured & cleared

        const existing = this.elements.active.innerHTML;
        this.elements.active.innerHTML = ""; // whatever was in active is moved up into history

        this.elements.history.innerHTML += existing; // if there is userText, it is added to .history

        if (userText) {
          this.renderUserMessage(last, userText, s => this.elements.history.innerHTML += s);
        } // The new passage is rendered and placed in .active
        // after all renders, user options are displayed


        await this.renderPassage(passage, s => this.elements.active.innerHTML += s);

        if (!passage.hasTag("wait") && passage.links.length === 1) {
          // auto advance if the wait tag is not set and there is exactly
          // 1 link found in our pssage.
          this.advance(this.findPassage(passage.links[0].target));
          return;
        }

        this.renderChoices(passage);
      });

      defineProperty(this, "renderUserMessage", async (pid, text, renderer) => {
        await renderer(USER_PASSAGE_TMPL({
          pid,
          text
        }));
        this.scrollToBottom();
        return Promise.resolve();
      });

      defineProperty(this, "renderPassage", async (passage, renderer) => {
        const speaker = passage.getSpeaker();
        let statements = passage.render();
        console.log(statements.directives);
        await renderer(DIRECTIVES_TMPL(statements.directives));
        let next = statements.text.shift();
        this.showTyping();

        while (next) {
          const content = OTHER_PASSAGE_TMPL({
            speaker,
            tags: passage.tags,
            text: next
          });
          await delay(this.calculateDelay(next)); // todo

          await renderer(content);
          next = statements.text.shift();
        }

        this.hideTyping();
        this.scrollToBottom();
        return Promise.resolve();
      });

      defineProperty(this, "calculateDelay", txt => {
        const typingDelayRatio = 0.3;
        const rate = 20; // ms

        return txt.length * rate * typingDelayRatio;
      });

      defineProperty(this, "showTyping", () => {
        find(this.document, typingIndicator).style.visibility = "visible";
      });

      defineProperty(this, "hideTyping", () => {
        find(this.document, typingIndicator).style.visibility = "hidden";
      });

      defineProperty(this, "scrollToBottom", () => {
        const hist = find(this.document, "#phistory");
        document.scrollingElement.scrollTop = hist.offsetHeight;
      });

      defineProperty(this, "removeChoices", () => {
        const panel = find(this.document, selectResponses);
        panel.innerHTML = "";
      });

      defineProperty(this, "renderChoices", passage => {
        this.removeChoices();
        const panel = find(this.document, selectResponses);
        passage.links.forEach(l => {
          panel.innerHTML += "<a href=\"javascript:void(0)\" class=\"user-response\" data-passage=\"".concat(lodash_escape(l.target), "\">").concat(l.display, "</a>");
        });
      });

      defineProperty(this, "directive", (id, cb) => {
        if (!this.directives[id]) {
          this.directives[id] = [];
        }

        this.directives[id].push(cb);
      });

      this.window = win;

      if (src) {
        this.document = document.implementation.createHTMLDocument("Chatbook Injected Content");
      } else {
        this.document = document;
      }

      this.story = find(this.document, "tw-storydata"); // elements

      this.elements = {
        active: find(this.document, selectActive),
        history: find(this.document, selectHistory)
      }; // properties of story node

      this.name = this.story.getAttribute("name") || "";
      this.startsAt = this.story.getAttribute("startnode") || 0;
      findAll(this.story, selectPassages).forEach(p => {
        const id = parseInt(p.getAttribute("pid"));
        const name = p.getAttribute("name");
        const tags = (p.getAttribute("tags") || "").split(/\s+/g);
        const passage = p.innerHTML || "";
        this.passages[id] = new Passage(id, name, tags, passage, this);
      });
      find(this.document, "title").innerHTML = this.name;
      find(this.document, "#ptitle").innerHTML = this.name;
      this.userScripts = (findAll(this.document, selectJs) || []).map(el => el.innerHTML);
      this.userStyles = (findAll(this.document, selectCss) || []).map(el => el.innerHTML);
    }
    /**
     * Starts the story by setting up listeners and then advancing
     * to the first item in the stack
     */


  }

  (win => {
    if (typeof win !== "undefined") {
      win.document.addEventListener("DOMContentLoaded", function (event) {
        win.globalEval = eval;
        win.story = new Story(win);

        if (win.document.querySelector("#show_directives").checked) {
          win.document.body.classList.add("show-directives");
        }

        win.story.start();
      });
      win.document.querySelector("#show_directives").addEventListener("change", e => {
        if (e.target.checked) {
          win.document.body.classList.add("show-directives");
        } else {
          win.document.body.classList.remove("show-directives");
        }
      });
    }
  })(window || undefined);

}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhdGJvb2sudW1kLmpzIiwic291cmNlcyI6WyIuLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eS5qcyIsIi4uL25vZGVfbW9kdWxlcy9sb2Rhc2gudW5lc2NhcGUvaW5kZXguanMiLCIuLi9zcmMvY29tbW9uL2V4dHJhY3REaXJlY3RpdmVzLmpzIiwiLi4vc3JjL2NvbW1vbi9leHRyYWN0TGlua3MuanMiLCIuLi9zcmMvY29tbW9uL3N0cmlwQ29tbWVudHMuanMiLCIuLi9zcmMvdHdpbmUvUGFzc2FnZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9sb2Rhc2guZXNjYXBlL2luZGV4LmpzIiwiLi4vc3JjL3R3aW5lL1N0b3J5LmpzIiwiLi4vc3JjL3R3aW5lL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleSBpbiBvYmopIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9ialtrZXldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gb2JqO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9kZWZpbmVQcm9wZXJ0eTsiLCIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgSU5GSU5JVFkgPSAxIC8gMDtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBIVE1MIGVudGl0aWVzIGFuZCBIVE1MIGNoYXJhY3RlcnMuICovXG52YXIgcmVFc2NhcGVkSHRtbCA9IC8mKD86YW1wfGx0fGd0fHF1b3R8IzM5fCM5Nik7L2csXG4gICAgcmVIYXNFc2NhcGVkSHRtbCA9IFJlZ0V4cChyZUVzY2FwZWRIdG1sLnNvdXJjZSk7XG5cbi8qKiBVc2VkIHRvIG1hcCBIVE1MIGVudGl0aWVzIHRvIGNoYXJhY3RlcnMuICovXG52YXIgaHRtbFVuZXNjYXBlcyA9IHtcbiAgJyZhbXA7JzogJyYnLFxuICAnJmx0Oyc6ICc8JyxcbiAgJyZndDsnOiAnPicsXG4gICcmcXVvdDsnOiAnXCInLFxuICAnJiMzOTsnOiBcIidcIixcbiAgJyYjOTY7JzogJ2AnXG59O1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xudmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cbi8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlPZmAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZVByb3BlcnR5T2Yob2JqZWN0KSB7XG4gIHJldHVybiBmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgfTtcbn1cblxuLyoqXG4gKiBVc2VkIGJ5IGBfLnVuZXNjYXBlYCB0byBjb252ZXJ0IEhUTUwgZW50aXRpZXMgdG8gY2hhcmFjdGVycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGNociBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gdW5lc2NhcGUuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB1bmVzY2FwZWQgY2hhcmFjdGVyLlxuICovXG52YXIgdW5lc2NhcGVIdG1sQ2hhciA9IGJhc2VQcm9wZXJ0eU9mKGh0bWxVbmVzY2FwZXMpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgU3ltYm9sID0gcm9vdC5TeW1ib2w7XG5cbi8qKiBVc2VkIHRvIGNvbnZlcnQgc3ltYm9scyB0byBwcmltaXRpdmVzIGFuZCBzdHJpbmdzLiAqL1xudmFyIHN5bWJvbFByb3RvID0gU3ltYm9sID8gU3ltYm9sLnByb3RvdHlwZSA6IHVuZGVmaW5lZCxcbiAgICBzeW1ib2xUb1N0cmluZyA9IHN5bWJvbFByb3RvID8gc3ltYm9sUHJvdG8udG9TdHJpbmcgOiB1bmRlZmluZWQ7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udG9TdHJpbmdgIHdoaWNoIGRvZXNuJ3QgY29udmVydCBudWxsaXNoXG4gKiB2YWx1ZXMgdG8gZW1wdHkgc3RyaW5ncy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG4gIC8vIEV4aXQgZWFybHkgZm9yIHN0cmluZ3MgdG8gYXZvaWQgYSBwZXJmb3JtYW5jZSBoaXQgaW4gc29tZSBlbnZpcm9ubWVudHMuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBzeW1ib2xUb1N0cmluZyA/IHN5bWJvbFRvU3RyaW5nLmNhbGwodmFsdWUpIDogJyc7XG4gIH1cbiAgdmFyIHJlc3VsdCA9ICh2YWx1ZSArICcnKTtcbiAgcmV0dXJuIChyZXN1bHQgPT0gJzAnICYmICgxIC8gdmFsdWUpID09IC1JTkZJTklUWSkgPyAnLTAnIDogcmVzdWx0O1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQgZm9yIGBudWxsYFxuICogYW5kIGB1bmRlZmluZWRgIHZhbHVlcy4gVGhlIHNpZ24gb2YgYC0wYCBpcyBwcmVzZXJ2ZWQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9TdHJpbmcobnVsbCk7XG4gKiAvLyA9PiAnJ1xuICpcbiAqIF8udG9TdHJpbmcoLTApO1xuICogLy8gPT4gJy0wJ1xuICpcbiAqIF8udG9TdHJpbmcoWzEsIDIsIDNdKTtcbiAqIC8vID0+ICcxLDIsMydcbiAqL1xuZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IGJhc2VUb1N0cmluZyh2YWx1ZSk7XG59XG5cbi8qKlxuICogVGhlIGludmVyc2Ugb2YgYF8uZXNjYXBlYDsgdGhpcyBtZXRob2QgY29udmVydHMgdGhlIEhUTUwgZW50aXRpZXNcbiAqIGAmYW1wO2AsIGAmbHQ7YCwgYCZndDtgLCBgJnF1b3Q7YCwgYCYjMzk7YCwgYW5kIGAmIzk2O2AgaW4gYHN0cmluZ2AgdG9cbiAqIHRoZWlyIGNvcnJlc3BvbmRpbmcgY2hhcmFjdGVycy5cbiAqXG4gKiAqKk5vdGU6KiogTm8gb3RoZXIgSFRNTCBlbnRpdGllcyBhcmUgdW5lc2NhcGVkLiBUbyB1bmVzY2FwZSBhZGRpdGlvbmFsXG4gKiBIVE1MIGVudGl0aWVzIHVzZSBhIHRoaXJkLXBhcnR5IGxpYnJhcnkgbGlrZSBbX2hlX10oaHR0cHM6Ly9tdGhzLmJlL2hlKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuNi4wXG4gKiBAY2F0ZWdvcnkgU3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byB1bmVzY2FwZS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHVuZXNjYXBlZCBzdHJpbmcuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udW5lc2NhcGUoJ2ZyZWQsIGJhcm5leSwgJmFtcDsgcGViYmxlcycpO1xuICogLy8gPT4gJ2ZyZWQsIGJhcm5leSwgJiBwZWJibGVzJ1xuICovXG5mdW5jdGlvbiB1bmVzY2FwZShzdHJpbmcpIHtcbiAgc3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtcbiAgcmV0dXJuIChzdHJpbmcgJiYgcmVIYXNFc2NhcGVkSHRtbC50ZXN0KHN0cmluZykpXG4gICAgPyBzdHJpbmcucmVwbGFjZShyZUVzY2FwZWRIdG1sLCB1bmVzY2FwZUh0bWxDaGFyKVxuICAgIDogc3RyaW5nO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHVuZXNjYXBlO1xuIiwiY29uc3QgVE9LRU5fRVNDQVBFRF9PQ1RPID0gXCJfX1RPS0VOX0VTQ0FQRURfQkFDS1NMQVNIX09DVE9fX1wiO1xuY29uc3QgQkxPQ0tfRElSRUNUSVZFID0gL14jIyNAKFtcXFNdKykoW1xcc1xcU10qPykjIyMvZ207XG5jb25zdCBJTkxJTkVfRElSRUNUSVZFID0gL14jQChbXFxTXSspKC4qKSQvZ207XG5cbmNvbnN0IGV4dHJhY3REaXJlY3RpdmVzID0gcyA9PiB7XG4gIGNvbnN0IGRpcmVjdGl2ZXMgPSBbXTtcblxuICAvLyBhdm9pZCB1c2luZyBlc2NhcGVkIGl0ZW1zXG4gIHMgPSBzLnJlcGxhY2UoXCJcXFxcI1wiLCBUT0tFTl9FU0NBUEVEX09DVE8pO1xuXG4gIHdoaWxlIChzLm1hdGNoKEJMT0NLX0RJUkVDVElWRSkpIHtcbiAgICBzID0gcy5yZXBsYWNlKEJMT0NLX0RJUkVDVElWRSwgKG1hdGNoLCBkaXIsIGNvbnRlbnQpID0+IHtcbiAgICAgIGRpcmVjdGl2ZXMucHVzaCh7IG5hbWU6IGBAJHtkaXJ9YCwgY29udGVudDogY29udGVudC50cmltKCkgfSk7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9KTtcbiAgfVxuXG4gIHdoaWxlIChzLm1hdGNoKElOTElORV9ESVJFQ1RJVkUpKSB7XG4gICAgcyA9IHMucmVwbGFjZShJTkxJTkVfRElSRUNUSVZFLCAobWF0Y2gsIGRpciwgY29udGVudCkgPT4ge1xuICAgICAgZGlyZWN0aXZlcy5wdXNoKHsgbmFtZTogYEAke2Rpcn1gLCBjb250ZW50OiBjb250ZW50LnRyaW0oKSB9KTtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGRpcmVjdGl2ZXM7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBleHRyYWN0RGlyZWN0aXZlcztcbiIsImNvbnN0IExJTktfUEFUVEVSTiA9IC9cXFtcXFsoLio/KVxcXVxcXS9nbTtcblxuY29uc3QgZXh0cmFjdExpbmtzID0gc3RyID0+IHtcbiAgY29uc3QgbGlua3MgPSBbXTtcbiAgY29uc3Qgb3JpZ2luYWwgPSBzdHI7XG5cbiAgd2hpbGUgKHN0ci5tYXRjaChMSU5LX1BBVFRFUk4pKSB7XG4gICAgc3RyID0gc3RyLnJlcGxhY2UoTElOS19QQVRURVJOLCAobWF0Y2gsIHQpID0+IHtcbiAgICAgIGxldCBkaXNwbGF5ID0gdDtcbiAgICAgIGxldCB0YXJnZXQgPSB0O1xuXG4gICAgICAvLyBkaXNwbGF5fHRhcmdldCBmb3JtYXRcbiAgICAgIGNvbnN0IGJhckluZGV4ID0gdC5pbmRleE9mKFwifFwiKTtcbiAgICAgIGNvbnN0IHJpZ2h0QXJySW5kZXggPSB0LmluZGV4T2YoXCItPlwiKTtcbiAgICAgIGNvbnN0IGxlZnRBcnJJbmRleCA9IHQuaW5kZXhPZihcIjwtXCIpO1xuXG4gICAgICBzd2l0Y2ggKHRydWUpIHtcbiAgICAgICAgY2FzZSBiYXJJbmRleCA+PSAwOlxuICAgICAgICAgIGRpc3BsYXkgPSB0LnN1YnN0cigwLCBiYXJJbmRleCk7XG4gICAgICAgICAgdGFyZ2V0ID0gdC5zdWJzdHIoYmFySW5kZXggKyAxKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSByaWdodEFyckluZGV4ID49IDA6XG4gICAgICAgICAgZGlzcGxheSA9IHQuc3Vic3RyKDAsIHJpZ2h0QXJySW5kZXgpO1xuICAgICAgICAgIHRhcmdldCA9IHQuc3Vic3RyKHJpZ2h0QXJySW5kZXggKyAyKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBsZWZ0QXJySW5kZXggPj0gMDpcbiAgICAgICAgICBkaXNwbGF5ID0gdC5zdWJzdHIobGVmdEFyckluZGV4ICsgMik7XG4gICAgICAgICAgdGFyZ2V0ID0gdC5zdWJzdHIoMCwgbGVmdEFyckluZGV4KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgbGlua3MucHVzaCh7XG4gICAgICAgIGRpc3BsYXksXG4gICAgICAgIHRhcmdldCxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gXCJcIjsgLy8gcmVuZGVyIG5vdGhpbmcgaWYgaXQncyBhIHR3ZWUgbGlua1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBsaW5rcyxcbiAgICB1cGRhdGVkOiBzdHIsXG4gICAgb3JpZ2luYWwsXG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBleHRyYWN0TGlua3M7XG4iLCJjb25zdCBUT0tFTl9FU0NBUEVEX09DVE8gPSBcIl9fVE9LRU5fRVNDQVBFRF9CQUNLU0xBU0hfT0NUT19fXCI7XG5cbmNvbnN0IEJMT0NLX0NPTU1FTlQgPSAvIyMjW1xcc1xcU10qPyMjIy9nbTtcbmNvbnN0IElOTElORV9DT01NRU5UID0gL14jLiokL2dtO1xuXG5jb25zdCBzdHJpcENvbW1lbnRzID0gc3RyID0+XG4gIHN0clxuICAgIC5yZXBsYWNlKFwiXFxcXCNcIiwgVE9LRU5fRVNDQVBFRF9PQ1RPKVxuICAgIC5yZXBsYWNlKEJMT0NLX0NPTU1FTlQsIFwiXCIpXG4gICAgLnJlcGxhY2UoSU5MSU5FX0NPTU1FTlQsIFwiXCIpXG4gICAgLnJlcGxhY2UoVE9LRU5fRVNDQVBFRF9PQ1RPLCBcIiNcIilcbiAgICAudHJpbSgpO1xuXG5leHBvcnQgZGVmYXVsdCBzdHJpcENvbW1lbnRzO1xuIiwiaW1wb3J0IHVuZXNjYXBlIGZyb20gXCJsb2Rhc2gudW5lc2NhcGVcIjtcbmltcG9ydCBleHRyYWN0RGlyZWN0aXZlcyBmcm9tIFwiLi4vY29tbW9uL2V4dHJhY3REaXJlY3RpdmVzXCI7XG5pbXBvcnQgZXh0cmFjdExpbmtzIGZyb20gXCIuLi9jb21tb24vZXh0cmFjdExpbmtzXCI7XG5pbXBvcnQgc3RyaXBDb21tZW50cyBmcm9tIFwiLi4vY29tbW9uL3N0cmlwQ29tbWVudHNcIjtcblxuY29uc3QgZmluZFN0b3J5ID0gd2luID0+IHtcbiAgaWYgKHdpbiAmJiB3aW4uc3RvcnkpIHtcbiAgICByZXR1cm4gd2luLnN0b3J5O1xuICB9XG4gIHJldHVybiB7IHN0YXRlOiB7fSB9O1xufTtcblxuY29uc3QgcmVuZGVyUGFzc2FnZSA9IHBhc3NhZ2UgPT4ge1xuICBjb25zdCBzb3VyY2UgPSBwYXNzYWdlLnNvdXJjZTtcblxuICBjb25zdCBkaXJlY3RpdmVzID0gZXh0cmFjdERpcmVjdGl2ZXMoc291cmNlKTtcbiAgbGV0IHJlc3VsdCA9IHN0cmlwQ29tbWVudHMoc291cmNlKTtcblxuICBpZiAocGFzc2FnZSkge1xuICAgIC8vIHJlbW92ZSBsaW5rcyBpZiBzZXQgcHJldmlvdXNseVxuICAgIHBhc3NhZ2UubGlua3MgPSBbXTtcbiAgfVxuXG4gIC8vIFtbbGlua3NdXVxuICBjb25zdCBsaW5rRGF0YSA9IGV4dHJhY3RMaW5rcyhyZXN1bHQpO1xuICByZXN1bHQgPSBsaW5rRGF0YS51cGRhdGVkO1xuICBpZiAocGFzc2FnZSkge1xuICAgIHBhc3NhZ2UubGlua3MgPSBsaW5rRGF0YS5saW5rcztcbiAgfVxuXG4gIC8vIGJlZm9yZSBoYW5kbGluZyBhbnkgdGFncywgaGFuZGxlIGFueS9hbGwgZGlyZWN0aXZlc1xuICBkaXJlY3RpdmVzLmZvckVhY2goZCA9PiB7XG4gICAgaWYgKCFwYXNzYWdlLnN0b3J5LmRpcmVjdGl2ZXNbZC5uYW1lXSkgcmV0dXJuO1xuICAgIHBhc3NhZ2Uuc3RvcnkuZGlyZWN0aXZlc1tkLm5hbWVdLmZvckVhY2gocnVuID0+IHtcbiAgICAgIHJlc3VsdCA9IHJ1bihkLmNvbnRlbnQsIHJlc3VsdCwgcGFzc2FnZSwgcGFzc2FnZS5zdG9yeSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIGlmIHN5c3RlbSB0YWcsIHJldHVybiBhbiBlbXB0eSByZW5kZXIgc2V0XG4gIGlmIChwYXNzYWdlLmhhc1RhZyhcInN5c3RlbVwiKSkge1xuICAgIHJldHVybiB7XG4gICAgICBkaXJlY3RpdmVzLFxuICAgICAgdGV4dDogW10sXG4gICAgfTtcbiAgfVxuXG4gIC8vIGlmIHByb21wdCB0YWcgaXMgc2V0LCBub3RpZnkgdGhlIHN0b3J5XG4gIGlmIChwYXNzYWdlKSB7XG4gICAgY29uc3QgcHJvbXB0cyA9IHBhc3NhZ2UucHJlZml4VGFnKFwicHJvbXB0XCIpO1xuICAgIGlmIChwcm9tcHRzLmxlbmd0aCkge1xuICAgICAgcGFzc2FnZS5zdG9yeS5wcm9tcHQocHJvbXB0c1swXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gaWYgdGhpcyBpcyBhIG11bHRpbGluZSBpdGVtLCB0cmltLCBzcGxpdCwgYW5kIG1hcmsgZWFjaCBpdGVtXG4gIC8vIHJldHVybiB0aGUgYXJyYXlcbiAgaWYgKHBhc3NhZ2UuaGFzVGFnKFwibXVsdGlsaW5lXCIpKSB7XG4gICAgcmVzdWx0ID0gcmVzdWx0LnRyaW0oKTtcbiAgICByZXR1cm4ge1xuICAgICAgZGlyZWN0aXZlcyxcbiAgICAgIHRleHQ6IHJlc3VsdC5zcGxpdCgvW1xcclxcbl0rL2cpLFxuICAgIH07XG4gIH1cblxuICAvLyBlbHNlIHJldHVybnMgYW4gYXJyYXkgb2YgMVxuICByZXR1cm4ge1xuICAgIGRpcmVjdGl2ZXMsXG4gICAgdGV4dDogW3Jlc3VsdF0sXG4gIH07XG59O1xuXG5jbGFzcyBQYXNzYWdlIHtcbiAgaWQgPSBudWxsO1xuICBuYW1lID0gbnVsbDtcbiAgdGFncyA9IG51bGw7XG4gIHRhZ0RpY3QgPSB7fTtcbiAgc291cmNlID0gbnVsbDtcbiAgbGlua3MgPSBbXTtcblxuICBjb25zdHJ1Y3RvcihpZCwgbmFtZSwgdGFncywgc291cmNlLCBzdG9yeSkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMudGFncyA9IHRhZ3M7XG4gICAgdGhpcy5zb3VyY2UgPSB1bmVzY2FwZShzb3VyY2UpO1xuICAgIHRoaXMuc3RvcnkgPSBzdG9yeTtcblxuICAgIHRoaXMudGFncy5mb3JFYWNoKHQgPT4gKHRoaXMudGFnRGljdFt0XSA9IDEpKTtcbiAgfVxuXG4gIGdldFNwZWFrZXIgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3BlYWtlclRhZyA9IHRoaXMudGFncy5maW5kKHQgPT4gdC5pbmRleE9mKFwic3BlYWtlci1cIikgPT09IDApIHx8IFwiXCI7XG4gICAgY29uc3Qgc3lzdGVtVGFnID0gdGhpcy5oYXNUYWcoXCJzeXN0ZW1cIik7XG4gICAgaWYgKHNwZWFrZXJUYWcpIHJldHVybiBzcGVha2VyVGFnLnJlcGxhY2UoL15zcGVha2VyLS8sIFwiXCIpO1xuICAgIGlmIChzeXN0ZW1UYWcpIHJldHVybiBcInN5c3RlbVwiO1xuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIHByZWZpeFRhZyA9IChwZngsIGFzRGljdCkgPT5cbiAgICB0aGlzLnRhZ3NcbiAgICAgIC5maWx0ZXIodCA9PiB0LmluZGV4T2YoYCR7cGZ4fS1gKSA9PT0gMClcbiAgICAgIC5tYXAodCA9PiB0LnJlcGxhY2UoYCR7cGZ4fS1gLCBcIlwiKSlcbiAgICAgIC5yZWR1Y2UoXG4gICAgICAgIChhLCB0KSA9PiB7XG4gICAgICAgICAgaWYgKGFzRGljdClcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmEsXG4gICAgICAgICAgICAgIFt0XTogMSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICByZXR1cm4gWy4uLmEsIHRdO1xuICAgICAgICB9LFxuICAgICAgICBhc0RpY3QgPyB7fSA6IFtdXG4gICAgICApO1xuXG4gIGhhc1RhZyA9IHQgPT4gdGhpcy50YWdEaWN0W3RdO1xuXG4gIC8vIHN0YXRpYyBhbmQgaW5zdGFuY2UgcmVuZGVyc1xuICBzdGF0aWMgcmVuZGVyID0gc3RyID0+XG4gICAgcmVuZGVyUGFzc2FnZShcbiAgICAgIG5ldyBQYXNzYWdlKG51bGwsIG51bGwsIG51bGwsIHN0ciwgZmluZFN0b3J5KHdpbmRvdyB8fCBudWxsKSlcbiAgICApO1xuICByZW5kZXIgPSAoKSA9PiByZW5kZXJQYXNzYWdlKHRoaXMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBQYXNzYWdlO1xuIiwiLyoqXG4gKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIElORklOSVRZID0gMSAvIDA7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblxuLyoqIFVzZWQgdG8gbWF0Y2ggSFRNTCBlbnRpdGllcyBhbmQgSFRNTCBjaGFyYWN0ZXJzLiAqL1xudmFyIHJlVW5lc2NhcGVkSHRtbCA9IC9bJjw+XCInYF0vZyxcbiAgICByZUhhc1VuZXNjYXBlZEh0bWwgPSBSZWdFeHAocmVVbmVzY2FwZWRIdG1sLnNvdXJjZSk7XG5cbi8qKiBVc2VkIHRvIG1hcCBjaGFyYWN0ZXJzIHRvIEhUTUwgZW50aXRpZXMuICovXG52YXIgaHRtbEVzY2FwZXMgPSB7XG4gICcmJzogJyZhbXA7JyxcbiAgJzwnOiAnJmx0OycsXG4gICc+JzogJyZndDsnLFxuICAnXCInOiAnJnF1b3Q7JyxcbiAgXCInXCI6ICcmIzM5OycsXG4gICdgJzogJyYjOTY7J1xufTtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnByb3BlcnR5T2ZgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWNjZXNzb3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VQcm9wZXJ0eU9mKG9iamVjdCkge1xuICByZXR1cm4gZnVuY3Rpb24oa2V5KSB7XG4gICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG4gIH07XG59XG5cbi8qKlxuICogVXNlZCBieSBgXy5lc2NhcGVgIHRvIGNvbnZlcnQgY2hhcmFjdGVycyB0byBIVE1MIGVudGl0aWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gY2hyIFRoZSBtYXRjaGVkIGNoYXJhY3RlciB0byBlc2NhcGUuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIGNoYXJhY3Rlci5cbiAqL1xudmFyIGVzY2FwZUh0bWxDaGFyID0gYmFzZVByb3BlcnR5T2YoaHRtbEVzY2FwZXMpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgU3ltYm9sID0gcm9vdC5TeW1ib2w7XG5cbi8qKiBVc2VkIHRvIGNvbnZlcnQgc3ltYm9scyB0byBwcmltaXRpdmVzIGFuZCBzdHJpbmdzLiAqL1xudmFyIHN5bWJvbFByb3RvID0gU3ltYm9sID8gU3ltYm9sLnByb3RvdHlwZSA6IHVuZGVmaW5lZCxcbiAgICBzeW1ib2xUb1N0cmluZyA9IHN5bWJvbFByb3RvID8gc3ltYm9sUHJvdG8udG9TdHJpbmcgOiB1bmRlZmluZWQ7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udG9TdHJpbmdgIHdoaWNoIGRvZXNuJ3QgY29udmVydCBudWxsaXNoXG4gKiB2YWx1ZXMgdG8gZW1wdHkgc3RyaW5ncy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG4gIC8vIEV4aXQgZWFybHkgZm9yIHN0cmluZ3MgdG8gYXZvaWQgYSBwZXJmb3JtYW5jZSBoaXQgaW4gc29tZSBlbnZpcm9ubWVudHMuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBzeW1ib2xUb1N0cmluZyA/IHN5bWJvbFRvU3RyaW5nLmNhbGwodmFsdWUpIDogJyc7XG4gIH1cbiAgdmFyIHJlc3VsdCA9ICh2YWx1ZSArICcnKTtcbiAgcmV0dXJuIChyZXN1bHQgPT0gJzAnICYmICgxIC8gdmFsdWUpID09IC1JTkZJTklUWSkgPyAnLTAnIDogcmVzdWx0O1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQgZm9yIGBudWxsYFxuICogYW5kIGB1bmRlZmluZWRgIHZhbHVlcy4gVGhlIHNpZ24gb2YgYC0wYCBpcyBwcmVzZXJ2ZWQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9TdHJpbmcobnVsbCk7XG4gKiAvLyA9PiAnJ1xuICpcbiAqIF8udG9TdHJpbmcoLTApO1xuICogLy8gPT4gJy0wJ1xuICpcbiAqIF8udG9TdHJpbmcoWzEsIDIsIDNdKTtcbiAqIC8vID0+ICcxLDIsMydcbiAqL1xuZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IGJhc2VUb1N0cmluZyh2YWx1ZSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhlIGNoYXJhY3RlcnMgXCImXCIsIFwiPFwiLCBcIj5cIiwgJ1wiJywgXCInXCIsIGFuZCBcIlxcYFwiIGluIGBzdHJpbmdgIHRvXG4gKiB0aGVpciBjb3JyZXNwb25kaW5nIEhUTUwgZW50aXRpZXMuXG4gKlxuICogKipOb3RlOioqIE5vIG90aGVyIGNoYXJhY3RlcnMgYXJlIGVzY2FwZWQuIFRvIGVzY2FwZSBhZGRpdGlvbmFsXG4gKiBjaGFyYWN0ZXJzIHVzZSBhIHRoaXJkLXBhcnR5IGxpYnJhcnkgbGlrZSBbX2hlX10oaHR0cHM6Ly9tdGhzLmJlL2hlKS5cbiAqXG4gKiBUaG91Z2ggdGhlIFwiPlwiIGNoYXJhY3RlciBpcyBlc2NhcGVkIGZvciBzeW1tZXRyeSwgY2hhcmFjdGVycyBsaWtlXG4gKiBcIj5cIiBhbmQgXCIvXCIgZG9uJ3QgbmVlZCBlc2NhcGluZyBpbiBIVE1MIGFuZCBoYXZlIG5vIHNwZWNpYWwgbWVhbmluZ1xuICogdW5sZXNzIHRoZXkncmUgcGFydCBvZiBhIHRhZyBvciB1bnF1b3RlZCBhdHRyaWJ1dGUgdmFsdWUuIFNlZVxuICogW01hdGhpYXMgQnluZW5zJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2FtYmlndW91cy1hbXBlcnNhbmRzKVxuICogKHVuZGVyIFwic2VtaS1yZWxhdGVkIGZ1biBmYWN0XCIpIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogQmFja3RpY2tzIGFyZSBlc2NhcGVkIGJlY2F1c2UgaW4gSUUgPCA5LCB0aGV5IGNhbiBicmVhayBvdXQgb2ZcbiAqIGF0dHJpYnV0ZSB2YWx1ZXMgb3IgSFRNTCBjb21tZW50cy4gU2VlIFsjNTldKGh0dHBzOi8vaHRtbDVzZWMub3JnLyM1OSksXG4gKiBbIzEwMl0oaHR0cHM6Ly9odG1sNXNlYy5vcmcvIzEwMiksIFsjMTA4XShodHRwczovL2h0bWw1c2VjLm9yZy8jMTA4KSwgYW5kXG4gKiBbIzEzM10oaHR0cHM6Ly9odG1sNXNlYy5vcmcvIzEzMykgb2YgdGhlXG4gKiBbSFRNTDUgU2VjdXJpdHkgQ2hlYXRzaGVldF0oaHR0cHM6Ly9odG1sNXNlYy5vcmcvKSBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIFdoZW4gd29ya2luZyB3aXRoIEhUTUwgeW91IHNob3VsZCBhbHdheXNcbiAqIFtxdW90ZSBhdHRyaWJ1dGUgdmFsdWVzXShodHRwOi8vd29ua28uY29tL3Bvc3QvaHRtbC1lc2NhcGluZykgdG8gcmVkdWNlXG4gKiBYU1MgdmVjdG9ycy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgU3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBlc2NhcGUuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIHN0cmluZy5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5lc2NhcGUoJ2ZyZWQsIGJhcm5leSwgJiBwZWJibGVzJyk7XG4gKiAvLyA9PiAnZnJlZCwgYmFybmV5LCAmYW1wOyBwZWJibGVzJ1xuICovXG5mdW5jdGlvbiBlc2NhcGUoc3RyaW5nKSB7XG4gIHN0cmluZyA9IHRvU3RyaW5nKHN0cmluZyk7XG4gIHJldHVybiAoc3RyaW5nICYmIHJlSGFzVW5lc2NhcGVkSHRtbC50ZXN0KHN0cmluZykpXG4gICAgPyBzdHJpbmcucmVwbGFjZShyZVVuZXNjYXBlZEh0bWwsIGVzY2FwZUh0bWxDaGFyKVxuICAgIDogc3RyaW5nO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVzY2FwZTtcbiIsImltcG9ydCBQYXNzYWdlIGZyb20gXCIuL1Bhc3NhZ2VcIjtcbmltcG9ydCBlc2NhcGUgZnJvbSBcImxvZGFzaC5lc2NhcGVcIjtcbmltcG9ydCB1bmVzY2FwZSBmcm9tIFwibG9kYXNoLnVuZXNjYXBlXCI7XG5cbmNvbnN0IHNlbGVjdFBhc3NhZ2VzID0gXCJ0dy1wYXNzYWdlZGF0YVwiO1xuY29uc3Qgc2VsZWN0Q3NzID0gJypbdHlwZT1cInRleHQvdHdpbmUtY3NzXCJdJztcbmNvbnN0IHNlbGVjdEpzID0gJypbdHlwZT1cInRleHQvdHdpbmUtamF2YXNjcmlwdFwiXSc7XG5jb25zdCBzZWxlY3RBY3RpdmVMaW5rID0gXCIjdXNlci1yZXNwb25zZS1wYW5lbCBhW2RhdGEtcGFzc2FnZV1cIjtcbmNvbnN0IHNlbGVjdEFjdGl2ZUJ1dHRvbiA9IFwiI3VzZXItcmVzcG9uc2UtcGFuZWwgYnV0dG9uW2RhdGEtcGFzc2FnZV1cIjtcbmNvbnN0IHNlbGVjdEFjdGl2ZUlucHV0ID0gXCIjdXNlci1yZXNwb25zZS1wYW5lbCBpbnB1dFwiO1xuY29uc3Qgc2VsZWN0QWN0aXZlID0gXCIuY2hhdC1wYW5lbCAuYWN0aXZlXCI7XG5jb25zdCBzZWxlY3RIaXN0b3J5ID0gXCIuY2hhdC1wYW5lbCAuaGlzdG9yeVwiO1xuY29uc3Qgc2VsZWN0UmVzcG9uc2VzID0gXCIjdXNlci1yZXNwb25zZS1wYW5lbFwiO1xuY29uc3QgdHlwaW5nSW5kaWNhdG9yID0gXCIjYW5pbWF0aW9uLWNvbnRhaW5lclwiO1xuXG5jb25zdCBJU19OVU1FUklDID0gL15bXFxkXSskLztcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSBwcm92aWRlZCBzdHJpbmcgY29udGFpbnMgb25seSBudW1iZXJzXG4gKiBJbiB0aGUgY2FzZSBvZiBgcGlkYCB2YWx1ZXMgZm9yIHBhc3NhZ2VzLCB0aGlzIGlzIHRydWVcbiAqL1xuY29uc3QgaXNOdW1lcmljID0gZCA9PiBJU19OVU1FUklDLnRlc3QoZCk7XG5cbi8qKlxuICogRm9ybWF0IGEgdXNlciBwYXNzYWdlIChzdWNoIGFzIGEgcmVzcG9uc2UpXG4gKi9cbmNvbnN0IFVTRVJfUEFTU0FHRV9UTVBMID0gKHsgaWQsIHRleHQgfSkgPT4gYFxuICA8ZGl2IGNsYXNzPVwiY2hhdC1wYXNzYWdlLXdyYXBwZXJcIiBkYXRhLXNwZWFrZXI9XCJ5b3VcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY2hhdC1wYXNzYWdlIHBoaXN0b3J5XCIgZGF0YS1zcGVha2VyPVwieW91XCIgZGF0YS11cGFzc2FnZT1cIiR7aWR9XCI+XG4gICAgICAke3RleHR9XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuYDtcblxuLyoqXG4gKiBGb3JtYXQgYSBtZXNzYWdlIGZyb20gYSBub24tdXNlclxuICovXG5jb25zdCBPVEhFUl9QQVNTQUdFX1RNUEwgPSAoeyBzcGVha2VyLCB0YWdzLCB0ZXh0IH0pID0+IGBcbiAgPGRpdiBkYXRhLXNwZWFrZXI9XCIke3NwZWFrZXJ9XCIgY2xhc3M9XCJjaGF0LXBhc3NhZ2Utd3JhcHBlciAke3RhZ3Muam9pbihcIiBcIil9XCI+XG4gICAgPGRpdiBkYXRhLXNwZWFrZXI9XCIke3NwZWFrZXJ9XCIgY2xhc3M9XCJjaGF0LXBhc3NhZ2VcIj5cbiAgICAgICR7dGV4dH1cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG5gO1xuXG5jb25zdCBESVJFQ1RJVkVTX1RNUEwgPSBkaXJlY3RpdmVzID0+IGBcbiAgPGRpdiBjbGFzcz1cImRpcmVjdGl2ZXNcIj5cbiAgICAke2RpcmVjdGl2ZXNcbiAgICAgIC5tYXAoXG4gICAgICAgICh7IG5hbWUsIGNvbnRlbnQgfSkgPT5cbiAgICAgICAgICBgPGRpdiBjbGFzcz1cImRpcmVjdGl2ZVwiIG5hbWU9XCIke25hbWV9XCI+JHtjb250ZW50LnRyaW0oKX08L2Rpdj5gXG4gICAgICApXG4gICAgICAuam9pbihcIlwiKX1cbiAgPC9kaXY+XG5gO1xuXG4vKipcbiAqIEZvcmNlcyBhIGRlbGF5IHZpYSBwcm9taXNlcyBpbiBvcmRlciB0byBzcHJlYWQgb3V0IG1lc3NhZ2VzXG4gKi9cbmNvbnN0IGRlbGF5ID0gYXN5bmMgKHQgPSAwKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdCkpO1xuXG4vLyBGaW5kIG9uZS9tYW55IG5vZGVzIHdpdGhpbiBhIGNvbnRleHQuIFdlIFsuLi5maW5kQWxsXSB0byBlbnN1cmUgd2UncmUgY2FzdCBhcyBhbiBhcnJheVxuLy8gbm90IGFzIGEgbm9kZSBsaXN0XG5jb25zdCBmaW5kID0gKGN0eCwgcykgPT4gY3R4LnF1ZXJ5U2VsZWN0b3Iocyk7XG5jb25zdCBmaW5kQWxsID0gKGN0eCwgcykgPT4gWy4uLmN0eC5xdWVyeVNlbGVjdG9yQWxsKHMpXSB8fCBbXTtcblxuLyoqXG4gKiBTdGFuZGFyZCBUd2luZSBGb3JtYXQgU3RvcnkgT2JqZWN0XG4gKi9cbmNsYXNzIFN0b3J5IHtcbiAgdmVyc2lvbiA9IDI7IC8vIFR3aW5lIHYyXG5cbiAgZG9jdW1lbnQgPSBudWxsO1xuICBzdG9yeSA9IG51bGw7XG4gIG5hbWUgPSBcIlwiO1xuICBzdGFydHNBdCA9IDA7XG4gIGN1cnJlbnQgPSAwO1xuICBoaXN0b3J5ID0gW107XG4gIHBhc3NhZ2VzID0ge307XG4gIHNob3dQcm9tcHQgPSBmYWxzZTtcbiAgZXJyb3JNZXNzYWdlID0gXCJcXHUyNmEwICVzXCI7XG5cbiAgZGlyZWN0aXZlcyA9IHt9O1xuICBlbGVtZW50cyA9IHt9O1xuXG4gIHVzZXJTY3JpcHRzID0gW107XG4gIHVzZXJTdHlsZXMgPSBbXTtcblxuICBjb25zdHJ1Y3Rvcih3aW4sIHNyYykge1xuICAgIHRoaXMud2luZG93ID0gd2luO1xuXG4gICAgaWYgKHNyYykge1xuICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcbiAgICAgICAgXCJDaGF0Ym9vayBJbmplY3RlZCBDb250ZW50XCJcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICB9XG5cbiAgICB0aGlzLnN0b3J5ID0gZmluZCh0aGlzLmRvY3VtZW50LCBcInR3LXN0b3J5ZGF0YVwiKTtcblxuICAgIC8vIGVsZW1lbnRzXG4gICAgdGhpcy5lbGVtZW50cyA9IHtcbiAgICAgIGFjdGl2ZTogZmluZCh0aGlzLmRvY3VtZW50LCBzZWxlY3RBY3RpdmUpLFxuICAgICAgaGlzdG9yeTogZmluZCh0aGlzLmRvY3VtZW50LCBzZWxlY3RIaXN0b3J5KSxcbiAgICB9O1xuXG4gICAgLy8gcHJvcGVydGllcyBvZiBzdG9yeSBub2RlXG4gICAgdGhpcy5uYW1lID0gdGhpcy5zdG9yeS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpIHx8IFwiXCI7XG4gICAgdGhpcy5zdGFydHNBdCA9IHRoaXMuc3RvcnkuZ2V0QXR0cmlidXRlKFwic3RhcnRub2RlXCIpIHx8IDA7XG5cbiAgICBmaW5kQWxsKHRoaXMuc3RvcnksIHNlbGVjdFBhc3NhZ2VzKS5mb3JFYWNoKHAgPT4ge1xuICAgICAgY29uc3QgaWQgPSBwYXJzZUludChwLmdldEF0dHJpYnV0ZShcInBpZFwiKSk7XG4gICAgICBjb25zdCBuYW1lID0gcC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xuICAgICAgY29uc3QgdGFncyA9IChwLmdldEF0dHJpYnV0ZShcInRhZ3NcIikgfHwgXCJcIikuc3BsaXQoL1xccysvZyk7XG4gICAgICBjb25zdCBwYXNzYWdlID0gcC5pbm5lckhUTUwgfHwgXCJcIjtcblxuICAgICAgdGhpcy5wYXNzYWdlc1tpZF0gPSBuZXcgUGFzc2FnZShpZCwgbmFtZSwgdGFncywgcGFzc2FnZSwgdGhpcyk7XG4gICAgfSk7XG5cbiAgICBmaW5kKHRoaXMuZG9jdW1lbnQsIFwidGl0bGVcIikuaW5uZXJIVE1MID0gdGhpcy5uYW1lO1xuICAgIGZpbmQodGhpcy5kb2N1bWVudCwgXCIjcHRpdGxlXCIpLmlubmVySFRNTCA9IHRoaXMubmFtZTtcblxuICAgIHRoaXMudXNlclNjcmlwdHMgPSAoZmluZEFsbCh0aGlzLmRvY3VtZW50LCBzZWxlY3RKcykgfHwgW10pLm1hcChcbiAgICAgIGVsID0+IGVsLmlubmVySFRNTFxuICAgICk7XG4gICAgdGhpcy51c2VyU3R5bGVzID0gKGZpbmRBbGwodGhpcy5kb2N1bWVudCwgc2VsZWN0Q3NzKSB8fCBbXSkubWFwKFxuICAgICAgZWwgPT4gZWwuaW5uZXJIVE1MXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIHN0b3J5IGJ5IHNldHRpbmcgdXAgbGlzdGVuZXJzIGFuZCB0aGVuIGFkdmFuY2luZ1xuICAgKiB0byB0aGUgZmlyc3QgaXRlbSBpbiB0aGUgc3RhY2tcbiAgICovXG4gIHN0YXJ0ID0gKCkgPT4ge1xuICAgIC8vIGFjdGl2YXRlIHVzZXJzY3JpcHRzIGFuZCBzdHlsZXNcbiAgICB0aGlzLnVzZXJTdHlsZXMuZm9yRWFjaChzID0+IHtcbiAgICAgIGNvbnN0IHQgPSB0aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgIHQuaW5uZXJIVE1MID0gcztcbiAgICAgIHRoaXMuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0KTtcbiAgICB9KTtcbiAgICB0aGlzLnVzZXJTY3JpcHRzLmZvckVhY2gocyA9PiB7XG4gICAgICAvLyBldmFsIGlzIGV2aWwsIGJ1dCB0aGlzIGlzIHNpbXBseSBob3cgVHdpbmUgd29ya3NcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgIGdsb2JhbEV2YWwocyk7XG4gICAgfSk7XG5cbiAgICAvLyB3aGVuIHlvdSBjbGljayBvbiBhW2RhdGEtcGFzc2FnZV0gKHJlc3BvbnNlIGxpbmspLi4uXG4gICAgdGhpcy5kb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcbiAgICAgIGlmICghZS50YXJnZXQubWF0Y2hlcyhzZWxlY3RBY3RpdmVMaW5rKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYWR2YW5jZShcbiAgICAgICAgdGhpcy5maW5kUGFzc2FnZShlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBhc3NhZ2VcIikpLFxuICAgICAgICBlLnRhcmdldC5pbm5lckhUTUxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICAvLyB3aGVuIHlvdSBjbGljayBvbiBidXR0b25bZGF0YS1wYXNzYWdlXSAocmVzcG9uc2UgaW5wdXQpLi4uXG4gICAgdGhpcy5kb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcbiAgICAgIGlmICghZS50YXJnZXQubWF0Y2hlcyhzZWxlY3RBY3RpdmVCdXR0b24pKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gY2FwdHVyZSBhbmQgZGlzYWJsZSBzaG93UHJvbXB0IGZlYXR1cmVcbiAgICAgIGNvbnN0IHZhbHVlID0gZmluZCh0aGlzLmRvY3VtZW50LCBzZWxlY3RBY3RpdmVJbnB1dCkudmFsdWU7XG4gICAgICB0aGlzLnNob3dQcm9tcHQgPSBmYWxzZTtcblxuICAgICAgdGhpcy5hZHZhbmNlKFxuICAgICAgICB0aGlzLmZpbmRQYXNzYWdlKGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtcGFzc2FnZVwiKSksXG4gICAgICAgIHZhbHVlXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZHZhbmNlKHRoaXMuZmluZFBhc3NhZ2UodGhpcy5zdGFydHNBdCkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBGaW5kIGEgcGFzc2FnZSBiYXNlZCBvbiBpdHMgaWQgb3IgbmFtZVxuICAgKi9cbiAgZmluZFBhc3NhZ2UgPSBpZE9yTmFtZSA9PiB7XG4gICAgaWYgKGlzTnVtZXJpYyhpZE9yTmFtZSkpIHtcbiAgICAgIHJldHVybiB0aGlzLnBhc3NhZ2VzW2lkT3JOYW1lXTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaGFuZGxlIHBhc3NhZ2VzIHdpdGggJyBhbmQgXCIgKGNhbid0IHVzZSBhIGNzcyBzZWxlY3RvciBjb25zaXN0ZW50bHkpXG4gICAgICBjb25zdCBwID0gZmluZEFsbCh0aGlzLnN0b3J5LCBcInR3LXBhc3NhZ2VkYXRhXCIpLmZpbHRlcihcbiAgICAgICAgcCA9PiB1bmVzY2FwZShwLmdldEF0dHJpYnV0ZShcIm5hbWVcIikpID09PSBpZE9yTmFtZVxuICAgICAgKVswXTtcbiAgICAgIGlmICghcCkgcmV0dXJuIG51bGw7XG4gICAgICByZXR1cm4gdGhpcy5wYXNzYWdlc1twLmdldEF0dHJpYnV0ZShcInBpZFwiKV07XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBBZHZhbmNlIHRoZSBzdG9yeSB0byB0aGUgcGFzc2FnZSBzcGVjaWZpZWQsIG9wdGlvbmFsbHkgYWRkaW5nIHVzZXJUZXh0XG4gICAqL1xuICBhZHZhbmNlID0gYXN5bmMgKHBhc3NhZ2UsIHVzZXJUZXh0ID0gbnVsbCkgPT4ge1xuICAgIHRoaXMuaGlzdG9yeS5wdXNoKHBhc3NhZ2UuaWQpO1xuICAgIGNvbnN0IGxhc3QgPSB0aGlzLmN1cnJlbnQ7XG5cbiAgICAvLyAuYWN0aXZlIGlzIGNhcHR1cmVkICYgY2xlYXJlZFxuICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5lbGVtZW50cy5hY3RpdmUuaW5uZXJIVE1MO1xuICAgIHRoaXMuZWxlbWVudHMuYWN0aXZlLmlubmVySFRNTCA9IFwiXCI7XG5cbiAgICAvLyB3aGF0ZXZlciB3YXMgaW4gYWN0aXZlIGlzIG1vdmVkIHVwIGludG8gaGlzdG9yeVxuICAgIHRoaXMuZWxlbWVudHMuaGlzdG9yeS5pbm5lckhUTUwgKz0gZXhpc3Rpbmc7XG5cbiAgICAvLyBpZiB0aGVyZSBpcyB1c2VyVGV4dCwgaXQgaXMgYWRkZWQgdG8gLmhpc3RvcnlcbiAgICBpZiAodXNlclRleHQpIHtcbiAgICAgIHRoaXMucmVuZGVyVXNlck1lc3NhZ2UoXG4gICAgICAgIGxhc3QsXG4gICAgICAgIHVzZXJUZXh0LFxuICAgICAgICBzID0+ICh0aGlzLmVsZW1lbnRzLmhpc3RvcnkuaW5uZXJIVE1MICs9IHMpXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFRoZSBuZXcgcGFzc2FnZSBpcyByZW5kZXJlZCBhbmQgcGxhY2VkIGluIC5hY3RpdmVcbiAgICAvLyBhZnRlciBhbGwgcmVuZGVycywgdXNlciBvcHRpb25zIGFyZSBkaXNwbGF5ZWRcbiAgICBhd2FpdCB0aGlzLnJlbmRlclBhc3NhZ2UoXG4gICAgICBwYXNzYWdlLFxuICAgICAgcyA9PiAodGhpcy5lbGVtZW50cy5hY3RpdmUuaW5uZXJIVE1MICs9IHMpXG4gICAgKTtcblxuICAgIGlmICghcGFzc2FnZS5oYXNUYWcoXCJ3YWl0XCIpICYmIHBhc3NhZ2UubGlua3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAvLyBhdXRvIGFkdmFuY2UgaWYgdGhlIHdhaXQgdGFnIGlzIG5vdCBzZXQgYW5kIHRoZXJlIGlzIGV4YWN0bHlcbiAgICAgIC8vIDEgbGluayBmb3VuZCBpbiBvdXIgcHNzYWdlLlxuICAgICAgdGhpcy5hZHZhbmNlKHRoaXMuZmluZFBhc3NhZ2UocGFzc2FnZS5saW5rc1swXS50YXJnZXQpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlckNob2ljZXMocGFzc2FnZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbmRlciB0ZXh0IGFzIGlmIGl0IGNhbWUgZnJvbSB0aGUgdXNlclxuICAgKi9cbiAgcmVuZGVyVXNlck1lc3NhZ2UgPSBhc3luYyAocGlkLCB0ZXh0LCByZW5kZXJlcikgPT4ge1xuICAgIGF3YWl0IHJlbmRlcmVyKFxuICAgICAgVVNFUl9QQVNTQUdFX1RNUEwoe1xuICAgICAgICBwaWQsXG4gICAgICAgIHRleHQsXG4gICAgICB9KVxuICAgICk7XG4gICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVuZGVyIGEgVHdpbmUrQ2hhdGJvb2sgcGFzc2FnZSBvYmplY3RcbiAgICovXG4gIHJlbmRlclBhc3NhZ2UgPSBhc3luYyAocGFzc2FnZSwgcmVuZGVyZXIpID0+IHtcbiAgICBjb25zdCBzcGVha2VyID0gcGFzc2FnZS5nZXRTcGVha2VyKCk7XG4gICAgbGV0IHN0YXRlbWVudHMgPSBwYXNzYWdlLnJlbmRlcigpO1xuICAgIGNvbnNvbGUubG9nKHN0YXRlbWVudHMuZGlyZWN0aXZlcyk7XG5cbiAgICBhd2FpdCByZW5kZXJlcihESVJFQ1RJVkVTX1RNUEwoc3RhdGVtZW50cy5kaXJlY3RpdmVzKSk7XG5cbiAgICBsZXQgbmV4dCA9IHN0YXRlbWVudHMudGV4dC5zaGlmdCgpO1xuICAgIHRoaXMuc2hvd1R5cGluZygpO1xuICAgIHdoaWxlIChuZXh0KSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gT1RIRVJfUEFTU0FHRV9UTVBMKHtcbiAgICAgICAgc3BlYWtlcixcbiAgICAgICAgdGFnczogcGFzc2FnZS50YWdzLFxuICAgICAgICB0ZXh0OiBuZXh0LFxuICAgICAgfSk7XG4gICAgICBhd2FpdCBkZWxheSh0aGlzLmNhbGN1bGF0ZURlbGF5KG5leHQpKTsgLy8gdG9kb1xuICAgICAgYXdhaXQgcmVuZGVyZXIoY29udGVudCk7XG4gICAgICBuZXh0ID0gc3RhdGVtZW50cy50ZXh0LnNoaWZ0KCk7XG4gICAgfVxuICAgIHRoaXMuaGlkZVR5cGluZygpO1xuICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfTtcblxuICAvKipcbiAgICogQSByb3VnaCBmdW5jdGlvbiBmb3IgZGV0ZXJtaW5pbmcgYSB3YWl0aW5nIHBlcmlvZCBiYXNlZCBvbiBzdHJpbmcgbGVuZ3RoXG4gICAqL1xuICBjYWxjdWxhdGVEZWxheSA9IHR4dCA9PiB7XG4gICAgY29uc3QgdHlwaW5nRGVsYXlSYXRpbyA9IDAuMztcbiAgICBjb25zdCByYXRlID0gMjA7IC8vIG1zXG4gICAgcmV0dXJuIHR4dC5sZW5ndGggKiByYXRlICogdHlwaW5nRGVsYXlSYXRpbztcbiAgfTtcblxuICAvKipcbiAgICogU2hvd3MgdGhlIHR5cGluZyBpbmRpY2F0b3JcbiAgICovXG4gIHNob3dUeXBpbmcgPSAoKSA9PiB7XG4gICAgZmluZCh0aGlzLmRvY3VtZW50LCB0eXBpbmdJbmRpY2F0b3IpLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcbiAgfTtcblxuICAvKipcbiAgICogSGlkZXMgdGhlIHR5cGluZyBpbmRpY2F0b3JcbiAgICovXG4gIGhpZGVUeXBpbmcgPSAoKSA9PiB7XG4gICAgZmluZCh0aGlzLmRvY3VtZW50LCB0eXBpbmdJbmRpY2F0b3IpLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTY3JvbGxzIHRoZSBkb2N1bWVudCBhcyBmYXIgYXMgcG9zc2libGUgKGJhc2VkIG9uIGhpc3RvcnkgY29udGFpbmVyJ3MgaGVpZ2h0KVxuICAgKi9cbiAgc2Nyb2xsVG9Cb3R0b20gPSAoKSA9PiB7XG4gICAgY29uc3QgaGlzdCA9IGZpbmQodGhpcy5kb2N1bWVudCwgXCIjcGhpc3RvcnlcIik7XG4gICAgZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudC5zY3JvbGxUb3AgPSBoaXN0Lm9mZnNldEhlaWdodDtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSBjaG9pY2VzIHBhbmVsXG4gICAqL1xuICByZW1vdmVDaG9pY2VzID0gKCkgPT4ge1xuICAgIGNvbnN0IHBhbmVsID0gZmluZCh0aGlzLmRvY3VtZW50LCBzZWxlY3RSZXNwb25zZXMpO1xuICAgIHBhbmVsLmlubmVySFRNTCA9IFwiXCI7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGNob2ljZXMgcGFuZWwgd2l0aCBhIHNldCBvZiBvcHRpb25zIGJhc2VkIG9uIHBhc3NhZ2UgbGlua3NcbiAgICovXG4gIHJlbmRlckNob2ljZXMgPSBwYXNzYWdlID0+IHtcbiAgICB0aGlzLnJlbW92ZUNob2ljZXMoKTtcbiAgICBjb25zdCBwYW5lbCA9IGZpbmQodGhpcy5kb2N1bWVudCwgc2VsZWN0UmVzcG9uc2VzKTtcbiAgICBwYXNzYWdlLmxpbmtzLmZvckVhY2gobCA9PiB7XG4gICAgICBwYW5lbC5pbm5lckhUTUwgKz0gYDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIiBjbGFzcz1cInVzZXItcmVzcG9uc2VcIiBkYXRhLXBhc3NhZ2U9XCIke2VzY2FwZShcbiAgICAgICAgbC50YXJnZXRcbiAgICAgICl9XCI+JHtsLmRpc3BsYXl9PC9hPmA7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGN1c3RvbSBkaXJlY3RpdmUgZm9yIHRoaXMgc3RvcnlcbiAgICogU2lnbmF0dXJlIG9mIChkaXJlY3RpdmVDb250ZW50LCBvdXRwdXRUZXh0LCBzdG9yeSwgcGFzc2FnZSwgbmV4dClcbiAgICovXG4gIGRpcmVjdGl2ZSA9IChpZCwgY2IpID0+IHtcbiAgICBpZiAoIXRoaXMuZGlyZWN0aXZlc1tpZF0pIHtcbiAgICAgIHRoaXMuZGlyZWN0aXZlc1tpZF0gPSBbXTtcbiAgICB9XG4gICAgdGhpcy5kaXJlY3RpdmVzW2lkXS5wdXNoKGNiKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgU3Rvcnk7XG4iLCJpbXBvcnQgU3RvcnkgZnJvbSBcIi4vU3RvcnlcIjtcblxuKHdpbiA9PiB7XG4gIGlmICh0eXBlb2Ygd2luICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgd2luLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB3aW4uZ2xvYmFsRXZhbCA9IGV2YWw7XG4gICAgICB3aW4uc3RvcnkgPSBuZXcgU3Rvcnkod2luKTtcbiAgICAgIGlmICh3aW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzaG93X2RpcmVjdGl2ZXNcIikuY2hlY2tlZCkge1xuICAgICAgICB3aW4uZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwic2hvdy1kaXJlY3RpdmVzXCIpO1xuICAgICAgfVxuICAgICAgd2luLnN0b3J5LnN0YXJ0KCk7XG4gICAgfSk7XG5cbiAgICB3aW4uZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI3Nob3dfZGlyZWN0aXZlc1wiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZSA9PiB7XG4gICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkKSB7XG4gICAgICAgICAgd2luLmRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcInNob3ctZGlyZWN0aXZlc1wiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3aW4uZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvdy1kaXJlY3RpdmVzXCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxufSkod2luZG93IHx8IHVuZGVmaW5lZCk7XG4iXSwibmFtZXMiOlsiZ2xvYmFsIiwiVE9LRU5fRVNDQVBFRF9PQ1RPIiwiQkxPQ0tfRElSRUNUSVZFIiwiSU5MSU5FX0RJUkVDVElWRSIsImV4dHJhY3REaXJlY3RpdmVzIiwicyIsImRpcmVjdGl2ZXMiLCJyZXBsYWNlIiwibWF0Y2giLCJkaXIiLCJjb250ZW50IiwicHVzaCIsIm5hbWUiLCJ0cmltIiwiTElOS19QQVRURVJOIiwiZXh0cmFjdExpbmtzIiwic3RyIiwibGlua3MiLCJvcmlnaW5hbCIsInQiLCJkaXNwbGF5IiwidGFyZ2V0IiwiYmFySW5kZXgiLCJpbmRleE9mIiwicmlnaHRBcnJJbmRleCIsImxlZnRBcnJJbmRleCIsInN1YnN0ciIsInVwZGF0ZWQiLCJCTE9DS19DT01NRU5UIiwiSU5MSU5FX0NPTU1FTlQiLCJzdHJpcENvbW1lbnRzIiwiZmluZFN0b3J5Iiwid2luIiwic3RvcnkiLCJzdGF0ZSIsInJlbmRlclBhc3NhZ2UiLCJwYXNzYWdlIiwic291cmNlIiwicmVzdWx0IiwibGlua0RhdGEiLCJmb3JFYWNoIiwiZCIsInJ1biIsImhhc1RhZyIsInRleHQiLCJwcm9tcHRzIiwicHJlZml4VGFnIiwibGVuZ3RoIiwicHJvbXB0Iiwic3BsaXQiLCJQYXNzYWdlIiwiY29uc3RydWN0b3IiLCJpZCIsInRhZ3MiLCJzcGVha2VyVGFnIiwiZmluZCIsInN5c3RlbVRhZyIsInBmeCIsImFzRGljdCIsImZpbHRlciIsIm1hcCIsInJlZHVjZSIsImEiLCJ0YWdEaWN0IiwidW5lc2NhcGUiLCJ3aW5kb3ciLCJJTkZJTklUWSIsInN5bWJvbFRhZyIsImZyZWVHbG9iYWwiLCJmcmVlU2VsZiIsInJvb3QiLCJiYXNlUHJvcGVydHlPZiIsIm9iamVjdFByb3RvIiwib2JqZWN0VG9TdHJpbmciLCJTeW1ib2wiLCJzeW1ib2xQcm90byIsInN5bWJvbFRvU3RyaW5nIiwiYmFzZVRvU3RyaW5nIiwiaXNTeW1ib2wiLCJpc09iamVjdExpa2UiLCJ0b1N0cmluZyIsInNlbGVjdFBhc3NhZ2VzIiwic2VsZWN0Q3NzIiwic2VsZWN0SnMiLCJzZWxlY3RBY3RpdmVMaW5rIiwic2VsZWN0QWN0aXZlQnV0dG9uIiwic2VsZWN0QWN0aXZlSW5wdXQiLCJzZWxlY3RBY3RpdmUiLCJzZWxlY3RIaXN0b3J5Iiwic2VsZWN0UmVzcG9uc2VzIiwidHlwaW5nSW5kaWNhdG9yIiwiSVNfTlVNRVJJQyIsImlzTnVtZXJpYyIsInRlc3QiLCJVU0VSX1BBU1NBR0VfVE1QTCIsIk9USEVSX1BBU1NBR0VfVE1QTCIsInNwZWFrZXIiLCJqb2luIiwiRElSRUNUSVZFU19UTVBMIiwiZGVsYXkiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJjdHgiLCJxdWVyeVNlbGVjdG9yIiwiZmluZEFsbCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJTdG9yeSIsInNyYyIsInVzZXJTdHlsZXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJ1c2VyU2NyaXB0cyIsImdsb2JhbEV2YWwiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsIm1hdGNoZXMiLCJhZHZhbmNlIiwiZmluZFBhc3NhZ2UiLCJnZXRBdHRyaWJ1dGUiLCJ2YWx1ZSIsInNob3dQcm9tcHQiLCJzdGFydHNBdCIsImlkT3JOYW1lIiwicGFzc2FnZXMiLCJwIiwidXNlclRleHQiLCJoaXN0b3J5IiwibGFzdCIsImN1cnJlbnQiLCJleGlzdGluZyIsImVsZW1lbnRzIiwiYWN0aXZlIiwicmVuZGVyVXNlck1lc3NhZ2UiLCJyZW5kZXJDaG9pY2VzIiwicGlkIiwicmVuZGVyZXIiLCJzY3JvbGxUb0JvdHRvbSIsImdldFNwZWFrZXIiLCJzdGF0ZW1lbnRzIiwicmVuZGVyIiwiY29uc29sZSIsImxvZyIsIm5leHQiLCJzaGlmdCIsInNob3dUeXBpbmciLCJjYWxjdWxhdGVEZWxheSIsImhpZGVUeXBpbmciLCJ0eHQiLCJ0eXBpbmdEZWxheVJhdGlvIiwicmF0ZSIsInN0eWxlIiwidmlzaWJpbGl0eSIsImhpc3QiLCJzY3JvbGxpbmdFbGVtZW50Iiwic2Nyb2xsVG9wIiwib2Zmc2V0SGVpZ2h0IiwicGFuZWwiLCJyZW1vdmVDaG9pY2VzIiwibCIsImVzY2FwZSIsImNiIiwiaW1wbGVtZW50YXRpb24iLCJjcmVhdGVIVE1MRG9jdW1lbnQiLCJwYXJzZUludCIsImVsIiwiZXZlbnQiLCJldmFsIiwiY2hlY2tlZCIsImNsYXNzTGlzdCIsImFkZCIsInN0YXJ0IiwicmVtb3ZlIiwidW5kZWZpbmVkIl0sIm1hcHBpbmdzIjoiOzs7OztFQUFBLFNBQVMsZUFBZSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFO0lBQ3hDLElBQUksR0FBRyxJQUFJLEdBQUcsRUFBRTtNQUNkLE1BQU0sQ0FBQyxjQUFjLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRTtRQUM5QixLQUFLLEVBQUUsS0FBSztRQUNaLFVBQVUsRUFBRSxJQUFJO1FBQ2hCLFlBQVksRUFBRSxJQUFJO1FBQ2xCLFFBQVEsRUFBRSxJQUFJO09BQ2YsQ0FBQyxDQUFDO0tBQ0osTUFBTTtNQUNMLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUM7S0FDbEI7O0lBRUQsT0FBTyxHQUFHLENBQUM7R0FDWjs7RUFFRCxrQkFBYyxHQUFHLGVBQWU7Ozs7RUNmaEM7Ozs7Ozs7Ozs7RUFVQSxJQUFJLFFBQVEsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDOzs7RUFHckIsSUFBSSxTQUFTLEdBQUcsaUJBQWlCLENBQUM7OztFQUdsQyxJQUFJLGFBQWEsR0FBRywrQkFBK0I7TUFDL0MsZ0JBQWdCLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQzs7O0VBR3BELElBQUksYUFBYSxHQUFHO0lBQ2xCLE9BQU8s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
</script>
  </body>
</html>
