<!DOCTYPE html>
<html>
  <head>
    <title>
      onboarding_example
    </title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="icon" href="favicon.ico" />

    <!-- Bootstrap core CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
      integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
      crossorigin="anonymous"
    />

    <style>
      /* Variables */

      :root {
        --navbar-height: 56px;
        --user-response-panel-height: 110px;
        --bg-color: #c7bdb5; /*global chat bg color*/
        --user-color: #417505; /*user name & placeholder avatar bg*/
        --speaker-color: #888; /*default color for speaker name & placeholder avatar bg*/
        --sidebar-bg-color: #fff;
        --navbar-bg-color: #fff;
        --passage-bg-color: #fff;
        --passage-text-color: #000;
      }

      /* Atomic Utilities */

      .bg-color {
        background-color: var(--bg-color);
      }

      .minh-full {
        min-height: calc(
          100vh - var(--navbar-height) - var(--user-response-panel-height) -
            17px - 5px
        );
      }

      .ml--3 {
        margin-left: -1rem !important;
      }

      @media (min-width: 992px) {
        .w-lg-auto {
          width: auto !important;
        }
      }

      /* General */

      html,
      body {
        overflow-x: hidden; /* Prevent scroll on narrow devices */
        position: relative;
        min-height: 100%;
      }

      body {
        padding-top: var(--navbar-height);
        margin-bottom: calc(
          var(--user-response-panel-height) + 18px + 5px
        ); /* + height of hint + hr */
      }

      /* Offcanvas sidebar */

      @media (max-width: 991.98px) {
        .offcanvas-collapse {
          z-index: 1100;
          position: fixed;
          top: var(--navbar-height); /* Height of navbar */
          bottom: 0;
          left: 100%;
          width: 100%;
          padding-right: 1rem;
          padding-left: 1rem;
          overflow-y: auto;
          visibility: hidden;
          background-color: var(--sidebar-bg-color);
          transition-timing-function: ease-in-out;
          transition-duration: 0.3s;
          transition-property: left, visibility;
        }
        .offcanvas-collapse.open {
          left: 0;
          visibility: visible;
        }
      }

      /* Nav */

      nav.navbar {
        height: var(--navbar-height);
        background-color: var(--navbar-bg-color);
        padding: 0.5rem 15px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      nav .nav-title {
        font-size: 1.5rem;
        line-height: 40px;
        margin: 0 auto;
      }

      nav .nav-icon {
        width: 35px;
      }

      /* Chat Panel */

      .chat-panel {
        padding-top: 15px;
      }

      .chat-passage-wrapper {
        position: relative;
        margin: 0.5rem 0;
      }

      .chat-passage-wrapper[data-speaker="you"] {
        text-align: right;
      }
      .chat-passage-wrapper[data-speaker="you"] .chat-passage:before {
        text-align: right;
        color: var(--user-color);
      }

      .chat-passage {
        display: inline-block;
        padding: 0.25rem 0.5rem;
        margin-left: 35px;
        background-color: var(--passage-bg-color);
        max-width: calc(100% - 80px);
        text-align: left;
      }
      @media (min-width: 576px) {
        .chat-passage {
          max-width: calc(100% - 100px);
        }
      }
      @media (min-width: 768px) {
        .chat-passage {
          max-width: calc(100% - 80px);
        }
      }
      @media (min-width: 992px) {
        .chat-passage {
          max-width: calc(100% - 100px);
        }
      }

      .chat-passage:before {
        content: attr(data-speaker);
        display: block;
        font-size: 0.75rem;
        text-transform: capitalize;
        color: var(--speaker-color);
      }

      .chat-passage p {
        margin: 0;
      }

      .chat-passage img {
        max-width: 100%;
        max-height: calc(100vh - 2 * var(--user-response-panel-height));
        padding: 0.25rem 0;
      }
      .chat-passage iframe {
        max-width: 100%;
        max-height: calc(100vh - 2 * var(--user-response-panel-height));
      }

      .chat-passage figure {
        margin-bottom: 0.25rem;
        font-size: 0.75rem;
      }

      /* User Response Panel */

      .user-response-panel {
        padding-right: 15px;
        padding-left: 15px;
      }
      @media (min-width: 992px) {
        .user-response-panel {
          max-width: calc(
            100% / (12 / 6)
          ); /* 100% / (12/[col width of chat-panel]) */
          margin: 0 auto;
        }
      }

      .user-response-panel hr {
        margin: 0;
        border-top: 5px solid white;
      }

      .user-response-hint {
        font-style: italic;
        font-size: 0.75rem;
        text-align: center;
        height: 18px;
      }
      @media (max-width: 379.98px) {
        .user-response-hint {
          font-size: 0.6rem;
          height: 14px;
        }
        body {
          margin-bottom: calc(
            var(--user-response-panel-height) + 14px + 5px
          ); /* + height of hint + hr */
        }
        .minh-full {
          min-height: calc(
            100vh - var(--navbar-height) - var(--user-response-panel-height) -
              14px - 5px
          );
        }
      }
      @media (max-width: 319.98px) {
        .user-response-hint {
          font-size: 0.5rem;
          height: 12px;
        }
        body {
          margin-bottom: calc(
            var(--user-response-panel-height) + 12px + 5px
          ); /* + height of hint + hr */
        }
        .minh-full {
          min-height: calc(
            100vh - var(--navbar-height) - var(--user-response-panel-height) -
              12px - 5px
          );
        }
      }

      .user-reponse-wrapper {
        height: var(--user-response-panel-height);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .user-response-panel .user-response {
        display: inline-block;
        padding: 0.5rem;
        margin: 0.25rem;
        background-color: var(--passage-bg-color);
        color: var(--passage-text-color);
        border-top: 2px solid transparent;
        transition: border-color 0.15s ease-in;
      }
      .user-response-panel .user-response:hover {
        text-decoration: none;
        border-color: var(--user-color);
      }

      /* Passage Avatars */

      .chat-passage-wrapper:before {
        margin-right: 5px;
        position: absolute;
        vertical-align: top;
        content: "";
        width: 30px;
        height: 30px;
        background-size: 30px 30px;
        border-radius: 15px;
        background-color: var(--speaker-color);
      }
      .chat-passage-wrapper[data-speaker="you"]:before {
        display: none;
      }
      .chat-passage-wrapper[data-speaker="you"]:after {
        margin-left: -30px;
        position: absolute;
        vertical-align: top;
        content: "";
        width: 30px;
        height: 30px;
        background-size: 30px 30px;
        border-radius: 15px;
        background-color: var(--user-color);
      }
      .chat-passage[data-speaker="you"] {
        margin-left: 0;
        margin-right: 35px;
      }

      /* Typing Animation */

      div.wave {
        position: relative;
        text-align: center;
        margin-left: auto;
        margin-right: auto;
      }
      div.wave .dot {
        display: inline-block;
        width: 6px;
        height: 6px;
        border-radius: 50%;
        margin-right: 2px;
        background: var(--passage-text-color);
        animation: wave 1.2s ease-in-out infinite;
      }
      div.wave .dot:nth-child(2) {
        animation-delay: 0.1s;
      }

      div.wave .dot:nth-child(3) {
        animation-delay: 0.2s;
      }

      @keyframes wave {
        0%,
        50%,
        100% {
          transform: initial;
        }

        25% {
          transform: translateY(-15px);
        }
      }

      /* Modal */

      .modal-dialog {
        max-width: 420px;
      }

      /* 
 * counter extra padding-right added by BS4 modal
 * https://stackoverflow.com/questions/32862394/bootstrap-modals-keep-adding-padding-right-to-body-after-closed
 */
      body.modal-open {
        padding-right: 0 !important;
      }
      body.modal-open .user-response-panel {
        padding-right: 15px !important;
      }
      body.modal-open nav.navbar {
        padding-right: 15px !important;
      }
    </style>
  </head>
  <body class="bg-white">
    <nav class="navbar navbar-expand-lg fixed-top">
      <h1 id="ptitle" class="nav-title">onboarding_example</h1>
    </nav>

    <main role="main" class="container-fluid">
      <div class="row">
        <div class="left-sidebar col-lg d-none d-lg-block">
          <div
            id="left-sidebar-container"
            class="content-container position-fixed mt-3 mt-lg-5 m-lg-4"
          ></div>
        </div>
        <div class="chat-panel col-lg-6 minh-full bg-color">
          <div id="phistory" class="history chat-history"></div>
          <div id="passage" class="active"></div>
          <div id="animation-container">
            <div class="chat-passage-wrapper">
              <div class="chat-passage">
                <div class="wave">
                  <span class="dot"></span>
                  <span class="dot"></span>
                  <span class="dot"></span>
                </div>
              </div>
            </div>
          </div>
          <div class="user-response-panel fixed-bottom bg-color">
            <hr />
            <div
              id="user-response-hint"
              class="user-response-hint content-container"
            ></div>
            <div id="user-response-panel" class="user-reponse-wrapper"></div>
          </div>
        </div>
        <div class="right-sidebar col-lg offcanvas-collapse">
          <div class="position-fixed ml--3 w-100 w-lg-auto h-100">
            <div
              id="right-sidebar-container"
              class="content-container m-3 m-sm-5 m-lg-3 mt-lg-5 m-xl-5 mt-xl-5"
            ></div>
          </div>
        </div>
      </div>
    </main>
    <!-- UUID://DEC7B08C-8D6C-416E-A86D-180A53DBF339// --><tw-storydata
      name="onboarding_example"
      startnode="11"
      creator="Tweego"
      creator-version="2.0.0+089d4ca77e5b"
      ifid="DEC7B08C-8D6C-416E-A86D-180A53DBF339"
      zoom="1"
      format="TEST_ChatbookViewer"
      format-version="0.1.0"
      options=""
      hidden
      ><style
        role="stylesheet"
        id="twine-user-stylesheet"
        type="text/twine-css"
      ></style
      ><script
        role="script"
        id="twine-user-script"
        type="text/twine-javascript"
      >
        story.directive("@yaml", function(info, rendered, passage, story) {
          // "story" and "passage" are the current story & passage respectively
          console.log("YAML data from " + passage.id);
          console.log("Directive contained: " + info);
          return rendered;
        });</script
      ><tw-tag name="auto" color="green"></tw-tag
      ><tw-tag name="metadata" color="blue"></tw-tag
      ><tw-tag name="prologue" color="blue"></tw-tag
      ><tw-tag name="prompt-firstName" color="yellow"></tw-tag
      ><tw-tag name="speaker-bot" color="orange"></tw-tag
      ><tw-tag name="speaker-system" color="purple"></tw-tag
      ><tw-tag name="system" color="purple"></tw-tag
      ><tw-passagedata
        pid="1"
        name="gql references"
        tags="system prologue"
        position="25,125"
        size="200,100"
        >###@yaml CURRENT_AUTHORIZATION: &amp;CURRENT_AUTHORIZATION | query
        currentAuthorization { currentUser { id, firstName, authorizations
        (orderBy: PRIMARY_KEY_ASC) { nodes { providerId, providerEmails } } } }
        UPDATE_USER_DATA: &amp;UPDATE_USER_DATA | mutation updateUserData
        ($input: UpdateUserInput!) { updateUser(input:$input) { user { id } } }
        UPDATE_USER_DATA_VARS: &amp;UPDATE_USER_DATA_VARS | { &quot;input&quot;:
        { &quot;id&quot;: {{userId}}, &quot;patch&quot;: {
        &quot;firstName&quot;: &quot;{{firstName}}&quot;,
        &quot;aboutPronoun&quot;: &quot;{{aboutPronoun}}&quot;,
        &quot;conjugatedPronoun&quot;: &quot;{{conjugatedPronoun}}&quot;,
        &quot;possessivePronoun&quot;: &quot;{{possessivePronoun}}&quot;,
        &quot;primaryEmail&quot;: &quot;{{email}}&quot; } } }
        ###</tw-passagedata
      ><tw-passagedata
        pid="2"
        name="Name Not OK"
        tags="speaker-bot prompt-firstName"
        position="475,125"
        size="100,100"
        >Okay, what name would you like me to use? [[Confirm
        Email]]</tw-passagedata
      ><tw-passagedata
        pid="3"
        name="Confirm Email"
        tags="speaker-bot multiline"
        position="475,275"
        size="100,100"
        >Ok. And the email {{which origin &quot;google-oauth2.+&quot;
        &quot;Google&quot; &quot;linkedin.+&quot; &quot;LinkedIn&quot;
        &quot;.*&quot; &quot;your email provider&quot;}} gave me is {{email}}.
        You can always update that later. One last thing How should I refer to
        you? [[&quot;He&quot; pronouns (he/him)]] [[&quot;She&quot; pronouns
        (she/her)]] [[&quot;They&quot; pronouns (they/them)]] [[&quot;Ze&quot;
        pronouns (ze/zir)]] [[I&#39;d like to be specific]] [[Just use my
        name]]</tw-passagedata
      ><tw-passagedata
        pid="4"
        name='"He" pronouns (he/him)'
        tags="auto system"
        position="300,425"
        size="100,100"
        >#@yaml set: aboutPronoun him #@yaml set: conjugatedPronoun he #@yaml
        set: posessivePronoun his [[Save]]</tw-passagedata
      ><tw-passagedata
        pid="5"
        name='"She" pronouns (she/her)'
        tags="auto system"
        position="425,425"
        size="100,100"
        >#@yaml set: aboutPronoun her #@yaml set: conjugatedPronoun she #@yaml
        set: posessivePronoun her [[Save]]</tw-passagedata
      ><tw-passagedata
        pid="6"
        name='"They" pronouns (they/them)'
        tags="auto system"
        position="550,425"
        size="100,100"
        >#@yaml set: aboutPronoun them #@yaml set: conjugatedPronoun they #@yaml
        set: posessivePronoun their [[Save]]</tw-passagedata
      ><tw-passagedata
        pid="7"
        name='"Ze" pronouns (ze/zir)'
        tags="auto system"
        position="675,425"
        size="100,100"
        >#@yaml set: aboutPronoun zir #@yaml set: conjugatedPronoun ze #@yaml
        set: posessivePronoun zir [[Save]]</tw-passagedata
      ><tw-passagedata
        pid="8"
        name="I&#39;d like to be specific"
        tags="speaker-bot auto"
        position="800,425"
        size="100,100"
        >Okay. You can do that in your profile once we&#39;re done here.
        [[Save]]</tw-passagedata
      ><tw-passagedata
        pid="9"
        name="Just use my name"
        tags="auto speaker-bot"
        position="925,425"
        size="100,100"
        >#@yaml set: aboutPronoun {{firstName}} #@yaml set: conjugatedPronoun
        {{firstName}} #@yaml set: posessivePronoun {{firstName}} No problem
        [[Save]]</tw-passagedata
      ><tw-passagedata
        pid="10"
        name="Save"
        tags="speaker-bot auto"
        position="600,725"
        size="100,100"
        >That&#39;s everything, let me save it for you. [[Save
        Action]]</tw-passagedata
      ><tw-passagedata
        pid="11"
        name="start"
        tags="speaker-bot multiline"
        position="300,125"
        size="100,100"
        >###@yaml - graphql: id: currentAuthorization query:
        *CURRENT_AUTHORIZATION store: - &quot;currentUser.id&quot;: userId -
        &quot;currentUser.firstName&quot;: firstName -
        &quot;currentUser.authorizations.nodes[0].providerEmails[0]&quot;: email
        - &quot;currentUser.authorizations.nodes[0].providerId&quot;: origin ###
        Hey there! I&#39;m Karl (he/him). The AI ibex of Aibex. I asked {{which
        origin &quot;google-oauth2.+&quot; &quot;Google&quot;
        &quot;linkedin.+&quot; &quot;LinkedIn&quot; &quot;.*&quot; &quot;your
        email provider&quot;}} what your name was, and they said &quot;{{default
        firstName &quot;to just use your email address&quot;}}&quot;. Is that
        right? [[Yes-&gt;Confirm Email]] [[No-&gt;Name Not OK]]</tw-passagedata
      ><tw-passagedata
        pid="12"
        name="Next Steps"
        tags="speaker-bot auto"
        position="750,875"
        size="100,100"
        >Next up, I&#39;d like to walk you through how Aibex works. close this,
        and when you&#39;re ready, let&#39;s chat about &quot;What Is
        Aibex&quot; [[end]]</tw-passagedata
      ><tw-passagedata
        pid="13"
        name="end"
        tags="system"
        position="925,875"
        size="100,100"
        >#@yaml end: true</tw-passagedata
      ><tw-passagedata
        pid="14"
        name="Save Action"
        tags="auto speaker-bot"
        position="600,875"
        size="100,100"
        >###@yaml graphql: id: updateUserData query: *UPDATE_USER_DATA
        variables: *UPDATE_USER_DATA_VARS format: true store: - SUCCESS:
        updateResult ### {{~# if updateResult ~}} Great, all saved {{~&gt; line
        ~}} You can update all of this from your profile, too. {{~ else ~}}
        Awkward. Something went wrong. We&#39;ll come back to this {{~/ if ~}}
        [[Next Steps]]</tw-passagedata
      ></tw-storydata
    >
    <script>
      (function(factory) {
        typeof define === "function" && define.amd
          ? define(factory)
          : factory();
      })(function() {
        "use strict";

        function _defineProperty(obj, key, value) {
          if (key in obj) {
            Object.defineProperty(obj, key, {
              value: value,
              enumerable: true,
              configurable: true,
              writable: true,
            });
          } else {
            obj[key] = value;
          }

          return obj;
        }

        var defineProperty = _defineProperty;

        var commonjsGlobal =
          typeof globalThis !== "undefined"
            ? globalThis
            : typeof window !== "undefined"
            ? window
            : typeof global !== "undefined"
            ? global
            : typeof self !== "undefined"
            ? self
            : {};

        /**
         * lodash (Custom Build) <https://lodash.com/>
         * Build: `lodash modularize exports="npm" -o ./`
         * Copyright jQuery Foundation and other contributors <https://jquery.org/>
         * Released under MIT license <https://lodash.com/license>
         * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
         * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
         */

        /** Used as references for various `Number` constants. */
        var INFINITY = 1 / 0;

        /** `Object#toString` result references. */
        var symbolTag = "[object Symbol]";

        /** Used to match HTML entities and HTML characters. */
        var reEscapedHtml = /&(?:amp|lt|gt|quot|#39|#96);/g,
          reHasEscapedHtml = RegExp(reEscapedHtml.source);

        /** Used to map HTML entities to characters. */
        var htmlUnescapes = {
          "&amp;": "&",
          "&lt;": "<",
          "&gt;": ">",
          "&quot;": '"',
          "&#39;": "'",
          "&#96;": "`",
        };

        /** Detect free variable `global` from Node.js. */
        var freeGlobal =
          typeof commonjsGlobal == "object" &&
          commonjsGlobal &&
          commonjsGlobal.Object === Object &&
          commonjsGlobal;

        /** Detect free variable `self`. */
        var freeSelf =
          typeof self == "object" && self && self.Object === Object && self;

        /** Used as a reference to the global object. */
        var root = freeGlobal || freeSelf || Function("return this")();

        /**
         * The base implementation of `_.propertyOf` without support for deep paths.
         *
         * @private
         * @param {Object} object The object to query.
         * @returns {Function} Returns the new accessor function.
         */
        function basePropertyOf(object) {
          return function(key) {
            return object == null ? undefined : object[key];
          };
        }

        /**
         * Used by `_.unescape` to convert HTML entities to characters.
         *
         * @private
         * @param {string} chr The matched character to unescape.
         * @returns {string} Returns the unescaped character.
         */
        var unescapeHtmlChar = basePropertyOf(htmlUnescapes);

        /** Used for built-in method references. */
        var objectProto = Object.prototype;

        /**
         * Used to resolve the
         * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
         * of values.
         */
        var objectToString = objectProto.toString;

        /** Built-in value references. */
        var Symbol = root.Symbol;

        /** Used to convert symbols to primitives and strings. */
        var symbolProto = Symbol ? Symbol.prototype : undefined,
          symbolToString = symbolProto ? symbolProto.toString : undefined;

        /**
         * The base implementation of `_.toString` which doesn't convert nullish
         * values to empty strings.
         *
         * @private
         * @param {*} value The value to process.
         * @returns {string} Returns the string.
         */
        function baseToString(value) {
          // Exit early for strings to avoid a performance hit in some environments.
          if (typeof value == "string") {
            return value;
          }
          if (isSymbol(value)) {
            return symbolToString ? symbolToString.call(value) : "";
          }
          var result = value + "";
          return result == "0" && 1 / value == -INFINITY ? "-0" : result;
        }

        /**
         * Checks if `value` is object-like. A value is object-like if it's not `null`
         * and has a `typeof` result of "object".
         *
         * @static
         * @memberOf _
         * @since 4.0.0
         * @category Lang
         * @param {*} value The value to check.
         * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
         * @example
         *
         * _.isObjectLike({});
         * // => true
         *
         * _.isObjectLike([1, 2, 3]);
         * // => true
         *
         * _.isObjectLike(_.noop);
         * // => false
         *
         * _.isObjectLike(null);
         * // => false
         */
        function isObjectLike(value) {
          return !!value && typeof value == "object";
        }

        /**
         * Checks if `value` is classified as a `Symbol` primitive or object.
         *
         * @static
         * @memberOf _
         * @since 4.0.0
         * @category Lang
         * @param {*} value The value to check.
         * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
         * @example
         *
         * _.isSymbol(Symbol.iterator);
         * // => true
         *
         * _.isSymbol('abc');
         * // => false
         */
        function isSymbol(value) {
          return (
            typeof value == "symbol" ||
            (isObjectLike(value) && objectToString.call(value) == symbolTag)
          );
        }

        /**
         * Converts `value` to a string. An empty string is returned for `null`
         * and `undefined` values. The sign of `-0` is preserved.
         *
         * @static
         * @memberOf _
         * @since 4.0.0
         * @category Lang
         * @param {*} value The value to process.
         * @returns {string} Returns the string.
         * @example
         *
         * _.toString(null);
         * // => ''
         *
         * _.toString(-0);
         * // => '-0'
         *
         * _.toString([1, 2, 3]);
         * // => '1,2,3'
         */
        function toString(value) {
          return value == null ? "" : baseToString(value);
        }

        /**
         * The inverse of `_.escape`; this method converts the HTML entities
         * `&amp;`, `&lt;`, `&gt;`, `&quot;`, `&#39;`, and `&#96;` in `string` to
         * their corresponding characters.
         *
         * **Note:** No other HTML entities are unescaped. To unescape additional
         * HTML entities use a third-party library like [_he_](https://mths.be/he).
         *
         * @static
         * @memberOf _
         * @since 0.6.0
         * @category String
         * @param {string} [string=''] The string to unescape.
         * @returns {string} Returns the unescaped string.
         * @example
         *
         * _.unescape('fred, barney, &amp; pebbles');
         * // => 'fred, barney, & pebbles'
         */
        function unescape(string) {
          string = toString(string);
          return string && reHasEscapedHtml.test(string)
            ? string.replace(reEscapedHtml, unescapeHtmlChar)
            : string;
        }

        var lodash_unescape = unescape;

        function ownKeys(object, enumerableOnly) {
          var keys = Object.keys(object);
          if (Object.getOwnPropertySymbols) {
            var symbols = Object.getOwnPropertySymbols(object);
            if (enumerableOnly)
              symbols = symbols.filter(function(sym) {
                return Object.getOwnPropertyDescriptor(object, sym).enumerable;
              });
            keys.push.apply(keys, symbols);
          }
          return keys;
        }

        function _objectSpread(target) {
          for (var i = 1; i < arguments.length; i++) {
            var source = arguments[i] != null ? arguments[i] : {};
            if (i % 2) {
              ownKeys(source, true).forEach(function(key) {
                defineProperty(target, key, source[key]);
              });
            } else if (Object.getOwnPropertyDescriptors) {
              Object.defineProperties(
                target,
                Object.getOwnPropertyDescriptors(source)
              );
            } else {
              ownKeys(source).forEach(function(key) {
                Object.defineProperty(
                  target,
                  key,
                  Object.getOwnPropertyDescriptor(source, key)
                );
              });
            }
          }
          return target;
        }
        const TOKEN_ESCAPED_OCTO = "__TOKEN_ESCAPED_BACKSLASH_OCTO__";
        const BLOCK_DIRECTIVE = /^###@([\S]+)([\s\S]*?)###/gm;
        const INLINE_DIRECTIVE = /^#@([\S]+)(.*)/g;
        const BLOCK_COMMENT = /###[\s\S]*?###/gm;
        const INLINE_COMMENT = /^#.*$/g;
        const IS_EXTERNAL_URL = /^\w+:\/\/\/?\w/i;
        const LINK_PATTERN = /\[\[(.*?)\]\]/g;

        const findStory = win => {
          if (win && win.story) {
            return win.story;
          }

          return {
            state: {},
          };
        };

        const escapeOctos = s => s.replace("\\#", TOKEN_ESCAPED_OCTO);

        const restoreOctos = s => s.replace(TOKEN_ESCAPED_OCTO, "#");

        const stripComments = s =>
          s.replace(BLOCK_COMMENT, "").replace(INLINE_COMMENT, "");

        const extractDirectives = s => {
          const directives = [];
          s.replace(BLOCK_DIRECTIVE, (match, dir, content) => {
            directives.push({
              name: "@".concat(dir),
              content: content.trim(),
            });
            return "";
          });
          s.replace(INLINE_DIRECTIVE, (match, dir, content) => {
            directives.push({
              name: "@".concat(dir),
              content: content.trim(),
            });
            return "";
          });
          return directives;
        };

        const renderPassage = passage => {
          const source = passage.source;
          let result = source;
          result = escapeOctos(result);
          const directives = extractDirectives(result);
          result = stripComments(result);
          result = restoreOctos(result); // strip remaining comments

          result = result
            .replace("\\#", TOKEN_ESCAPED_OCTO)
            .replace(BLOCK_COMMENT, "")
            .replace(INLINE_COMMENT, "")
            .replace(TOKEN_ESCAPED_OCTO, "#")
            .trim();

          if (passage) {
            // remove links if set previously
            passage.links = [];
          } // [[links]]

          result = result.replace(LINK_PATTERN, (match, t) => {
            let display = t;
            let target = t; // display|target format

            const barIndex = t.indexOf("|");
            const rightArrIndex = t.indexOf("->");
            const leftArrIndex = t.indexOf("<-");

            switch (true) {
              case barIndex >= 0:
                display = t.substr(0, barIndex);
                target = t.substr(barIndex + 1);
                break;

              case rightArrIndex >= 0:
                display = t.substr(0, rightArrIndex);
                target = t.substr(rightArrIndex + 2);
                break;

              case leftArrIndex >= 0:
                display = t.substr(leftArrIndex + 2);
                target = t.substr(0, leftArrIndex);
                break;
            } // render an external link & stop?

            if (IS_EXTERNAL_URL.test(target)) {
              return (
                '<a href="' + target + '" target="_blank">' + display + "</a>"
              );
            } // handle passage

            if (passage) {
              passage.links.push({
                display,
                target,
              });
            }

            return ""; // render nothing if it's a twee link
          }); // before handling any tags, handle any/all directives

          directives.forEach(d => {
            if (!passage.story.directives[d.name]) return;
            passage.story.directives[d.name].forEach(run => {
              result = run(d.content, result, passage, passage.story);
            });
          }); // if system tag, return an empty render set

          if (passage.hasTag("system")) {
            return [];
          } // if prompt tag is set, notify the story

          if (passage) {
            const prompts = passage.prefixTag("prompt");

            if (prompts.length) {
              passage.story.prompt(prompts[0]);
            }
          } // if this is a multiline item, trim, split, and mark each item
          // return the array

          if (passage.hasTag("multiline")) {
            result = result.trim();
            return result.split(/[\r\n]+/g);
          } // else returns an array of 1

          return [result];
        };

        class Passage {
          constructor(id, name, tags, source, story) {
            defineProperty(this, "id", null);

            defineProperty(this, "name", null);

            defineProperty(this, "tags", null);

            defineProperty(this, "tagDict", {});

            defineProperty(this, "source", null);

            defineProperty(this, "links", []);

            defineProperty(this, "getSpeaker", () => {
              const speakerTag =
                this.tags.find(t => t.indexOf("speaker-") === 0) || "";
              const systemTag = this.hasTag("system");
              if (speakerTag) return speakerTag.replace(/^speaker-/, "");
              if (systemTag) return "system";
              return null;
            });

            defineProperty(this, "prefixTag", (pfx, asDict) =>
              this.tags
                .filter(t => t.indexOf("".concat(pfx, "-")) === 0)
                .map(t => t.replace("".concat(pfx, "-"), ""))
                .reduce(
                  (a, t) => {
                    if (asDict)
                      return _objectSpread({}, a, {
                        [t]: 1,
                      });
                    return [...a, t];
                  },
                  asDict ? {} : []
                )
            );

            defineProperty(this, "hasTag", t => this.tagDict[t]);

            defineProperty(this, "render", () => renderPassage(this));

            this.id = id;
            this.name = name;
            this.tags = tags;
            this.source = lodash_unescape(source);
            this.story = story;
            this.tags.forEach(t => (this.tagDict[t] = 1));
          }
        }

        defineProperty(Passage, "render", str =>
          renderPassage(
            new Passage(null, null, null, str, findStory(window || null))
          )
        );

        /**
         * lodash (Custom Build) <https://lodash.com/>
         * Build: `lodash modularize exports="npm" -o ./`
         * Copyright jQuery Foundation and other contributors <https://jquery.org/>
         * Released under MIT license <https://lodash.com/license>
         * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
         * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
         */

        /** Used as references for various `Number` constants. */
        var INFINITY$1 = 1 / 0;

        /** `Object#toString` result references. */
        var symbolTag$1 = "[object Symbol]";

        /** Used to match HTML entities and HTML characters. */
        var reUnescapedHtml = /[&<>"'`]/g,
          reHasUnescapedHtml = RegExp(reUnescapedHtml.source);

        /** Used to map characters to HTML entities. */
        var htmlEscapes = {
          "&": "&amp;",
          "<": "&lt;",
          ">": "&gt;",
          '"': "&quot;",
          "'": "&#39;",
          "`": "&#96;",
        };

        /** Detect free variable `global` from Node.js. */
        var freeGlobal$1 =
          typeof commonjsGlobal == "object" &&
          commonjsGlobal &&
          commonjsGlobal.Object === Object &&
          commonjsGlobal;

        /** Detect free variable `self`. */
        var freeSelf$1 =
          typeof self == "object" && self && self.Object === Object && self;

        /** Used as a reference to the global object. */
        var root$1 = freeGlobal$1 || freeSelf$1 || Function("return this")();

        /**
         * The base implementation of `_.propertyOf` without support for deep paths.
         *
         * @private
         * @param {Object} object The object to query.
         * @returns {Function} Returns the new accessor function.
         */
        function basePropertyOf$1(object) {
          return function(key) {
            return object == null ? undefined : object[key];
          };
        }

        /**
         * Used by `_.escape` to convert characters to HTML entities.
         *
         * @private
         * @param {string} chr The matched character to escape.
         * @returns {string} Returns the escaped character.
         */
        var escapeHtmlChar = basePropertyOf$1(htmlEscapes);

        /** Used for built-in method references. */
        var objectProto$1 = Object.prototype;

        /**
         * Used to resolve the
         * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
         * of values.
         */
        var objectToString$1 = objectProto$1.toString;

        /** Built-in value references. */
        var Symbol$1 = root$1.Symbol;

        /** Used to convert symbols to primitives and strings. */
        var symbolProto$1 = Symbol$1 ? Symbol$1.prototype : undefined,
          symbolToString$1 = symbolProto$1 ? symbolProto$1.toString : undefined;

        /**
         * The base implementation of `_.toString` which doesn't convert nullish
         * values to empty strings.
         *
         * @private
         * @param {*} value The value to process.
         * @returns {string} Returns the string.
         */
        function baseToString$1(value) {
          // Exit early for strings to avoid a performance hit in some environments.
          if (typeof value == "string") {
            return value;
          }
          if (isSymbol$1(value)) {
            return symbolToString$1 ? symbolToString$1.call(value) : "";
          }
          var result = value + "";
          return result == "0" && 1 / value == -INFINITY$1 ? "-0" : result;
        }

        /**
         * Checks if `value` is object-like. A value is object-like if it's not `null`
         * and has a `typeof` result of "object".
         *
         * @static
         * @memberOf _
         * @since 4.0.0
         * @category Lang
         * @param {*} value The value to check.
         * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
         * @example
         *
         * _.isObjectLike({});
         * // => true
         *
         * _.isObjectLike([1, 2, 3]);
         * // => true
         *
         * _.isObjectLike(_.noop);
         * // => false
         *
         * _.isObjectLike(null);
         * // => false
         */
        function isObjectLike$1(value) {
          return !!value && typeof value == "object";
        }

        /**
         * Checks if `value` is classified as a `Symbol` primitive or object.
         *
         * @static
         * @memberOf _
         * @since 4.0.0
         * @category Lang
         * @param {*} value The value to check.
         * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
         * @example
         *
         * _.isSymbol(Symbol.iterator);
         * // => true
         *
         * _.isSymbol('abc');
         * // => false
         */
        function isSymbol$1(value) {
          return (
            typeof value == "symbol" ||
            (isObjectLike$1(value) &&
              objectToString$1.call(value) == symbolTag$1)
          );
        }

        /**
         * Converts `value` to a string. An empty string is returned for `null`
         * and `undefined` values. The sign of `-0` is preserved.
         *
         * @static
         * @memberOf _
         * @since 4.0.0
         * @category Lang
         * @param {*} value The value to process.
         * @returns {string} Returns the string.
         * @example
         *
         * _.toString(null);
         * // => ''
         *
         * _.toString(-0);
         * // => '-0'
         *
         * _.toString([1, 2, 3]);
         * // => '1,2,3'
         */
        function toString$1(value) {
          return value == null ? "" : baseToString$1(value);
        }

        /**
         * Converts the characters "&", "<", ">", '"', "'", and "\`" in `string` to
         * their corresponding HTML entities.
         *
         * **Note:** No other characters are escaped. To escape additional
         * characters use a third-party library like [_he_](https://mths.be/he).
         *
         * Though the ">" character is escaped for symmetry, characters like
         * ">" and "/" don't need escaping in HTML and have no special meaning
         * unless they're part of a tag or unquoted attribute value. See
         * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)
         * (under "semi-related fun fact") for more details.
         *
         * Backticks are escaped because in IE < 9, they can break out of
         * attribute values or HTML comments. See [#59](https://html5sec.org/#59),
         * [#102](https://html5sec.org/#102), [#108](https://html5sec.org/#108), and
         * [#133](https://html5sec.org/#133) of the
         * [HTML5 Security Cheatsheet](https://html5sec.org/) for more details.
         *
         * When working with HTML you should always
         * [quote attribute values](http://wonko.com/post/html-escaping) to reduce
         * XSS vectors.
         *
         * @static
         * @since 0.1.0
         * @memberOf _
         * @category String
         * @param {string} [string=''] The string to escape.
         * @returns {string} Returns the escaped string.
         * @example
         *
         * _.escape('fred, barney, & pebbles');
         * // => 'fred, barney, &amp; pebbles'
         */
        function escape(string) {
          string = toString$1(string);
          return string && reHasUnescapedHtml.test(string)
            ? string.replace(reUnescapedHtml, escapeHtmlChar)
            : string;
        }

        var lodash_escape = escape;

        const selectPassages = "tw-passagedata";
        const selectCss = '*[type="text/twine-css"]';
        const selectJs = '*[type="text/twine-javascript"]';
        const selectActiveLink = "#user-response-panel a[data-passage]";
        const selectActiveButton = "#user-response-panel button[data-passage]";
        const selectActiveInput = "#user-response-panel input";
        const selectActive = ".chat-panel .active";
        const selectHistory = ".chat-panel .history";
        const selectResponses = "#user-response-panel";
        const typingIndicator = "#animation-container";
        const IS_NUMERIC = /^[\d]+$/;
        /**
         * Determine if a provided string contains only numbers
         * In the case of `pid` values for passages, this is true
         */

        const isNumeric = d => IS_NUMERIC.test(d);
        /**
         * Format a user passage (such as a response)
         */

        const USER_PASSAGE_TMPL = ({ id, text }) =>
          '\n  <div class="chat-passage-wrapper" data-speaker="you">\n    <div class="chat-passage phistory" data-speaker="you" data-upassage="'
            .concat(id, '">\n      ')
            .concat(text, "\n    </div>\n  </div>\n");
        /**
         * Format a message from a non-user
         */

        const OTHER_PASSAGE_TMPL = ({ speaker, tags, text }) =>
          '\n  <div data-speaker="'
            .concat(speaker, '" class="chat-passage-wrapper ')
            .concat(tags.join(" "), '">\n    <div data-speaker="')
            .concat(speaker, '" class="chat-passage">\n      ')
            .concat(text, "\n    </div>\n  </div>\n");
        /**
         * Forces a delay via promises in order to spread out messages
         */

        const delay = async (t = 0) =>
          new Promise(resolve => setTimeout(resolve, t)); // Find one/many nodes within a context. We [...findAll] to ensure we're cast as an array
        // not as a node list

        const find = (ctx, s) => ctx.querySelector(s);

        const findAll = (ctx, s) => [...ctx.querySelectorAll(s)] || [];
        /**
         * Standard Twine Format Story Object
         */

        class Story {
          // Twine v2
          constructor(win, src) {
            defineProperty(this, "version", 2);

            defineProperty(this, "document", null);

            defineProperty(this, "story", null);

            defineProperty(this, "name", "");

            defineProperty(this, "startsAt", 0);

            defineProperty(this, "current", 0);

            defineProperty(this, "history", []);

            defineProperty(this, "passages", {});

            defineProperty(this, "showPrompt", false);

            defineProperty(this, "errorMessage", "\u26a0 %s");

            defineProperty(this, "directives", {});

            defineProperty(this, "elements", {});

            defineProperty(this, "userScripts", []);

            defineProperty(this, "userStyles", []);

            defineProperty(this, "start", () => {
              // activate userscripts and styles
              this.userStyles.forEach(s => {
                const t = this.document.createElement("style");
                t.innerHTML = s;
                this.document.body.appendChild(t);
              });
              this.userScripts.forEach(s => {
                // eval is evil, but this is simply how Twine works
                // eslint-disable-line
                globalEval(s);
              }); // when you click on a[data-passage] (response link)...

              this.document.body.addEventListener("click", e => {
                if (!e.target.matches(selectActiveLink)) {
                  return;
                }

                this.advance(
                  this.findPassage(e.target.getAttribute("data-passage")),
                  e.target.innerHTML
                );
              }); // when you click on button[data-passage] (response input)...

              this.document.body.addEventListener("click", e => {
                if (!e.target.matches(selectActiveButton)) {
                  return;
                } // capture and disable showPrompt feature

                const value = find(this.document, selectActiveInput).value;
                this.showPrompt = false;
                this.advance(
                  this.findPassage(e.target.getAttribute("data-passage")),
                  value
                );
              });
              this.advance(this.findPassage(this.startsAt));
            });

            defineProperty(this, "findPassage", idOrName => {
              if (isNumeric(idOrName)) {
                return this.passages[idOrName];
              } else {
                // handle passages with ' and " (can't use a css selector consistently)
                const p = findAll(this.story, "tw-passagedata").filter(
                  p => p.getAttribute("name") === idOrName
                )[0];
                if (!p) return null;
                return this.passages[p.getAttribute("pid")];
              }
            });

            defineProperty(
              this,
              "advance",
              async (passage, userText = null) => {
                this.history.push(passage.id);
                const last = this.current; // .active is captured & cleared

                const existing = this.elements.active.innerHTML;
                this.elements.active.innerHTML = ""; // whatever was in active is moved up into history

                this.elements.history.innerHTML += existing; // if there is userText, it is added to .history

                if (userText) {
                  this.renderUserMessage(
                    last,
                    userText,
                    s => (this.elements.history.innerHTML += s)
                  );
                } // The new passage is rendered and placed in .active
                // after all renders, user options are displayed

                await this.renderPassage(
                  passage,
                  s => (this.elements.active.innerHTML += s)
                );

                if (passage.hasTag("auto")) {
                  // auto advance if the auto tag is set, skipping anything that
                  // could pause our operation
                  this.advance(this.findPassage(passage.links[0].target));
                  return;
                } // if prompt is set from the current node, enable freetext

                if (this.showPrompt) {
                  this.renderTextInput(passage);
                } else {
                  this.renderChoices(passage);
                }
              }
            );

            defineProperty(
              this,
              "renderUserMessage",
              async (pid, text, renderer) => {
                await renderer(
                  USER_PASSAGE_TMPL({
                    pid,
                    text,
                  })
                );
                this.scrollToBottom();
                return Promise.resolve();
              }
            );

            defineProperty(this, "renderPassage", async (passage, renderer) => {
              const speaker = passage.getSpeaker();
              let statements = passage.render();
              let next = statements.shift();
              this.showTyping();

              while (next) {
                const content = OTHER_PASSAGE_TMPL({
                  speaker,
                  tags: passage.tags,
                  text: next,
                });
                await delay(this.calculateDelay(next)); // todo

                await renderer(content);
                next = statements.shift();
              }

              this.hideTyping();
              this.scrollToBottom();
              return Promise.resolve();
            });

            defineProperty(this, "calculateDelay", txt => {
              const typingDelayRatio = 0.3;
              const rate = 20; // ms

              return txt.length * rate * typingDelayRatio;
            });

            defineProperty(this, "showTyping", () => {
              find(this.document, typingIndicator).style.visibility = "visible";
            });

            defineProperty(this, "hideTyping", () => {
              find(this.document, typingIndicator).style.visibility = "hidden";
            });

            defineProperty(this, "scrollToBottom", () => {
              const hist = find(this.document, "#phistory");
              document.scrollingElement.scrollTop = hist.offsetHeight;
            });

            defineProperty(this, "removeChoices", () => {
              const panel = find(this.document, selectResponses);
              panel.innerHTML = "";
            });

            defineProperty(this, "renderChoices", passage => {
              this.removeChoices();
              const panel = find(this.document, selectResponses);
              passage.links.forEach(l => {
                panel.innerHTML += '<a href="javascript:void(0)" class="user-response" data-passage="'
                  .concat(lodash_escape(l.target), '">')
                  .concat(l.display, "</a>");
              });
            });

            defineProperty(this, "renderTextInput", passage => {
              this.removeChoices();
              const panel = find(this.document, selectResponses);
              panel.innerHTML = '<input type="text" id="user-input" placeholder="'
                .concat(
                  this.showPrompt.placeholder,
                  '" /><button data-passage="'
                )
                .concat(
                  lodash_escape(passage.links[0].target),
                  '">&gt;</button>'
                );
            });

            defineProperty(
              this,
              "prompt",
              (saveAs, placeholder) =>
                (this.showPrompt = {
                  saveAs,
                  placeholder,
                })
            );

            defineProperty(this, "directive", (id, cb) => {
              if (!this.directives[id]) {
                this.directives[id] = [];
              }

              this.directives[id].push(cb);
            });

            this.window = win;

            if (src) {
              this.document = document.implementation.createHTMLDocument(
                "Chatbook Injected Content"
              );
            } else {
              this.document = document;
            }

            this.story = find(this.document, "tw-storydata"); // elements

            this.elements = {
              active: find(this.document, selectActive),
              history: find(this.document, selectHistory),
            }; // properties of story node

            this.name = this.story.getAttribute("name") || "";
            this.startsAt = this.story.getAttribute("startnode") || 0;
            findAll(this.story, selectPassages).forEach(p => {
              const id = parseInt(p.getAttribute("pid"));
              const name = p.getAttribute("name");
              const tags = (p.getAttribute("tags") || "").split(/\s+/g);
              const passage = p.innerHTML || "";
              this.passages[id] = new Passage(id, name, tags, passage, this);
            });
            find(this.document, "title").innerHTML = this.name;
            find(this.document, "#ptitle").innerHTML = this.name;
            this.userScripts = (findAll(this.document, selectJs) || []).map(
              el => el.innerHTML
            );
            this.userStyles = (findAll(this.document, selectCss) || []).map(
              el => el.innerHTML
            );
          }
          /**
           * Starts the story by setting up listeners and then advancing
           * to the first item in the stack
           */
        }

        (win => {
          if (typeof win !== "undefined") {
            win.document.addEventListener("DOMContentLoaded", function(event) {
              window.globalEval = eval;
              window.story = new Story(win);
              window.story.start();
            });
          }
        })(window || undefined);
      });
      //# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhdGJvb2sudW1kLmpzIiwic291cmNlcyI6WyIuLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eS5qcyIsIi4uL25vZGVfbW9kdWxlcy9sb2Rhc2gudW5lc2NhcGUvaW5kZXguanMiLCIuLi9zcmMvdHdpbmUvUGFzc2FnZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9sb2Rhc2guZXNjYXBlL2luZGV4LmpzIiwiLi4vc3JjL3R3aW5lL1N0b3J5LmpzIiwiLi4vc3JjL3R3aW5lL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleSBpbiBvYmopIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9ialtrZXldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gb2JqO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9kZWZpbmVQcm9wZXJ0eTsiLCIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgSU5GSU5JVFkgPSAxIC8gMDtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBIVE1MIGVudGl0aWVzIGFuZCBIVE1MIGNoYXJhY3RlcnMuICovXG52YXIgcmVFc2NhcGVkSHRtbCA9IC8mKD86YW1wfGx0fGd0fHF1b3R8IzM5fCM5Nik7L2csXG4gICAgcmVIYXNFc2NhcGVkSHRtbCA9IFJlZ0V4cChyZUVzY2FwZWRIdG1sLnNvdXJjZSk7XG5cbi8qKiBVc2VkIHRvIG1hcCBIVE1MIGVudGl0aWVzIHRvIGNoYXJhY3RlcnMuICovXG52YXIgaHRtbFVuZXNjYXBlcyA9IHtcbiAgJyZhbXA7JzogJyYnLFxuICAnJmx0Oyc6ICc8JyxcbiAgJyZndDsnOiAnPicsXG4gICcmcXVvdDsnOiAnXCInLFxuICAnJiMzOTsnOiBcIidcIixcbiAgJyYjOTY7JzogJ2AnXG59O1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xudmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cbi8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlPZmAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZVByb3BlcnR5T2Yob2JqZWN0KSB7XG4gIHJldHVybiBmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgfTtcbn1cblxuLyoqXG4gKiBVc2VkIGJ5IGBfLnVuZXNjYXBlYCB0byBjb252ZXJ0IEhUTUwgZW50aXRpZXMgdG8gY2hhcmFjdGVycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGNociBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gdW5lc2NhcGUuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB1bmVzY2FwZWQgY2hhcmFjdGVyLlxuICovXG52YXIgdW5lc2NhcGVIdG1sQ2hhciA9IGJhc2VQcm9wZXJ0eU9mKGh0bWxVbmVzY2FwZXMpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgU3ltYm9sID0gcm9vdC5TeW1ib2w7XG5cbi8qKiBVc2VkIHRvIGNvbnZlcnQgc3ltYm9scyB0byBwcmltaXRpdmVzIGFuZCBzdHJpbmdzLiAqL1xudmFyIHN5bWJvbFByb3RvID0gU3ltYm9sID8gU3ltYm9sLnByb3RvdHlwZSA6IHVuZGVmaW5lZCxcbiAgICBzeW1ib2xUb1N0cmluZyA9IHN5bWJvbFByb3RvID8gc3ltYm9sUHJvdG8udG9TdHJpbmcgOiB1bmRlZmluZWQ7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udG9TdHJpbmdgIHdoaWNoIGRvZXNuJ3QgY29udmVydCBudWxsaXNoXG4gKiB2YWx1ZXMgdG8gZW1wdHkgc3RyaW5ncy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG4gIC8vIEV4aXQgZWFybHkgZm9yIHN0cmluZ3MgdG8gYXZvaWQgYSBwZXJmb3JtYW5jZSBoaXQgaW4gc29tZSBlbnZpcm9ubWVudHMuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBzeW1ib2xUb1N0cmluZyA/IHN5bWJvbFRvU3RyaW5nLmNhbGwodmFsdWUpIDogJyc7XG4gIH1cbiAgdmFyIHJlc3VsdCA9ICh2YWx1ZSArICcnKTtcbiAgcmV0dXJuIChyZXN1bHQgPT0gJzAnICYmICgxIC8gdmFsdWUpID09IC1JTkZJTklUWSkgPyAnLTAnIDogcmVzdWx0O1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQgZm9yIGBudWxsYFxuICogYW5kIGB1bmRlZmluZWRgIHZhbHVlcy4gVGhlIHNpZ24gb2YgYC0wYCBpcyBwcmVzZXJ2ZWQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9TdHJpbmcobnVsbCk7XG4gKiAvLyA9PiAnJ1xuICpcbiAqIF8udG9TdHJpbmcoLTApO1xuICogLy8gPT4gJy0wJ1xuICpcbiAqIF8udG9TdHJpbmcoWzEsIDIsIDNdKTtcbiAqIC8vID0+ICcxLDIsMydcbiAqL1xuZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IGJhc2VUb1N0cmluZyh2YWx1ZSk7XG59XG5cbi8qKlxuICogVGhlIGludmVyc2Ugb2YgYF8uZXNjYXBlYDsgdGhpcyBtZXRob2QgY29udmVydHMgdGhlIEhUTUwgZW50aXRpZXNcbiAqIGAmYW1wO2AsIGAmbHQ7YCwgYCZndDtgLCBgJnF1b3Q7YCwgYCYjMzk7YCwgYW5kIGAmIzk2O2AgaW4gYHN0cmluZ2AgdG9cbiAqIHRoZWlyIGNvcnJlc3BvbmRpbmcgY2hhcmFjdGVycy5cbiAqXG4gKiAqKk5vdGU6KiogTm8gb3RoZXIgSFRNTCBlbnRpdGllcyBhcmUgdW5lc2NhcGVkLiBUbyB1bmVzY2FwZSBhZGRpdGlvbmFsXG4gKiBIVE1MIGVudGl0aWVzIHVzZSBhIHRoaXJkLXBhcnR5IGxpYnJhcnkgbGlrZSBbX2hlX10oaHR0cHM6Ly9tdGhzLmJlL2hlKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuNi4wXG4gKiBAY2F0ZWdvcnkgU3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byB1bmVzY2FwZS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHVuZXNjYXBlZCBzdHJpbmcuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udW5lc2NhcGUoJ2ZyZWQsIGJhcm5leSwgJmFtcDsgcGViYmxlcycpO1xuICogLy8gPT4gJ2ZyZWQsIGJhcm5leSwgJiBwZWJibGVzJ1xuICovXG5mdW5jdGlvbiB1bmVzY2FwZShzdHJpbmcpIHtcbiAgc3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtcbiAgcmV0dXJuIChzdHJpbmcgJiYgcmVIYXNFc2NhcGVkSHRtbC50ZXN0KHN0cmluZykpXG4gICAgPyBzdHJpbmcucmVwbGFjZShyZUVzY2FwZWRIdG1sLCB1bmVzY2FwZUh0bWxDaGFyKVxuICAgIDogc3RyaW5nO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHVuZXNjYXBlO1xuIiwiaW1wb3J0IHVuZXNjYXBlIGZyb20gXCJsb2Rhc2gudW5lc2NhcGVcIjtcblxuY29uc3QgVE9LRU5fRVNDQVBFRF9PQ1RPID0gXCJfX1RPS0VOX0VTQ0FQRURfQkFDS1NMQVNIX09DVE9fX1wiO1xuXG5jb25zdCBCTE9DS19ESVJFQ1RJVkUgPSAvXiMjI0AoW1xcU10rKShbXFxzXFxTXSo/KSMjIy9nbTtcbmNvbnN0IElOTElORV9ESVJFQ1RJVkUgPSAvXiNAKFtcXFNdKykoLiopL2c7XG5cbmNvbnN0IEJMT0NLX0NPTU1FTlQgPSAvIyMjW1xcc1xcU10qPyMjIy9nbTtcbmNvbnN0IElOTElORV9DT01NRU5UID0gL14jLiokL2c7XG5cbmNvbnN0IElTX0VYVEVSTkFMX1VSTCA9IC9eXFx3KzpcXC9cXC9cXC8/XFx3L2k7XG5jb25zdCBMSU5LX1BBVFRFUk4gPSAvXFxbXFxbKC4qPylcXF1cXF0vZztcblxuY29uc3QgZmluZFN0b3J5ID0gd2luID0+IHtcbiAgaWYgKHdpbiAmJiB3aW4uc3RvcnkpIHtcbiAgICByZXR1cm4gd2luLnN0b3J5O1xuICB9XG4gIHJldHVybiB7IHN0YXRlOiB7fSB9O1xufTtcblxuY29uc3QgZXNjYXBlT2N0b3MgPSBzID0+IHMucmVwbGFjZShcIlxcXFwjXCIsIFRPS0VOX0VTQ0FQRURfT0NUTyk7XG5jb25zdCByZXN0b3JlT2N0b3MgPSBzID0+IHMucmVwbGFjZShUT0tFTl9FU0NBUEVEX09DVE8sIFwiI1wiKTtcblxuY29uc3Qgc3RyaXBDb21tZW50cyA9IHMgPT5cbiAgcy5yZXBsYWNlKEJMT0NLX0NPTU1FTlQsIFwiXCIpLnJlcGxhY2UoSU5MSU5FX0NPTU1FTlQsIFwiXCIpO1xuXG5jb25zdCBleHRyYWN0RGlyZWN0aXZlcyA9IHMgPT4ge1xuICBjb25zdCBkaXJlY3RpdmVzID0gW107XG4gIHMucmVwbGFjZShCTE9DS19ESVJFQ1RJVkUsIChtYXRjaCwgZGlyLCBjb250ZW50KSA9PiB7XG4gICAgZGlyZWN0aXZlcy5wdXNoKHsgbmFtZTogYEAke2Rpcn1gLCBjb250ZW50OiBjb250ZW50LnRyaW0oKSB9KTtcbiAgICByZXR1cm4gXCJcIjtcbiAgfSk7XG4gIHMucmVwbGFjZShJTkxJTkVfRElSRUNUSVZFLCAobWF0Y2gsIGRpciwgY29udGVudCkgPT4ge1xuICAgIGRpcmVjdGl2ZXMucHVzaCh7IG5hbWU6IGBAJHtkaXJ9YCwgY29udGVudDogY29udGVudC50cmltKCkgfSk7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH0pO1xuXG4gIHJldHVybiBkaXJlY3RpdmVzO1xufTtcblxuY29uc3QgcmVuZGVyUGFzc2FnZSA9IHBhc3NhZ2UgPT4ge1xuICBjb25zdCBzb3VyY2UgPSBwYXNzYWdlLnNvdXJjZTtcblxuICBsZXQgcmVzdWx0ID0gc291cmNlO1xuXG4gIHJlc3VsdCA9IGVzY2FwZU9jdG9zKHJlc3VsdCk7XG4gIGNvbnN0IGRpcmVjdGl2ZXMgPSBleHRyYWN0RGlyZWN0aXZlcyhyZXN1bHQpO1xuICByZXN1bHQgPSBzdHJpcENvbW1lbnRzKHJlc3VsdCk7XG4gIHJlc3VsdCA9IHJlc3RvcmVPY3RvcyhyZXN1bHQpO1xuXG4gIC8vIHN0cmlwIHJlbWFpbmluZyBjb21tZW50c1xuICByZXN1bHQgPSByZXN1bHRcbiAgICAucmVwbGFjZShcIlxcXFwjXCIsIFRPS0VOX0VTQ0FQRURfT0NUTylcbiAgICAucmVwbGFjZShCTE9DS19DT01NRU5ULCBcIlwiKVxuICAgIC5yZXBsYWNlKElOTElORV9DT01NRU5ULCBcIlwiKVxuICAgIC5yZXBsYWNlKFRPS0VOX0VTQ0FQRURfT0NUTywgXCIjXCIpXG4gICAgLnRyaW0oKTtcblxuICBpZiAocGFzc2FnZSkge1xuICAgIC8vIHJlbW92ZSBsaW5rcyBpZiBzZXQgcHJldmlvdXNseVxuICAgIHBhc3NhZ2UubGlua3MgPSBbXTtcbiAgfVxuXG4gIC8vIFtbbGlua3NdXVxuICByZXN1bHQgPSByZXN1bHQucmVwbGFjZShMSU5LX1BBVFRFUk4sIChtYXRjaCwgdCkgPT4ge1xuICAgIGxldCBkaXNwbGF5ID0gdDtcbiAgICBsZXQgdGFyZ2V0ID0gdDtcblxuICAgIC8vIGRpc3BsYXl8dGFyZ2V0IGZvcm1hdFxuICAgIGNvbnN0IGJhckluZGV4ID0gdC5pbmRleE9mKFwifFwiKTtcbiAgICBjb25zdCByaWdodEFyckluZGV4ID0gdC5pbmRleE9mKFwiLT5cIik7XG4gICAgY29uc3QgbGVmdEFyckluZGV4ID0gdC5pbmRleE9mKFwiPC1cIik7XG5cbiAgICBzd2l0Y2ggKHRydWUpIHtcbiAgICAgIGNhc2UgYmFySW5kZXggPj0gMDpcbiAgICAgICAgZGlzcGxheSA9IHQuc3Vic3RyKDAsIGJhckluZGV4KTtcbiAgICAgICAgdGFyZ2V0ID0gdC5zdWJzdHIoYmFySW5kZXggKyAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHJpZ2h0QXJySW5kZXggPj0gMDpcbiAgICAgICAgZGlzcGxheSA9IHQuc3Vic3RyKDAsIHJpZ2h0QXJySW5kZXgpO1xuICAgICAgICB0YXJnZXQgPSB0LnN1YnN0cihyaWdodEFyckluZGV4ICsgMik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBsZWZ0QXJySW5kZXggPj0gMDpcbiAgICAgICAgZGlzcGxheSA9IHQuc3Vic3RyKGxlZnRBcnJJbmRleCArIDIpO1xuICAgICAgICB0YXJnZXQgPSB0LnN1YnN0cigwLCBsZWZ0QXJySW5kZXgpO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvLyByZW5kZXIgYW4gZXh0ZXJuYWwgbGluayAmIHN0b3A/XG4gICAgaWYgKElTX0VYVEVSTkFMX1VSTC50ZXN0KHRhcmdldCkpIHtcbiAgICAgIHJldHVybiAnPGEgaHJlZj1cIicgKyB0YXJnZXQgKyAnXCIgdGFyZ2V0PVwiX2JsYW5rXCI+JyArIGRpc3BsYXkgKyBcIjwvYT5cIjtcbiAgICB9XG5cbiAgICAvLyBoYW5kbGUgcGFzc2FnZVxuICAgIGlmIChwYXNzYWdlKSB7XG4gICAgICBwYXNzYWdlLmxpbmtzLnB1c2goe1xuICAgICAgICBkaXNwbGF5LFxuICAgICAgICB0YXJnZXRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBcIlwiOyAvLyByZW5kZXIgbm90aGluZyBpZiBpdCdzIGEgdHdlZSBsaW5rXG4gIH0pO1xuXG4gIC8vIGJlZm9yZSBoYW5kbGluZyBhbnkgdGFncywgaGFuZGxlIGFueS9hbGwgZGlyZWN0aXZlc1xuICBkaXJlY3RpdmVzLmZvckVhY2goZCA9PiB7XG4gICAgaWYgKCFwYXNzYWdlLnN0b3J5LmRpcmVjdGl2ZXNbZC5uYW1lXSkgcmV0dXJuO1xuICAgIHBhc3NhZ2Uuc3RvcnkuZGlyZWN0aXZlc1tkLm5hbWVdLmZvckVhY2gocnVuID0+IHtcbiAgICAgIHJlc3VsdCA9IHJ1bihkLmNvbnRlbnQsIHJlc3VsdCwgcGFzc2FnZSwgcGFzc2FnZS5zdG9yeSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIGlmIHN5c3RlbSB0YWcsIHJldHVybiBhbiBlbXB0eSByZW5kZXIgc2V0XG4gIGlmIChwYXNzYWdlLmhhc1RhZyhcInN5c3RlbVwiKSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIC8vIGlmIHByb21wdCB0YWcgaXMgc2V0LCBub3RpZnkgdGhlIHN0b3J5XG4gIGlmIChwYXNzYWdlKSB7XG4gICAgY29uc3QgcHJvbXB0cyA9IHBhc3NhZ2UucHJlZml4VGFnKFwicHJvbXB0XCIpO1xuICAgIGlmIChwcm9tcHRzLmxlbmd0aCkge1xuICAgICAgcGFzc2FnZS5zdG9yeS5wcm9tcHQocHJvbXB0c1swXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gaWYgdGhpcyBpcyBhIG11bHRpbGluZSBpdGVtLCB0cmltLCBzcGxpdCwgYW5kIG1hcmsgZWFjaCBpdGVtXG4gIC8vIHJldHVybiB0aGUgYXJyYXlcbiAgaWYgKHBhc3NhZ2UuaGFzVGFnKFwibXVsdGlsaW5lXCIpKSB7XG4gICAgcmVzdWx0ID0gcmVzdWx0LnRyaW0oKTtcbiAgICByZXR1cm4gcmVzdWx0LnNwbGl0KC9bXFxyXFxuXSsvZyk7XG4gIH1cblxuICAvLyBlbHNlIHJldHVybnMgYW4gYXJyYXkgb2YgMVxuICByZXR1cm4gW3Jlc3VsdF07XG59O1xuXG5jbGFzcyBQYXNzYWdlIHtcbiAgaWQgPSBudWxsO1xuICBuYW1lID0gbnVsbDtcbiAgdGFncyA9IG51bGw7XG4gIHRhZ0RpY3QgPSB7fTtcbiAgc291cmNlID0gbnVsbDtcbiAgbGlua3MgPSBbXTtcblxuICBjb25zdHJ1Y3RvcihpZCwgbmFtZSwgdGFncywgc291cmNlLCBzdG9yeSkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMudGFncyA9IHRhZ3M7XG4gICAgdGhpcy5zb3VyY2UgPSB1bmVzY2FwZShzb3VyY2UpO1xuICAgIHRoaXMuc3RvcnkgPSBzdG9yeTtcblxuICAgIHRoaXMudGFncy5mb3JFYWNoKHQgPT4gKHRoaXMudGFnRGljdFt0XSA9IDEpKTtcbiAgfVxuXG4gIGdldFNwZWFrZXIgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3BlYWtlclRhZyA9IHRoaXMudGFncy5maW5kKHQgPT4gdC5pbmRleE9mKFwic3BlYWtlci1cIikgPT09IDApIHx8IFwiXCI7XG4gICAgY29uc3Qgc3lzdGVtVGFnID0gdGhpcy5oYXNUYWcoXCJzeXN0ZW1cIik7XG4gICAgaWYgKHNwZWFrZXJUYWcpIHJldHVybiBzcGVha2VyVGFnLnJlcGxhY2UoL15zcGVha2VyLS8sIFwiXCIpO1xuICAgIGlmIChzeXN0ZW1UYWcpIHJldHVybiBcInN5c3RlbVwiO1xuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIHByZWZpeFRhZyA9IChwZngsIGFzRGljdCkgPT5cbiAgICB0aGlzLnRhZ3NcbiAgICAgIC5maWx0ZXIodCA9PiB0LmluZGV4T2YoYCR7cGZ4fS1gKSA9PT0gMClcbiAgICAgIC5tYXAodCA9PiB0LnJlcGxhY2UoYCR7cGZ4fS1gLCBcIlwiKSlcbiAgICAgIC5yZWR1Y2UoXG4gICAgICAgIChhLCB0KSA9PiB7XG4gICAgICAgICAgaWYgKGFzRGljdClcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmEsXG4gICAgICAgICAgICAgIFt0XTogMVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgIHJldHVybiBbLi4uYSwgdF07XG4gICAgICAgIH0sXG4gICAgICAgIGFzRGljdCA/IHt9IDogW11cbiAgICAgICk7XG5cbiAgaGFzVGFnID0gdCA9PiB0aGlzLnRhZ0RpY3RbdF07XG5cbiAgLy8gc3RhdGljIGFuZCBpbnN0YW5jZSByZW5kZXJzXG4gIHN0YXRpYyByZW5kZXIgPSBzdHIgPT5cbiAgICByZW5kZXJQYXNzYWdlKFxuICAgICAgbmV3IFBhc3NhZ2UobnVsbCwgbnVsbCwgbnVsbCwgc3RyLCBmaW5kU3Rvcnkod2luZG93IHx8IG51bGwpKVxuICAgICk7XG4gIHJlbmRlciA9ICgpID0+IHJlbmRlclBhc3NhZ2UodGhpcyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBhc3NhZ2U7XG4iLCIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgSU5GSU5JVFkgPSAxIC8gMDtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBIVE1MIGVudGl0aWVzIGFuZCBIVE1MIGNoYXJhY3RlcnMuICovXG52YXIgcmVVbmVzY2FwZWRIdG1sID0gL1smPD5cIidgXS9nLFxuICAgIHJlSGFzVW5lc2NhcGVkSHRtbCA9IFJlZ0V4cChyZVVuZXNjYXBlZEh0bWwuc291cmNlKTtcblxuLyoqIFVzZWQgdG8gbWFwIGNoYXJhY3RlcnMgdG8gSFRNTCBlbnRpdGllcy4gKi9cbnZhciBodG1sRXNjYXBlcyA9IHtcbiAgJyYnOiAnJmFtcDsnLFxuICAnPCc6ICcmbHQ7JyxcbiAgJz4nOiAnJmd0OycsXG4gICdcIic6ICcmcXVvdDsnLFxuICBcIidcIjogJyYjMzk7JyxcbiAgJ2AnOiAnJiM5NjsnXG59O1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xudmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cbi8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlPZmAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZVByb3BlcnR5T2Yob2JqZWN0KSB7XG4gIHJldHVybiBmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgfTtcbn1cblxuLyoqXG4gKiBVc2VkIGJ5IGBfLmVzY2FwZWAgdG8gY29udmVydCBjaGFyYWN0ZXJzIHRvIEhUTUwgZW50aXRpZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBjaHIgVGhlIG1hdGNoZWQgY2hhcmFjdGVyIHRvIGVzY2FwZS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgY2hhcmFjdGVyLlxuICovXG52YXIgZXNjYXBlSHRtbENoYXIgPSBiYXNlUHJvcGVydHlPZihodG1sRXNjYXBlcyk7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBTeW1ib2wgPSByb290LlN5bWJvbDtcblxuLyoqIFVzZWQgdG8gY29udmVydCBzeW1ib2xzIHRvIHByaW1pdGl2ZXMgYW5kIHN0cmluZ3MuICovXG52YXIgc3ltYm9sUHJvdG8gPSBTeW1ib2wgPyBTeW1ib2wucHJvdG90eXBlIDogdW5kZWZpbmVkLFxuICAgIHN5bWJvbFRvU3RyaW5nID0gc3ltYm9sUHJvdG8gPyBzeW1ib2xQcm90by50b1N0cmluZyA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50b1N0cmluZ2Agd2hpY2ggZG9lc24ndCBjb252ZXJ0IG51bGxpc2hcbiAqIHZhbHVlcyB0byBlbXB0eSBzdHJpbmdzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBiYXNlVG9TdHJpbmcodmFsdWUpIHtcbiAgLy8gRXhpdCBlYXJseSBmb3Igc3RyaW5ncyB0byBhdm9pZCBhIHBlcmZvcm1hbmNlIGhpdCBpbiBzb21lIGVudmlyb25tZW50cy5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIHN5bWJvbFRvU3RyaW5nID8gc3ltYm9sVG9TdHJpbmcuY2FsbCh2YWx1ZSkgOiAnJztcbiAgfVxuICB2YXIgcmVzdWx0ID0gKHZhbHVlICsgJycpO1xuICByZXR1cm4gKHJlc3VsdCA9PSAnMCcgJiYgKDEgLyB2YWx1ZSkgPT0gLUlORklOSVRZKSA/ICctMCcgOiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZCBmb3IgYG51bGxgXG4gKiBhbmQgYHVuZGVmaW5lZGAgdmFsdWVzLiBUaGUgc2lnbiBvZiBgLTBgIGlzIHByZXNlcnZlZC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b1N0cmluZyhudWxsKTtcbiAqIC8vID0+ICcnXG4gKlxuICogXy50b1N0cmluZygtMCk7XG4gKiAvLyA9PiAnLTAnXG4gKlxuICogXy50b1N0cmluZyhbMSwgMiwgM10pO1xuICogLy8gPT4gJzEsMiwzJ1xuICovXG5mdW5jdGlvbiB0b1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogYmFzZVRvU3RyaW5nKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgY2hhcmFjdGVycyBcIiZcIiwgXCI8XCIsIFwiPlwiLCAnXCInLCBcIidcIiwgYW5kIFwiXFxgXCIgaW4gYHN0cmluZ2AgdG9cbiAqIHRoZWlyIGNvcnJlc3BvbmRpbmcgSFRNTCBlbnRpdGllcy5cbiAqXG4gKiAqKk5vdGU6KiogTm8gb3RoZXIgY2hhcmFjdGVycyBhcmUgZXNjYXBlZC4gVG8gZXNjYXBlIGFkZGl0aW9uYWxcbiAqIGNoYXJhY3RlcnMgdXNlIGEgdGhpcmQtcGFydHkgbGlicmFyeSBsaWtlIFtfaGVfXShodHRwczovL210aHMuYmUvaGUpLlxuICpcbiAqIFRob3VnaCB0aGUgXCI+XCIgY2hhcmFjdGVyIGlzIGVzY2FwZWQgZm9yIHN5bW1ldHJ5LCBjaGFyYWN0ZXJzIGxpa2VcbiAqIFwiPlwiIGFuZCBcIi9cIiBkb24ndCBuZWVkIGVzY2FwaW5nIGluIEhUTUwgYW5kIGhhdmUgbm8gc3BlY2lhbCBtZWFuaW5nXG4gKiB1bmxlc3MgdGhleSdyZSBwYXJ0IG9mIGEgdGFnIG9yIHVucXVvdGVkIGF0dHJpYnV0ZSB2YWx1ZS4gU2VlXG4gKiBbTWF0aGlhcyBCeW5lbnMncyBhcnRpY2xlXShodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvYW1iaWd1b3VzLWFtcGVyc2FuZHMpXG4gKiAodW5kZXIgXCJzZW1pLXJlbGF0ZWQgZnVuIGZhY3RcIikgZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBCYWNrdGlja3MgYXJlIGVzY2FwZWQgYmVjYXVzZSBpbiBJRSA8IDksIHRoZXkgY2FuIGJyZWFrIG91dCBvZlxuICogYXR0cmlidXRlIHZhbHVlcyBvciBIVE1MIGNvbW1lbnRzLiBTZWUgWyM1OV0oaHR0cHM6Ly9odG1sNXNlYy5vcmcvIzU5KSxcbiAqIFsjMTAyXShodHRwczovL2h0bWw1c2VjLm9yZy8jMTAyKSwgWyMxMDhdKGh0dHBzOi8vaHRtbDVzZWMub3JnLyMxMDgpLCBhbmRcbiAqIFsjMTMzXShodHRwczovL2h0bWw1c2VjLm9yZy8jMTMzKSBvZiB0aGVcbiAqIFtIVE1MNSBTZWN1cml0eSBDaGVhdHNoZWV0XShodHRwczovL2h0bWw1c2VjLm9yZy8pIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogV2hlbiB3b3JraW5nIHdpdGggSFRNTCB5b3Ugc2hvdWxkIGFsd2F5c1xuICogW3F1b3RlIGF0dHJpYnV0ZSB2YWx1ZXNdKGh0dHA6Ly93b25rby5jb20vcG9zdC9odG1sLWVzY2FwaW5nKSB0byByZWR1Y2VcbiAqIFhTUyB2ZWN0b3JzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBzaW5jZSAwLjEuMFxuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBTdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGVzY2FwZS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgc3RyaW5nLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmVzY2FwZSgnZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnKTtcbiAqIC8vID0+ICdmcmVkLCBiYXJuZXksICZhbXA7IHBlYmJsZXMnXG4gKi9cbmZ1bmN0aW9uIGVzY2FwZShzdHJpbmcpIHtcbiAgc3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtcbiAgcmV0dXJuIChzdHJpbmcgJiYgcmVIYXNVbmVzY2FwZWRIdG1sLnRlc3Qoc3RyaW5nKSlcbiAgICA/IHN0cmluZy5yZXBsYWNlKHJlVW5lc2NhcGVkSHRtbCwgZXNjYXBlSHRtbENoYXIpXG4gICAgOiBzdHJpbmc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXNjYXBlO1xuIiwiaW1wb3J0IFBhc3NhZ2UgZnJvbSBcIi4vUGFzc2FnZVwiO1xuaW1wb3J0IGVzY2FwZSBmcm9tIFwibG9kYXNoLmVzY2FwZVwiO1xuXG5jb25zdCBzZWxlY3RQYXNzYWdlcyA9IFwidHctcGFzc2FnZWRhdGFcIjtcbmNvbnN0IHNlbGVjdENzcyA9ICcqW3R5cGU9XCJ0ZXh0L3R3aW5lLWNzc1wiXSc7XG5jb25zdCBzZWxlY3RKcyA9ICcqW3R5cGU9XCJ0ZXh0L3R3aW5lLWphdmFzY3JpcHRcIl0nO1xuY29uc3Qgc2VsZWN0QWN0aXZlTGluayA9IFwiI3VzZXItcmVzcG9uc2UtcGFuZWwgYVtkYXRhLXBhc3NhZ2VdXCI7XG5jb25zdCBzZWxlY3RBY3RpdmVCdXR0b24gPSBcIiN1c2VyLXJlc3BvbnNlLXBhbmVsIGJ1dHRvbltkYXRhLXBhc3NhZ2VdXCI7XG5jb25zdCBzZWxlY3RBY3RpdmVJbnB1dCA9IFwiI3VzZXItcmVzcG9uc2UtcGFuZWwgaW5wdXRcIjtcbmNvbnN0IHNlbGVjdEFjdGl2ZSA9IFwiLmNoYXQtcGFuZWwgLmFjdGl2ZVwiO1xuY29uc3Qgc2VsZWN0SGlzdG9yeSA9IFwiLmNoYXQtcGFuZWwgLmhpc3RvcnlcIjtcbmNvbnN0IHNlbGVjdFJlc3BvbnNlcyA9IFwiI3VzZXItcmVzcG9uc2UtcGFuZWxcIjtcbmNvbnN0IHR5cGluZ0luZGljYXRvciA9IFwiI2FuaW1hdGlvbi1jb250YWluZXJcIjtcblxuY29uc3QgSVNfTlVNRVJJQyA9IC9eW1xcZF0rJC87XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgcHJvdmlkZWQgc3RyaW5nIGNvbnRhaW5zIG9ubHkgbnVtYmVyc1xuICogSW4gdGhlIGNhc2Ugb2YgYHBpZGAgdmFsdWVzIGZvciBwYXNzYWdlcywgdGhpcyBpcyB0cnVlXG4gKi9cbmNvbnN0IGlzTnVtZXJpYyA9IGQgPT4gSVNfTlVNRVJJQy50ZXN0KGQpO1xuXG4vKipcbiAqIEZvcm1hdCBhIHVzZXIgcGFzc2FnZSAoc3VjaCBhcyBhIHJlc3BvbnNlKVxuICovXG5jb25zdCBVU0VSX1BBU1NBR0VfVE1QTCA9ICh7IGlkLCB0ZXh0IH0pID0+IGBcbiAgPGRpdiBjbGFzcz1cImNoYXQtcGFzc2FnZS13cmFwcGVyXCIgZGF0YS1zcGVha2VyPVwieW91XCI+XG4gICAgPGRpdiBjbGFzcz1cImNoYXQtcGFzc2FnZSBwaGlzdG9yeVwiIGRhdGEtc3BlYWtlcj1cInlvdVwiIGRhdGEtdXBhc3NhZ2U9XCIke2lkfVwiPlxuICAgICAgJHt0ZXh0fVxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbmA7XG5cbi8qKlxuICogRm9ybWF0IGEgbWVzc2FnZSBmcm9tIGEgbm9uLXVzZXJcbiAqL1xuY29uc3QgT1RIRVJfUEFTU0FHRV9UTVBMID0gKHsgc3BlYWtlciwgdGFncywgdGV4dCB9KSA9PiBgXG4gIDxkaXYgZGF0YS1zcGVha2VyPVwiJHtzcGVha2VyfVwiIGNsYXNzPVwiY2hhdC1wYXNzYWdlLXdyYXBwZXIgJHt0YWdzLmpvaW4oXCIgXCIpfVwiPlxuICAgIDxkaXYgZGF0YS1zcGVha2VyPVwiJHtzcGVha2VyfVwiIGNsYXNzPVwiY2hhdC1wYXNzYWdlXCI+XG4gICAgICAke3RleHR9XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuYDtcblxuLyoqXG4gKiBGb3JjZXMgYSBkZWxheSB2aWEgcHJvbWlzZXMgaW4gb3JkZXIgdG8gc3ByZWFkIG91dCBtZXNzYWdlc1xuICovXG5jb25zdCBkZWxheSA9IGFzeW5jICh0ID0gMCkgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHQpKTtcblxuLy8gRmluZCBvbmUvbWFueSBub2RlcyB3aXRoaW4gYSBjb250ZXh0LiBXZSBbLi4uZmluZEFsbF0gdG8gZW5zdXJlIHdlJ3JlIGNhc3QgYXMgYW4gYXJyYXlcbi8vIG5vdCBhcyBhIG5vZGUgbGlzdFxuY29uc3QgZmluZCA9IChjdHgsIHMpID0+IGN0eC5xdWVyeVNlbGVjdG9yKHMpO1xuY29uc3QgZmluZEFsbCA9IChjdHgsIHMpID0+IFsuLi5jdHgucXVlcnlTZWxlY3RvckFsbChzKV0gfHwgW107XG5cbi8qKlxuICogU3RhbmRhcmQgVHdpbmUgRm9ybWF0IFN0b3J5IE9iamVjdFxuICovXG5jbGFzcyBTdG9yeSB7XG4gIHZlcnNpb24gPSAyOyAvLyBUd2luZSB2MlxuXG4gIGRvY3VtZW50ID0gbnVsbDtcbiAgc3RvcnkgPSBudWxsO1xuICBuYW1lID0gXCJcIjtcbiAgc3RhcnRzQXQgPSAwO1xuICBjdXJyZW50ID0gMDtcbiAgaGlzdG9yeSA9IFtdO1xuICBwYXNzYWdlcyA9IHt9O1xuICBzaG93UHJvbXB0ID0gZmFsc2U7XG4gIGVycm9yTWVzc2FnZSA9IFwiXFx1MjZhMCAlc1wiO1xuXG4gIGRpcmVjdGl2ZXMgPSB7fTtcbiAgZWxlbWVudHMgPSB7fTtcblxuICB1c2VyU2NyaXB0cyA9IFtdO1xuICB1c2VyU3R5bGVzID0gW107XG5cbiAgY29uc3RydWN0b3Iod2luLCBzcmMpIHtcbiAgICB0aGlzLndpbmRvdyA9IHdpbjtcblxuICAgIGlmIChzcmMpIHtcbiAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoXG4gICAgICAgIFwiQ2hhdGJvb2sgSW5qZWN0ZWQgQ29udGVudFwiXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgfVxuXG4gICAgdGhpcy5zdG9yeSA9IGZpbmQodGhpcy5kb2N1bWVudCwgXCJ0dy1zdG9yeWRhdGFcIik7XG5cbiAgICAvLyBlbGVtZW50c1xuICAgIHRoaXMuZWxlbWVudHMgPSB7XG4gICAgICBhY3RpdmU6IGZpbmQodGhpcy5kb2N1bWVudCwgc2VsZWN0QWN0aXZlKSxcbiAgICAgIGhpc3Rvcnk6IGZpbmQodGhpcy5kb2N1bWVudCwgc2VsZWN0SGlzdG9yeSlcbiAgICB9O1xuXG4gICAgLy8gcHJvcGVydGllcyBvZiBzdG9yeSBub2RlXG4gICAgdGhpcy5uYW1lID0gdGhpcy5zdG9yeS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpIHx8IFwiXCI7XG4gICAgdGhpcy5zdGFydHNBdCA9IHRoaXMuc3RvcnkuZ2V0QXR0cmlidXRlKFwic3RhcnRub2RlXCIpIHx8IDA7XG5cbiAgICBmaW5kQWxsKHRoaXMuc3RvcnksIHNlbGVjdFBhc3NhZ2VzKS5mb3JFYWNoKHAgPT4ge1xuICAgICAgY29uc3QgaWQgPSBwYXJzZUludChwLmdldEF0dHJpYnV0ZShcInBpZFwiKSk7XG4gICAgICBjb25zdCBuYW1lID0gcC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xuICAgICAgY29uc3QgdGFncyA9IChwLmdldEF0dHJpYnV0ZShcInRhZ3NcIikgfHwgXCJcIikuc3BsaXQoL1xccysvZyk7XG4gICAgICBjb25zdCBwYXNzYWdlID0gcC5pbm5lckhUTUwgfHwgXCJcIjtcblxuICAgICAgdGhpcy5wYXNzYWdlc1tpZF0gPSBuZXcgUGFzc2FnZShpZCwgbmFtZSwgdGFncywgcGFzc2FnZSwgdGhpcyk7XG4gICAgfSk7XG5cbiAgICBmaW5kKHRoaXMuZG9jdW1lbnQsIFwidGl0bGVcIikuaW5uZXJIVE1MID0gdGhpcy5uYW1lO1xuICAgIGZpbmQodGhpcy5kb2N1bWVudCwgXCIjcHRpdGxlXCIpLmlubmVySFRNTCA9IHRoaXMubmFtZTtcblxuICAgIHRoaXMudXNlclNjcmlwdHMgPSAoZmluZEFsbCh0aGlzLmRvY3VtZW50LCBzZWxlY3RKcykgfHwgW10pLm1hcChcbiAgICAgIGVsID0+IGVsLmlubmVySFRNTFxuICAgICk7XG4gICAgdGhpcy51c2VyU3R5bGVzID0gKGZpbmRBbGwodGhpcy5kb2N1bWVudCwgc2VsZWN0Q3NzKSB8fCBbXSkubWFwKFxuICAgICAgZWwgPT4gZWwuaW5uZXJIVE1MXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIHN0b3J5IGJ5IHNldHRpbmcgdXAgbGlzdGVuZXJzIGFuZCB0aGVuIGFkdmFuY2luZ1xuICAgKiB0byB0aGUgZmlyc3QgaXRlbSBpbiB0aGUgc3RhY2tcbiAgICovXG4gIHN0YXJ0ID0gKCkgPT4ge1xuICAgIC8vIGFjdGl2YXRlIHVzZXJzY3JpcHRzIGFuZCBzdHlsZXNcbiAgICB0aGlzLnVzZXJTdHlsZXMuZm9yRWFjaChzID0+IHtcbiAgICAgIGNvbnN0IHQgPSB0aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgIHQuaW5uZXJIVE1MID0gcztcbiAgICAgIHRoaXMuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0KTtcbiAgICB9KTtcbiAgICB0aGlzLnVzZXJTY3JpcHRzLmZvckVhY2gocyA9PiB7XG4gICAgICAvLyBldmFsIGlzIGV2aWwsIGJ1dCB0aGlzIGlzIHNpbXBseSBob3cgVHdpbmUgd29ya3NcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgIGdsb2JhbEV2YWwocyk7XG4gICAgfSk7XG5cbiAgICAvLyB3aGVuIHlvdSBjbGljayBvbiBhW2RhdGEtcGFzc2FnZV0gKHJlc3BvbnNlIGxpbmspLi4uXG4gICAgdGhpcy5kb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcbiAgICAgIGlmICghZS50YXJnZXQubWF0Y2hlcyhzZWxlY3RBY3RpdmVMaW5rKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYWR2YW5jZShcbiAgICAgICAgdGhpcy5maW5kUGFzc2FnZShlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBhc3NhZ2VcIikpLFxuICAgICAgICBlLnRhcmdldC5pbm5lckhUTUxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICAvLyB3aGVuIHlvdSBjbGljayBvbiBidXR0b25bZGF0YS1wYXNzYWdlXSAocmVzcG9uc2UgaW5wdXQpLi4uXG4gICAgdGhpcy5kb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcbiAgICAgIGlmICghZS50YXJnZXQubWF0Y2hlcyhzZWxlY3RBY3RpdmVCdXR0b24pKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gY2FwdHVyZSBhbmQgZGlzYWJsZSBzaG93UHJvbXB0IGZlYXR1cmVcbiAgICAgIGNvbnN0IHZhbHVlID0gZmluZCh0aGlzLmRvY3VtZW50LCBzZWxlY3RBY3RpdmVJbnB1dCkudmFsdWU7XG4gICAgICB0aGlzLnNob3dQcm9tcHQgPSBmYWxzZTtcblxuICAgICAgdGhpcy5hZHZhbmNlKFxuICAgICAgICB0aGlzLmZpbmRQYXNzYWdlKGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtcGFzc2FnZVwiKSksXG4gICAgICAgIHZhbHVlXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZHZhbmNlKHRoaXMuZmluZFBhc3NhZ2UodGhpcy5zdGFydHNBdCkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBGaW5kIGEgcGFzc2FnZSBiYXNlZCBvbiBpdHMgaWQgb3IgbmFtZVxuICAgKi9cbiAgZmluZFBhc3NhZ2UgPSBpZE9yTmFtZSA9PiB7XG4gICAgaWYgKGlzTnVtZXJpYyhpZE9yTmFtZSkpIHtcbiAgICAgIHJldHVybiB0aGlzLnBhc3NhZ2VzW2lkT3JOYW1lXTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaGFuZGxlIHBhc3NhZ2VzIHdpdGggJyBhbmQgXCIgKGNhbid0IHVzZSBhIGNzcyBzZWxlY3RvciBjb25zaXN0ZW50bHkpXG4gICAgICBjb25zdCBwID0gZmluZEFsbCh0aGlzLnN0b3J5LCBcInR3LXBhc3NhZ2VkYXRhXCIpLmZpbHRlcihcbiAgICAgICAgcCA9PiBwLmdldEF0dHJpYnV0ZShcIm5hbWVcIikgPT09IGlkT3JOYW1lXG4gICAgICApWzBdO1xuICAgICAgaWYgKCFwKSByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiB0aGlzLnBhc3NhZ2VzW3AuZ2V0QXR0cmlidXRlKFwicGlkXCIpXTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkdmFuY2UgdGhlIHN0b3J5IHRvIHRoZSBwYXNzYWdlIHNwZWNpZmllZCwgb3B0aW9uYWxseSBhZGRpbmcgdXNlclRleHRcbiAgICovXG4gIGFkdmFuY2UgPSBhc3luYyAocGFzc2FnZSwgdXNlclRleHQgPSBudWxsKSA9PiB7XG4gICAgdGhpcy5oaXN0b3J5LnB1c2gocGFzc2FnZS5pZCk7XG4gICAgY29uc3QgbGFzdCA9IHRoaXMuY3VycmVudDtcblxuICAgIC8vIC5hY3RpdmUgaXMgY2FwdHVyZWQgJiBjbGVhcmVkXG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLmVsZW1lbnRzLmFjdGl2ZS5pbm5lckhUTUw7XG4gICAgdGhpcy5lbGVtZW50cy5hY3RpdmUuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgIC8vIHdoYXRldmVyIHdhcyBpbiBhY3RpdmUgaXMgbW92ZWQgdXAgaW50byBoaXN0b3J5XG4gICAgdGhpcy5lbGVtZW50cy5oaXN0b3J5LmlubmVySFRNTCArPSBleGlzdGluZztcblxuICAgIC8vIGlmIHRoZXJlIGlzIHVzZXJUZXh0LCBpdCBpcyBhZGRlZCB0byAuaGlzdG9yeVxuICAgIGlmICh1c2VyVGV4dCkge1xuICAgICAgdGhpcy5yZW5kZXJVc2VyTWVzc2FnZShcbiAgICAgICAgbGFzdCxcbiAgICAgICAgdXNlclRleHQsXG4gICAgICAgIHMgPT4gKHRoaXMuZWxlbWVudHMuaGlzdG9yeS5pbm5lckhUTUwgKz0gcylcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVGhlIG5ldyBwYXNzYWdlIGlzIHJlbmRlcmVkIGFuZCBwbGFjZWQgaW4gLmFjdGl2ZVxuICAgIC8vIGFmdGVyIGFsbCByZW5kZXJzLCB1c2VyIG9wdGlvbnMgYXJlIGRpc3BsYXllZFxuICAgIGF3YWl0IHRoaXMucmVuZGVyUGFzc2FnZShcbiAgICAgIHBhc3NhZ2UsXG4gICAgICBzID0+ICh0aGlzLmVsZW1lbnRzLmFjdGl2ZS5pbm5lckhUTUwgKz0gcylcbiAgICApO1xuICAgIGlmIChwYXNzYWdlLmhhc1RhZyhcImF1dG9cIikpIHtcbiAgICAgIC8vIGF1dG8gYWR2YW5jZSBpZiB0aGUgYXV0byB0YWcgaXMgc2V0LCBza2lwcGluZyBhbnl0aGluZyB0aGF0XG4gICAgICAvLyBjb3VsZCBwYXVzZSBvdXIgb3BlcmF0aW9uXG4gICAgICB0aGlzLmFkdmFuY2UodGhpcy5maW5kUGFzc2FnZShwYXNzYWdlLmxpbmtzWzBdLnRhcmdldCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGlmIHByb21wdCBpcyBzZXQgZnJvbSB0aGUgY3VycmVudCBub2RlLCBlbmFibGUgZnJlZXRleHRcbiAgICBpZiAodGhpcy5zaG93UHJvbXB0KSB7XG4gICAgICB0aGlzLnJlbmRlclRleHRJbnB1dChwYXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW5kZXJDaG9pY2VzKHBhc3NhZ2UpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVuZGVyIHRleHQgYXMgaWYgaXQgY2FtZSBmcm9tIHRoZSB1c2VyXG4gICAqL1xuICByZW5kZXJVc2VyTWVzc2FnZSA9IGFzeW5jIChwaWQsIHRleHQsIHJlbmRlcmVyKSA9PiB7XG4gICAgYXdhaXQgcmVuZGVyZXIoXG4gICAgICBVU0VSX1BBU1NBR0VfVE1QTCh7XG4gICAgICAgIHBpZCxcbiAgICAgICAgdGV4dFxuICAgICAgfSlcbiAgICApO1xuICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbmRlciBhIFR3aW5lK0NoYXRib29rIHBhc3NhZ2Ugb2JqZWN0XG4gICAqL1xuICByZW5kZXJQYXNzYWdlID0gYXN5bmMgKHBhc3NhZ2UsIHJlbmRlcmVyKSA9PiB7XG4gICAgY29uc3Qgc3BlYWtlciA9IHBhc3NhZ2UuZ2V0U3BlYWtlcigpO1xuICAgIGxldCBzdGF0ZW1lbnRzID0gcGFzc2FnZS5yZW5kZXIoKTtcbiAgICBsZXQgbmV4dCA9IHN0YXRlbWVudHMuc2hpZnQoKTtcbiAgICB0aGlzLnNob3dUeXBpbmcoKTtcbiAgICB3aGlsZSAobmV4dCkge1xuICAgICAgY29uc3QgY29udGVudCA9IE9USEVSX1BBU1NBR0VfVE1QTCh7XG4gICAgICAgIHNwZWFrZXIsXG4gICAgICAgIHRhZ3M6IHBhc3NhZ2UudGFncyxcbiAgICAgICAgdGV4dDogbmV4dFxuICAgICAgfSk7XG4gICAgICBhd2FpdCBkZWxheSh0aGlzLmNhbGN1bGF0ZURlbGF5KG5leHQpKTsgLy8gdG9kb1xuICAgICAgYXdhaXQgcmVuZGVyZXIoY29udGVudCk7XG4gICAgICBuZXh0ID0gc3RhdGVtZW50cy5zaGlmdCgpO1xuICAgIH1cbiAgICB0aGlzLmhpZGVUeXBpbmcoKTtcbiAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEEgcm91Z2ggZnVuY3Rpb24gZm9yIGRldGVybWluaW5nIGEgd2FpdGluZyBwZXJpb2QgYmFzZWQgb24gc3RyaW5nIGxlbmd0aFxuICAgKi9cbiAgY2FsY3VsYXRlRGVsYXkgPSB0eHQgPT4ge1xuICAgIGNvbnN0IHR5cGluZ0RlbGF5UmF0aW8gPSAwLjM7XG4gICAgY29uc3QgcmF0ZSA9IDIwOyAvLyBtc1xuICAgIHJldHVybiB0eHQubGVuZ3RoICogcmF0ZSAqIHR5cGluZ0RlbGF5UmF0aW87XG4gIH07XG5cbiAgLyoqXG4gICAqIFNob3dzIHRoZSB0eXBpbmcgaW5kaWNhdG9yXG4gICAqL1xuICBzaG93VHlwaW5nID0gKCkgPT4ge1xuICAgIGZpbmQodGhpcy5kb2N1bWVudCwgdHlwaW5nSW5kaWNhdG9yKS5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG4gIH07XG5cbiAgLyoqXG4gICAqIEhpZGVzIHRoZSB0eXBpbmcgaW5kaWNhdG9yXG4gICAqL1xuICBoaWRlVHlwaW5nID0gKCkgPT4ge1xuICAgIGZpbmQodGhpcy5kb2N1bWVudCwgdHlwaW5nSW5kaWNhdG9yKS5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgfTtcblxuICAvKipcbiAgICogU2Nyb2xscyB0aGUgZG9jdW1lbnQgYXMgZmFyIGFzIHBvc3NpYmxlIChiYXNlZCBvbiBoaXN0b3J5IGNvbnRhaW5lcidzIGhlaWdodClcbiAgICovXG4gIHNjcm9sbFRvQm90dG9tID0gKCkgPT4ge1xuICAgIGNvbnN0IGhpc3QgPSBmaW5kKHRoaXMuZG9jdW1lbnQsIFwiI3BoaXN0b3J5XCIpO1xuICAgIGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQuc2Nyb2xsVG9wID0gaGlzdC5vZmZzZXRIZWlnaHQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgY2hvaWNlcyBwYW5lbFxuICAgKi9cbiAgcmVtb3ZlQ2hvaWNlcyA9ICgpID0+IHtcbiAgICBjb25zdCBwYW5lbCA9IGZpbmQodGhpcy5kb2N1bWVudCwgc2VsZWN0UmVzcG9uc2VzKTtcbiAgICBwYW5lbC5pbm5lckhUTUwgPSBcIlwiO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBjaG9pY2VzIHBhbmVsIHdpdGggYSBzZXQgb2Ygb3B0aW9ucyBiYXNlZCBvbiBwYXNzYWdlIGxpbmtzXG4gICAqL1xuICByZW5kZXJDaG9pY2VzID0gcGFzc2FnZSA9PiB7XG4gICAgdGhpcy5yZW1vdmVDaG9pY2VzKCk7XG4gICAgY29uc3QgcGFuZWwgPSBmaW5kKHRoaXMuZG9jdW1lbnQsIHNlbGVjdFJlc3BvbnNlcyk7XG4gICAgcGFzc2FnZS5saW5rcy5mb3JFYWNoKGwgPT4ge1xuICAgICAgcGFuZWwuaW5uZXJIVE1MICs9IGA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgY2xhc3M9XCJ1c2VyLXJlc3BvbnNlXCIgZGF0YS1wYXNzYWdlPVwiJHtlc2NhcGUoXG4gICAgICAgIGwudGFyZ2V0XG4gICAgICApfVwiPiR7bC5kaXNwbGF5fTwvYT5gO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW5kZXJzIGEgZnJlZS10ZXh0IGlucHV0IGJhc2VkIG9uIHNob3dQcm9tcHQgc2V0dGluZ3NcbiAgICovXG4gIHJlbmRlclRleHRJbnB1dCA9IHBhc3NhZ2UgPT4ge1xuICAgIHRoaXMucmVtb3ZlQ2hvaWNlcygpO1xuICAgIGNvbnN0IHBhbmVsID0gZmluZCh0aGlzLmRvY3VtZW50LCBzZWxlY3RSZXNwb25zZXMpO1xuICAgIHBhbmVsLmlubmVySFRNTCA9IGA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cInVzZXItaW5wdXRcIiBwbGFjZWhvbGRlcj1cIiR7XG4gICAgICB0aGlzLnNob3dQcm9tcHQucGxhY2Vob2xkZXJcbiAgICB9XCIgLz48YnV0dG9uIGRhdGEtcGFzc2FnZT1cIiR7ZXNjYXBlKFxuICAgICAgcGFzc2FnZS5saW5rc1swXS50YXJnZXRcbiAgICApfVwiPiZndDs8L2J1dHRvbj5gO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFbmFibGVzIHRoZSB0ZXh0LWlucHV0IGluc3RlYWQgb2Ygc3RhbmRhcmQgY2hvaWNlc1xuICAgKi9cbiAgcHJvbXB0ID0gKHNhdmVBcywgcGxhY2Vob2xkZXIpID0+ICh0aGlzLnNob3dQcm9tcHQgPSB7IHNhdmVBcywgcGxhY2Vob2xkZXIgfSk7XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGN1c3RvbSBkaXJlY3RpdmUgZm9yIHRoaXMgc3RvcnlcbiAgICogU2lnbmF0dXJlIG9mIChkaXJlY3RpdmVDb250ZW50LCBvdXRwdXRUZXh0LCBzdG9yeSwgcGFzc2FnZSwgbmV4dClcbiAgICovXG4gIGRpcmVjdGl2ZSA9IChpZCwgY2IpID0+IHtcbiAgICBpZiAoIXRoaXMuZGlyZWN0aXZlc1tpZF0pIHtcbiAgICAgIHRoaXMuZGlyZWN0aXZlc1tpZF0gPSBbXTtcbiAgICB9XG4gICAgdGhpcy5kaXJlY3RpdmVzW2lkXS5wdXNoKGNiKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgU3Rvcnk7XG4iLCJpbXBvcnQgU3RvcnkgZnJvbSBcIi4vU3RvcnlcIjtcblxuKHdpbiA9PiB7XG4gIGlmICh0eXBlb2Ygd2luICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgd2luLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB3aW5kb3cuZ2xvYmFsRXZhbCA9IGV2YWw7XG4gICAgICB3aW5kb3cuc3RvcnkgPSBuZXcgU3Rvcnkod2luKTtcbiAgICAgIHdpbmRvdy5zdG9yeS5zdGFydCgpO1xuICAgIH0pO1xuICB9XG59KSh3aW5kb3cgfHwgdW5kZWZpbmVkKTtcbiJdLCJuYW1lcyI6WyJnbG9iYWwiLCJUT0tFTl9FU0NBUEVEX09DVE8iLCJCTE9DS19ESVJFQ1RJVkUiLCJJTkxJTkVfRElSRUNUSVZFIiwiQkxPQ0tfQ09NTUVOVCIsIklOTElORV9DT01NRU5UIiwiSVNfRVhURVJOQUxfVVJMIiwiTElOS19QQVRURVJOIiwiZmluZFN0b3J5Iiwid2luIiwic3RvcnkiLCJzdGF0ZSIsImVzY2FwZU9jdG9zIiwicyIsInJlcGxhY2UiLCJyZXN0b3JlT2N0b3MiLCJzdHJpcENvbW1lbnRzIiwiZXh0cmFjdERpcmVjdGl2ZXMiLCJkaXJlY3RpdmVzIiwibWF0Y2giLCJkaXIiLCJjb250ZW50IiwicHVzaCIsIm5hbWUiLCJ0cmltIiwicmVuZGVyUGFzc2FnZSIsInBhc3NhZ2UiLCJzb3VyY2UiLCJyZXN1bHQiLCJsaW5rcyIsInQiLCJkaXNwbGF5IiwidGFyZ2V0IiwiYmFySW5kZXgiLCJpbmRleE9mIiwicmlnaHRBcnJJbmRleCIsImxlZnRBcnJJbmRleCIsInN1YnN0ciIsInRlc3QiLCJmb3JFYWNoIiwiZCIsInJ1biIsImhhc1RhZyIsInByb21wdHMiLCJwcmVmaXhUYWciLCJsZW5ndGgiLCJwcm9tcHQiLCJzcGxpdCIsIlBhc3NhZ2UiLCJjb25zdHJ1Y3RvciIsImlkIiwidGFncyIsInNwZWFrZXJUYWciLCJmaW5kIiwic3lzdGVtVGFnIiwicGZ4IiwiYXNEaWN0IiwiZmlsdGVyIiwibWFwIiwicmVkdWNlIiwiYSIsInRhZ0RpY3QiLCJ1bmVzY2FwZSIsInN0ciIsIndpbmRvdyIsIklORklOSVRZIiwic3ltYm9sVGFnIiwiZnJlZUdsb2JhbCIsImZyZWVTZWxmIiwicm9vdCIsImJhc2VQcm9wZXJ0eU9mIiwib2JqZWN0UHJvdG8iLCJvYmplY3RUb1N0cmluZyIsIlN5bWJvbCIsInN5bWJvbFByb3RvIiwic3ltYm9sVG9TdHJpbmciLCJiYXNlVG9TdHJpbmciLCJpc1N5bWJvbCIsImlzT2JqZWN0TGlrZSIsInRvU3RyaW5nIiwic2VsZWN0UGFzc2FnZXMiLCJzZWxlY3RDc3MiLCJzZWxlY3RKcyIsInNlbGVjdEFjdGl2ZUxpbmsiLCJzZWxlY3RBY3RpdmVCdXR0b24iLCJzZWxlY3RBY3RpdmVJbnB1dCIsInNlbGVjdEFjdGl2ZSIsInNlbGVjdEhpc3RvcnkiLCJzZWxlY3RSZXNwb25zZXMiLCJ0eXBpbmdJbmRpY2F0b3IiLCJJU19OVU1FUklDIiwiaXNOdW1lcmljIiwiVVNFUl9QQVNTQUdFX1RNUEwiLCJ0ZXh0IiwiT1RIRVJfUEFTU0FHRV9UTVBMIiwic3BlYWtlciIsImpvaW4iLCJkZWxheSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImN0eCIsInF1ZXJ5U2VsZWN0b3IiLCJmaW5kQWxsIiwicXVlcnlTZWxlY3RvckFsbCIsIlN0b3J5Iiwic3JjIiwidXNlclN0eWxlcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInVzZXJTY3JpcHRzIiwiZ2xvYmFsRXZhbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwibWF0Y2hlcyIsImFkdmFuY2UiLCJmaW5kUGFzc2FnZSIsImdldEF0dHJpYnV0ZSIsInZhbHVlIiwic2hvd1Byb21wdCIsInN0YXJ0c0F0IiwiaWRPck5hbWUiLCJwYXNzYWdlcyIsInAiLCJ1c2VyVGV4dCIsImhpc3RvcnkiLCJsYXN0IiwiY3VycmVudCIsImV4aXN0aW5nIiwiZWxlbWVudHMiLCJhY3RpdmUiLCJyZW5kZXJVc2VyTWVzc2FnZSIsInJlbmRlclRleHRJbnB1dCIsInJlbmRlckNob2ljZXMiLCJwaWQiLCJyZW5kZXJlciIsInNjcm9sbFRvQm90dG9tIiwiZ2V0U3BlYWtlciIsInN0YXRlbWVudHMiLCJyZW5kZXIiLCJuZXh0Iiwic2hpZnQiLCJzaG93VHlwaW5nIiwiY2FsY3VsYXRlRGVsYXkiLCJoaWRlVHlwaW5nIiwidHh0IiwidHlwaW5nRGVsYXlSYXRpbyIsInJhdGUiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJoaXN0Iiwic2Nyb2xsaW5nRWxlbWVudCIsInNjcm9sbFRvcCIsIm9mZnNldEhlaWdodCIsInBhbmVsIiwicmVtb3ZlQ2hvaWNlcyIsImwiLCJlc2NhcGUiLCJwbGFjZWhvbGRlciIsInNhdmVBcyIsImNiIiwiaW1wbGVtZW50YXRpb24iLCJjcmVhdGVIVE1MRG9jdW1lbnQiLCJwYXJzZUludCIsImVsIiwiZXZlbnQiLCJldmFsIiwic3RhcnQiLCJ1bmRlZmluZWQiXSwibWFwcGluZ3MiOiI7Ozs7O0VBQUEsU0FBUyxlQUFlLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUU7SUFDeEMsSUFBSSxHQUFHLElBQUksR0FBRyxFQUFFO01BQ2QsTUFBTSxDQUFDLGNBQWMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFO1FBQzlCLEtBQUssRUFBRSxLQUFLO1FBQ1osVUFBVSxFQUFFLElBQUk7UUFDaEIsWUFBWSxFQUFFLElBQUk7UUFDbEIsUUFBUSxFQUFFLElBQUk7T0FDZixDQUFDLENBQUM7S0FDSixNQUFNO01BQ0wsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQztLQUNsQjs7SUFFRCxPQUFPLEdBQUcsQ0FBQztHQUNaOztFQUVELGtCQUFjLEdBQUcsZUFBZTs7OztFQ2ZoQzs7Ozs7Ozs7OztFQVVBLElBQUksUUFBUSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7OztFQUdyQixJQUFJLFNBQVMsR0FBRyxpQkFBaUIsQ0FBQzs7O0VBR2xDLElBQUksYUFBYSxHQUFHLCtCQUErQjtNQUMvQyxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDOzs7RUFHcEQsSUFBSSxhQUFhLEdBQUc7SUFDbEIsT0FBTyxFQUFFLEdBQUc7SUFDWixNQUFNLEVBQUUsR0FBRztJQUNYLE1BQU0sRUFBRSxHQUFHO0lBQ1gsUUFBUSxFQUFFLEdBQUc7SUFDYixPQUFPLEVBQUUsR0FBRztJQUNaLE9BQU8sRUFBRSxHQUFHO0dBQ2IsQ0FBQzs7O0VBR0YsSUFBSSxVQUFVLEdBQUcsT0FBT0EsY0FBTSxJQUFJLFFBQVEsSUFBSUEsY0FBTSxJQUFJQSxjQUFNLENBQUMsTUFBTSxLQUFLLE1BQU0sSUFBSUEsY0FBTSxDQUFDOzs7RUFHM0YsSUFBSSxRQUFRLEdBQUcsT0FBTyxJQUFJLElBQUksUUFBUSxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsTUFBTSxLQUFLLE1BQU0sSUFBSSxJQUFJLENBQUM7OztFQUdqRixJQUFJLElBQUksR0FBRyxVQUFVLElBQUksUUFBUSxJQUFJLFFBQVEsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDOzs7Ozs7Ozs7RUFTL0QsU0FBUyxjQUFjLENBQUMsTUFBTSxFQUFFO0lBQzlCLE9BQU8sU0FBUyxHQUFHLEVBQUU7TUFDbkIsT0FBTyxNQUFNLElBQUksSUFBSSxHQUFHLFNBQVMsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDakQsQ0FBQztHQUNIOzs7Ozs7Ozs7RUFTRCxJQUFJLGdCQUFnQixHQUFHLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQzs7O0VBR3JELElBQUksV0FBVyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUM7Ozs7Ozs7RUFPbkMsSUFBSSxjQUFjLEdBQUcsV0FBVyxDQUFDLFFBQVEsQ0FBQzs7O0VBRzFDLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7OztFQUd6QixJQUFJLFdBQVcsR0FBRyxNQUFNLEdBQUcsTUFBTSxDQUFDLFNBQVMsR0FBRyxTQUFTO01BQ25ELGNBQWMsR0FBRyxXQUFXLEdBQUcsV0FBVyxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUM7Ozs7Ozs7Ozs7RUFVcEUsU0FBUyxZQUFZLENBQUMsS0FBSyxFQUFFOztJQUUzQixJQUFJLE9BQU8sS0FBSyxJQUFJLFFBQVEsRUFBRTtNQUM1QixPQUFPLEtBQUssQ0FBQztLQUNkO0lBQ0QsSUFBSSxRQUFRLENBQUMsS0FBSyxDQUFDLEVBQUU7TUFDbkIsT0FBTyxjQUFjLEdBQUcsY0FBYyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUM7S0FDekQ7SUFDRCxJQUFJLE1BQU0sSUFBSSxLQUFLLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDMUIsT0FBTyxDQUFDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsS0FBSyxLQUFLLENBQUMsUUFBUSxJQUFJLElBQUksR0FBRyxNQUFNLENBQUM7R0FDcEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBMEJELFNBQVMsWUFBWSxDQUFDLEtBQUssRUFBRTtJQUMzQixPQUFPLENBQUMsQ0FBQyxLQUFLLElBQUksT0FBTyxLQUFLLElBQUksUUFBUSxDQUFDO0dBQzVDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBbUJELFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRTtJQUN2QixPQUFPLE9BQU8sS0FBSyxJQUFJLFFBQVE7T0FDNUIsWUFBWSxDQUFDLEtBQUssQ0FBQyxJQUFJLGNBQWMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksU0FBUyxDQUFDLENBQUM7R0FDcEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBdUJELFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRTtJQUN2QixPQUFPLEtBQUssSUFBSSxJQUFJLEdBQUcsRUFBRSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztHQUNqRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBcUJELFNBQVMsUUFBUSxDQUFDLE1BQU0sRUFBRTtJQUN4QixNQUFNLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzFCLE9BQU8sQ0FBQyxNQUFNLElBQUksZ0JBQWdCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUMzQyxNQUFNLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxnQkFBZ0IsQ0FBQztRQUMvQyxNQUFNLENBQUM7R0FDWjs7RUFFRCxtQkFBYyxHQUFHLFFBQVEsQ0FBQzs7Ozs7RUNwTTFCLE1BQU1DLGtCQUFrQixHQUFHLGtDQUEzQjtFQUVBLE1BQU1DLGVBQWUsR0FBRyw2QkFBeEI7RUFDQSxNQUFNQyxnQkFBZ0IsR0FBRyxpQkFBekI7RUFFQSxNQUFNQyxhQUFhLEdBQUcsa0JBQXRCO0VBQ0EsTUFBTUMsY0FBYyxHQUFHLFFBQXZCO0VBRUEsTUFBTUMsZUFBZSxHQUFHLGlCQUF4QjtFQUNBLE1BQU1DLFlBQVksR0FBRyxnQkFBckI7O0VBRUEsTUFBTUMsU0FBUyxHQUFHQyxHQUFHLElBQUk7RUFDdkIsTUFBSUEsR0FBRyxJQUFJQSxHQUFHLENBQUNDLEtBQWYsRUFBc0I7RUFDcEIsV0FBT0QsR0FBRyxDQUFDQyxLQUFYO0VBQ0Q7O0VBQ0QsU0FBTztFQUFFQyxJQUFBQSxLQUFLLEVBQUU7RUFBVCxHQUFQO0VBQ0QsQ0FMRDs7RUFPQSxNQUFNQyxXQUFXLEdBQUdDLENBQUMsSUFBSUEsQ0FBQyxDQUFDQyxPQUFGLENBQVUsS0FBVixFQUFpQmIsa0JBQWpCLENBQXpCOztFQUNBLE1BQU1jLFlBQVksR0FBR0YsQ0FBQyxJQUFJQSxDQUFDLENBQUNDLE9BQUYsQ0FBVWIsa0JBQVYsRUFBOEIsR0FBOUIsQ0FBMUI7O0VBRUEsTUFBTWUsYUFBYSxHQUFHSCxDQUFDLElBQ3JCQSxDQUFDLENBQUNDLE9BQUYsQ0FBVVYsYUFBVixFQUF5QixFQUF6QixFQUE2QlUsT0FBN0IsQ0FBcUNULGNBQXJDLEVBQXFELEVBQXJELENBREY7O0VBR0EsTUFBTVksaUJBQWlCLEdBQUdKLENBQUMsSUFBSTtFQUM3QixRQUFNSyxVQUFVLEdBQUcsRUFBbkI7RUFDQUwsRUFBQUEsQ0FBQyxDQUFDQyxPQUFGLENBQVVaLGVBQVYsRUFBMkIsQ0FBQ2lCLEtBQUQsRUFBUUMsR0FBUixFQUFhQyxPQUFiLEtBQXlCO0VBQ2xESCxJQUFBQSxVQUFVLENBQUNJLElBQVgsQ0FBZ0I7RUFBRUMsTUFBQUEsSUFBSSxhQUFNSCxHQUFOLENBQU47RUFBbUJDLE1BQUFBLE9BQU8sRUFBRUEsT0FBTyxDQUFDRyxJQUFSO0VBQTVCLEtBQWhCO0VBQ0EsV0FBTyxFQUFQO0VBQ0QsR0FIRDtFQUlBWCxFQUFBQSxDQUFDLENBQUNDLE9BQUYsQ0FBVVgsZ0JBQVYsRUFBNEIsQ0FBQ2dCLEtBQUQsRUFBUUMsR0FBUixFQUFhQyxPQUFiLEtBQXlCO0VBQ25ESCxJQUFBQSxVQUFVLENBQUNJLElBQVgsQ0FBZ0I7RUFBRUMsTUFBQUEsSUFBSSxhQUFNSCxHQUFOLENBQU47RUFBbUJDLE1BQUFBLE9BQU8sRUFBRUEsT0FBTyxDQUFDRyxJQUFSO0VBQTVCLEtBQWhCO0VBQ0EsV0FBTyxFQUFQO0VBQ0QsR0FIRDtFQUtBLFNBQU9OLFVBQVA7RUFDRCxDQVpEOztFQWNBLE1BQU1PLGFBQWEsR0FBR0MsT0FBTyxJQUFJO0VBQy9CLFFBQU1DLE1BQU0sR0FBR0QsT0FBTyxDQUFDQyxNQUF2QjtFQUVBLE1BQUlDLE1BQU0sR0FBR0QsTUFBYjtFQUVBQyxFQUFBQSxNQUFNLEdBQUdoQixXQUFXLENBQUNnQixNQUFELENBQXBCO0VBQ0EsUUFBTVYsVUFBVSxHQUFHRCxpQkFBaUIsQ0FBQ1csTUFBRCxDQUFwQztFQUNBQSxFQUFBQSxNQUFNLEdBQUdaLGFBQWEsQ0FBQ1ksTUFBRCxDQUF0QjtFQUNBQSxFQUFBQSxNQUFNLEdBQUdiLFlBQVksQ0FBQ2EsTUFBRCxDQUFyQixDQVIrQjs7RUFXL0JBLEVBQUFBLE1BQU0sR0FBR0EsTUFBTSxDQUNaZCxPQURNLENBQ0UsS0FERixFQUNTYixrQkFEVCxFQUVOYSxPQUZNLENBRUVWLGFBRkYsRUFFaUIsRUFGakIsRUFHTlUsT0FITSxDQUdFVCxjQUhGLEVBR2tCLEVBSGxCLEVBSU5TLE9BSk0sQ0FJRWIsa0JBSkYsRUFJc0IsR0FKdEIsRUFLTnVCLElBTE0sRUFBVDs7RUFPQSxNQUFJRSxPQUFKLEVBQWE7RUFDWDtFQUNBQSxJQUFBQSxPQUFPLENBQUNHLEtBQVIsR0FBZ0IsRUFBaEI7RUFDRCxHQXJCOEI7OztFQXdCL0JELEVBQUFBLE1BQU0sR0FBR0EsTUFBTSxDQUFDZCxPQUFQLENBQWVQLFlBQWYsRUFBNkIsQ0FBQ1ksS0FBRCxFQUFRVyxDQUFSLEtBQWM7RUFDbEQsUUFBSUMsT0FBTyxHQUFHRCxDQUFkO0VBQ0EsUUFBSUUsTUFBTSxHQUFHRixDQUFiLENBRmtEOztFQUtsRCxVQUFNRyxRQUFRLEdBQUdILENBQUMsQ0FBQ0ksT0FBRixDQUFVLEdBQVYsQ0FBakI7RUFDQSxVQUFNQyxhQUFhLEdBQUdMLENBQUMsQ0FBQ0ksT0FBRixDQUFVLElBQVYsQ0FBdEI7RUFDQSxVQUFNRSxZQUFZLEdBQUdOLENBQUMsQ0FBQ0ksT0FBRixDQUFVLElBQVYsQ0FBckI7O0VBRUEsWUFBUSxJQUFSO0VBQ0UsV0FBS0QsUUFBUSxJQUFJLENBQWpCO0VBQ0VGLFFBQUFBLE9BQU8sR0FBR0QsQ0FBQyxDQUFDTyxNQUFGLENBQVMsQ0FBVCxFQUFZSixRQUFaLENBQVY7RUFDQUQsUUFBQUEsTUFBTSxHQUFHRixDQUFDLENBQUNPLE1BQUYsQ0FBU0osUUFBUSxHQUFHLENBQXBCLENBQVQ7RUFDQTs7RUFDRixXQUFLRSxhQUFhLElBQUksQ0FBdEI7RUFDRUosUUFBQUEsT0FBTyxHQUFHRCxDQUFDLENBQUNPLE1BQUYsQ0FBUyxDQUFULEVBQVlGLGFBQVosQ0FBVjtFQUNBSCxRQUFBQSxNQUFNLEdBQUdGLENBQUMsQ0FBQ08sTUFBRixDQUFTRixhQUFhLEdBQUcsQ0FBekIsQ0FBVDtFQUNBOztFQUNGLFdBQUtDLFlBQVksSUFBSSxDQUFyQjtFQUNFTCxRQUFBQSxPQUFPLEdBQUdELENBQUMsQ0FBQ08sTUFBRixDQUFTRCxZQUFZLEdBQUcsQ0FBeEIsQ0FBVjtFQUNBSixRQUFBQSxNQUFNLEdBQUdGLENBQUMsQ0FBQ08sTUFBRixDQUFTLENBQVQsRUFBWUQsWUFBWixDQUFUO0VBQ0E7RUFaSixLQVRrRDs7O0VBeUJsRCxRQUFJOUIsZUFBZSxDQUFDZ0MsSUFBaEIsQ0FBcUJOLE1BQXJCLENBQUosRUFBa0M7RUFDaEMsYUFBTyxjQUFjQSxNQUFkLEdBQXVCLG9CQUF2QixHQUE4Q0QsT0FBOUMsR0FBd0QsTUFBL0Q7RUFDRCxLQTNCaUQ7OztFQThCbEQsUUFBSUwsT0FBSixFQUFhO0VBQ1hBLE1BQUFBLE9BQU8sQ0FBQ0csS0FBUixDQUFjUCxJQUFkLENBQW1CO0VBQ2pCUyxRQUFBQSxPQURpQjtFQUVqQkMsUUFBQUE7RUFGaUIsT0FBbkI7RUFJRDs7RUFFRCxXQUFPLEVBQVAsQ0FyQ2tEO0VBc0NuRCxHQXRDUSxDQUFULENBeEIrQjs7RUFpRS9CZCxFQUFBQSxVQUFVLENBQUNxQixPQUFYLENBQW1CQyxDQUFDLElBQUk7RUFDdEIsUUFBSSxDQUFDZCxPQUFPLENBQUNoQixLQUFSLENBQWNRLFVBQWQsQ0FBeUJzQixDQUFDLENBQUNqQixJQUEzQixDQUFMLEVBQXVDO0VBQ3ZDRyxJQUFBQSxPQUFPLENBQUNoQixLQUFSLENBQWNRLFVBQWQsQ0FBeUJzQixDQUFDLENBQUNqQixJQUEzQixFQUFpQ2dCLE9BQWpDLENBQXlDRSxHQUFHLElBQUk7RUFDOUNiLE1BQUFBLE1BQU0sR0FBR2EsR0FBRyxDQUFDRCxDQUFDLENBQUNuQixPQUFILEVBQVlPLE1BQVosRUFBb0JGLE9BQXBCLEVBQTZCQSxPQUFPLENBQUNoQixLQUFyQyxDQUFaO0VBQ0QsS0FGRDtFQUdELEdBTEQsRUFqRStCOztFQXlFL0IsTUFBSWdCLE9BQU8sQ0FBQ2dCLE1BQVIsQ0FBZSxRQUFmLENBQUosRUFBOEI7RUFDNUIsV0FBTyxFQUFQO0VBQ0QsR0EzRThCOzs7RUE4RS9CLE1BQUloQixPQUFKLEVBQWE7RUFDWCxVQUFNaUIsT0FBTyxHQUFHakIsT0FBTyxDQUFDa0IsU0FBUixDQUFrQixRQUFsQixDQUFoQjs7RUFDQSxRQUFJRCxPQUFPLENBQUNFLE1BQVosRUFBb0I7RUFDbEJuQixNQUFBQSxPQUFPLENBQUNoQixLQUFSLENBQWNvQyxNQUFkLENBQXFCSCxPQUFPLENBQUMsQ0FBRCxDQUE1QjtFQUNEO0VBQ0YsR0FuRjhCO0VBc0YvQjs7O0VBQ0EsTUFBSWpCLE9BQU8sQ0FBQ2dCLE1BQVIsQ0FBZSxXQUFmLENBQUosRUFBaUM7RUFDL0JkLElBQUFBLE1BQU0sR0FBR0EsTUFBTSxDQUFDSixJQUFQLEVBQVQ7RUFDQSxXQUFPSSxNQUFNLENBQUNtQixLQUFQLENBQWEsVUFBYixDQUFQO0VBQ0QsR0ExRjhCOzs7RUE2Ri9CLFNBQU8sQ0FBQ25CLE1BQUQsQ0FBUDtFQUNELENBOUZEOztFQWdHQSxNQUFNb0IsT0FBTixDQUFjO0VBUVpDLEVBQUFBLFdBQVcsQ0FBQ0MsRUFBRCxFQUFLM0IsSUFBTCxFQUFXNEIsSUFBWCxFQUFpQnhCLE1BQWpCLEVBQXlCakIsS0FBekIsRUFBZ0M7RUFBQSwrQkFQdEMsSUFPc0M7O0VBQUEsaUNBTnBDLElBTW9DOztFQUFBLGlDQUxwQyxJQUtvQzs7RUFBQSxvQ0FKakMsRUFJaUM7O0VBQUEsbUNBSGxDLElBR2tDOztFQUFBLGtDQUZuQyxFQUVtQzs7RUFBQSx1Q0FVOUIsTUFBTTtFQUNqQixZQUFNMEMsVUFBVSxHQUFHLEtBQUtELElBQUwsQ0FBVUUsSUFBVixDQUFldkIsQ0FBQyxJQUFJQSxDQUFDLENBQUNJLE9BQUYsQ0FBVSxVQUFWLE1BQTBCLENBQTlDLEtBQW9ELEVBQXZFO0VBQ0EsWUFBTW9CLFNBQVMsR0FBRyxLQUFLWixNQUFMLENBQVksUUFBWixDQUFsQjtFQUNBLFVBQUlVLFVBQUosRUFBZ0IsT0FBT0EsVUFBVSxDQUFDdEMsT0FBWCxDQUFtQixXQUFuQixFQUFnQyxFQUFoQyxDQUFQO0VBQ2hCLFVBQUl3QyxTQUFKLEVBQWUsT0FBTyxRQUFQO0VBQ2YsYUFBTyxJQUFQO0VBQ0QsS0FoQjBDOztFQUFBLHNDQWtCL0IsQ0FBQ0MsR0FBRCxFQUFNQyxNQUFOLEtBQ1YsS0FBS0wsSUFBTCxDQUNHTSxNQURILENBQ1UzQixDQUFDLElBQUlBLENBQUMsQ0FBQ0ksT0FBRixXQUFhcUIsR0FBYixZQUF5QixDQUR4QyxFQUVHRyxHQUZILENBRU81QixDQUFDLElBQUlBLENBQUMsQ0FBQ2hCLE9BQUYsV0FBYXlDLEdBQWIsUUFBcUIsRUFBckIsQ0FGWixFQUdHSSxNQUhILENBSUksQ0FBQ0MsQ0FBRCxFQUFJOUIsQ0FBSixLQUFVO0VBQ1IsVUFBSTBCLE1BQUosRUFDRSx5QkFDS0ksQ0FETDtFQUVFLFNBQUM5QixDQUFELEdBQUs7RUFGUDtFQUtGLGFBQU8sQ0FBQyxHQUFHOEIsQ0FBSixFQUFPOUIsQ0FBUCxDQUFQO0VBQ0QsS0FaTCxFQWFJMEIsTUFBTSxHQUFHLEVBQUgsR0FBUSxFQWJsQixDQW5CeUM7O0VBQUEsbUNBbUNsQzFCLENBQUMsSUFBSSxLQUFLK0IsT0FBTCxDQUFhL0IsQ0FBYixDQW5DNkI7O0VBQUEsbUNBMENsQyxNQUFNTCxhQUFhLENBQUMsSUFBRCxDQTFDZTs7RUFDekMsU0FBS3lCLEVBQUwsR0FBVUEsRUFBVjtFQUNBLFNBQUszQixJQUFMLEdBQVlBLElBQVo7RUFDQSxTQUFLNEIsSUFBTCxHQUFZQSxJQUFaO0VBQ0EsU0FBS3hCLE1BQUwsR0FBY21DLGVBQVEsQ0FBQ25DLE1BQUQsQ0FBdEI7RUFDQSxTQUFLakIsS0FBTCxHQUFhQSxLQUFiO0VBRUEsU0FBS3lDLElBQUwsQ0FBVVosT0FBVixDQUFrQlQsQ0FBQyxJQUFLLEtBQUsrQixPQUFMLENBQWEvQixDQUFiLElBQWtCLENBQTFDO0VBQ0Q7O0VBaEJXOztpQkFBUmtCLG1CQThDWWUsR0FBRyxJQUNqQnRDLGFBQWEsQ0FDWCxJQUFJdUIsT0FBSixDQUFZLElBQVosRUFBa0IsSUFBbEIsRUFBd0IsSUFBeEIsRUFBOEJlLEdBQTlCLEVBQW1DdkQsU0FBUyxDQUFDd0QsTUFBTSxJQUFJLElBQVgsQ0FBNUMsQ0FEVzs7RUN2TGpCOzs7Ozs7Ozs7O0VBVUEsSUFBSUMsVUFBUSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7OztFQUdyQixJQUFJQyxXQUFTLEdBQUcsaUJBQWlCLENBQUM7OztFQUdsQyxJQUFJLGVBQWUsR0FBRyxXQUFXO01BQzdCLGtCQUFrQixHQUFHLE1BQU0sQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUM7OztFQUd4RCxJQUFJLFdBQVcsR0FBRztJQUNoQixHQUFHLEVBQUUsT0FBTztJQUNaLEdBQUcsRUFBRSxNQUFNO0lBQ1gsR0FBRyxFQUFFLE1BQU07SUFDWCxHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxPQUFPO0lBQ1osR0FBRyxFQUFFLE9BQU87R0FDYixDQUFDOzs7RUFHRixJQUFJQyxZQUFVLEdBQUcsT0FBT25FLGNBQU0sSUFBSSxRQUFRLElBQUlBLGNBQU0sSUFBSUEsY0FBTSxDQUFDLE1BQU0sS0FBSyxNQUFNLElBQUlBLGNBQU0sQ0FBQzs7O0VBRzNGLElBQUlvRSxVQUFRLEdBQUcsT0FBTyxJQUFJLElBQUksUUFBUSxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsTUFBTSxLQUFLLE1BQU0sSUFBSSxJQUFJLENBQUM7OztFQUdqRixJQUFJQyxNQUFJLEdBQUdGLFlBQVUsSUFBSUMsVUFBUSxJQUFJLFFBQVEsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDOzs7Ozs7Ozs7RUFTL0QsU0FBU0UsZ0JBQWMsQ0FBQyxNQUFNLEVBQUU7SUFDOUIsT0FBTyxTQUFTLEdBQUcsRUFBRTtNQUNuQixPQUFPLE1BQU0sSUFBSSxJQUFJLEdBQUcsU0FBUyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUNqRCxDQUFDO0dBQ0g7Ozs7Ozs7OztFQVNELElBQUksY0FBYyxHQUFHQSxnQkFBYyxDQUFDLFdBQVcsQ0FBQyxDQUFDOzs7RUFHakQsSUFBSUMsYUFBVyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUM7Ozs7Ozs7RUFPbkMsSUFBSUMsZ0JBQWMsR0FBR0QsYUFBVyxDQUFDLFFBQVEsQ0FBQzs7O0VBRzFDLElBQUlFLFFBQU0sR0FBR0osTUFBSSxDQUFDLE1BQU0sQ0FBQzs7O0VBR3pCLElBQUlLLGFBQVcsR0FBR0QsUUFBTSxHQUFHQSxRQUFNLENBQUMsU0FBUyxHQUFHLFNBQVM7TUFDbkRFLGdCQUFjLEdBQUdELGFBQVcsR0FBR0EsYUFBVyxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUM7Ozs7Ozs7Ozs7RUFVcEUsU0FBU0UsY0FBWSxDQUFDLEtBQUssRUFBRTs7SUFFM0IsSUFBSSxPQUFPLEtBQUssSUFBSSxRQUFRLEVBQUU7TUFDNUIsT0FBTyxLQUFLLENBQUM7S0FDZDtJQUNELElBQUlDLFVBQVEsQ0FBQyxLQUFLLENBQUMsRUFBRTtNQUNuQixPQUFPRixnQkFBYyxHQUFHQSxnQkFBYyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUM7S0FDekQ7SUFDRCxJQUFJLE1BQU0sSUFBSSxLQUFLLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDMUIsT0FBTyxDQUFDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsS0FBSyxLQUFLLENBQUNWLFVBQVEsSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDO0dBQ3BFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQTBCRCxTQUFTYSxjQUFZLENBQUMsS0FBSyxFQUFFO0lBQzNCLE9BQU8sQ0FBQyxDQUFDLEtBQUssSUFBSSxPQUFPLEtBQUssSUFBSSxRQUFRLENBQUM7R0FDNUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFtQkQsU0FBU0QsVUFBUSxDQUFDLEtBQUssRUFBRTtJQUN2QixPQUFPLE9BQU8sS0FBSyxJQUFJLFFBQVE7T0FDNUJDLGNBQVksQ0FBQyxLQUFLLENBQUMsSUFBSU4sZ0JBQWMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUlOLFdBQVMsQ0FBQyxDQUFDO0dBQ3BFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQXVCRCxTQUFTYSxVQUFRLENBQUMsS0FBSyxFQUFFO0lBQ3ZCLE9BQU8sS0FBSyxJQUFJLElBQUksR0FBRyxFQUFFLEdBQUdILGNBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztHQUNqRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBb0NELFNBQVMsTUFBTSxDQUFDLE1BQU0sRUFBRTtJQUN0QixNQUFNLEdBQUdHLFVBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUMxQixPQUFPLENBQUMsTUFBTSxJQUFJLGtCQUFrQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDN0MsTUFBTSxDQUFDLE9BQU8sQ0FBQyxlQUFlLEVBQUUsY0FBYyxDQUFDO1FBQy9DLE1BQU0sQ0FBQztHQUNaOztFQUVELGlCQUFjLEdBQUcsTUFBTSxDQUFDOztFQ2xOeEIsTUFBTUMsY0FBYyxHQUFHLGdCQUF2QjtFQUNBLE1BQU1DLFNBQVMsR0FBRywwQkFBbEI7RUFDQSxNQUFNQyxRQUFRLEdBQUcsaUNBQWpCO0VBQ0EsTUFBTUMsZ0JBQWdCLEdBQUcsc0NBQXpCO0VBQ0EsTUFBTUMsa0JBQWtCLEdBQUcsMkNBQTNCO0VBQ0EsTUFBTUMsaUJBQWlCLEdBQUcsNEJBQTFCO0VBQ0EsTUFBTUMsWUFBWSxHQUFHLHFCQUFyQjtFQUNBLE1BQU1DLGFBQWEsR0FBRyxzQkFBdEI7RUFDQSxNQUFNQyxlQUFlLEdBQUcsc0JBQXhCO0VBQ0EsTUFBTUMsZUFBZSxHQUFHLHNCQUF4QjtFQUVBLE1BQU1DLFVBQVUsR0FBRyxTQUFuQjtFQUVBOzs7OztFQUlBLE1BQU1DLFNBQVMsR0FBR25ELENBQUMsSUFBSWtELFVBQVUsQ0FBQ3BELElBQVgsQ0FBZ0JFLENBQWhCLENBQXZCO0VBRUE7Ozs7O0VBR0EsTUFBTW9ELGlCQUFpQixHQUFHLENBQUM7RUFBRTFDLEVBQUFBLEVBQUY7RUFBTTJDLEVBQUFBO0VBQU4sQ0FBRCw0SkFFaUQzQyxFQUZqRCx3QkFHbEIyQyxJQUhrQiw2QkFBMUI7RUFRQTs7Ozs7RUFHQSxNQUFNQyxrQkFBa0IsR0FBRyxDQUFDO0VBQUVDLEVBQUFBLE9BQUY7RUFBVzVDLEVBQUFBLElBQVg7RUFBaUIwQyxFQUFBQTtFQUFqQixDQUFELHVDQUNKRSxPQURJLDZDQUNvQzVDLElBQUksQ0FBQzZDLElBQUwsQ0FBVSxHQUFWLENBRHBDLDBDQUVGRCxPQUZFLCtDQUduQkYsSUFIbUIsNkJBQTNCO0VBUUE7Ozs7O0VBR0EsTUFBTUksS0FBSyxHQUFHLE9BQU9uRSxDQUFDLEdBQUcsQ0FBWCxLQUFpQixJQUFJb0UsT0FBSixDQUFZQyxPQUFPLElBQUlDLFVBQVUsQ0FBQ0QsT0FBRCxFQUFVckUsQ0FBVixDQUFqQyxDQUEvQjtFQUdBOzs7RUFDQSxNQUFNdUIsSUFBSSxHQUFHLENBQUNnRCxHQUFELEVBQU14RixDQUFOLEtBQVl3RixHQUFHLENBQUNDLGFBQUosQ0FBa0J6RixDQUFsQixDQUF6Qjs7RUFDQSxNQUFNMEYsT0FBTyxHQUFHLENBQUNGLEdBQUQsRUFBTXhGLENBQU4sS0FBWSxDQUFDLEdBQUd3RixHQUFHLENBQUNHLGdCQUFKLENBQXFCM0YsQ0FBckIsQ0FBSixLQUFnQyxFQUE1RDtFQUVBOzs7OztFQUdBLE1BQU00RixLQUFOLENBQVk7RUFDRztFQWtCYnhELEVBQUFBLFdBQVcsQ0FBQ3hDLEdBQUQsRUFBTWlHLEdBQU4sRUFBVztFQUFBLG9DQWxCWixDQWtCWTs7RUFBQSxxQ0FoQlgsSUFnQlc7O0VBQUEsa0NBZmQsSUFlYzs7RUFBQSxpQ0FkZixFQWNlOztFQUFBLHFDQWJYLENBYVc7O0VBQUEsb0NBWlosQ0FZWTs7RUFBQSxvQ0FYWixFQVdZOztFQUFBLHFDQVZYLEVBVVc7O0VBQUEsdUNBVFQsS0FTUzs7RUFBQSx5Q0FSUCxXQVFPOztFQUFBLHVDQU5ULEVBTVM7O0VBQUEscUNBTFgsRUFLVzs7RUFBQSx3Q0FIUixFQUdROztFQUFBLHVDQUZULEVBRVM7O0VBQUEsa0NBK0NkLE1BQU07RUFDWjtFQUNBLFdBQUtDLFVBQUwsQ0FBZ0JwRSxPQUFoQixDQUF3QjFCLENBQUMsSUFBSTtFQUMzQixjQUFNaUIsQ0FBQyxHQUFHLEtBQUs4RSxRQUFMLENBQWNDLGFBQWQsQ0FBNEIsT0FBNUIsQ0FBVjtFQUNBL0UsUUFBQUEsQ0FBQyxDQUFDZ0YsU0FBRixHQUFjakcsQ0FBZDtFQUNBLGFBQUsrRixRQUFMLENBQWNHLElBQWQsQ0FBbUJDLFdBQW5CLENBQStCbEYsQ0FBL0I7RUFDRCxPQUpEO0VBS0EsV0FBS21GLFdBQUwsQ0FBaUIxRSxPQUFqQixDQUF5QjFCLENBQUMsSUFBSTtFQUM1QjtFQUNBO0VBQ0FxRyxRQUFBQSxVQUFVLENBQUNyRyxDQUFELENBQVY7RUFDRCxPQUpELEVBUFk7O0VBY1osV0FBSytGLFFBQUwsQ0FBY0csSUFBZCxDQUFtQkksZ0JBQW5CLENBQW9DLE9BQXBDLEVBQTZDQyxDQUFDLElBQUk7RUFDaEQsWUFBSSxDQUFDQSxDQUFDLENBQUNwRixNQUFGLENBQVNxRixPQUFULENBQWlCbEMsZ0JBQWpCLENBQUwsRUFBeUM7RUFDdkM7RUFDRDs7RUFFRCxhQUFLbUMsT0FBTCxDQUNFLEtBQUtDLFdBQUwsQ0FBaUJILENBQUMsQ0FBQ3BGLE1BQUYsQ0FBU3dGLFlBQVQsQ0FBc0IsY0FBdEIsQ0FBakIsQ0FERixFQUVFSixDQUFDLENBQUNwRixNQUFGLENBQVM4RSxTQUZYO0VBSUQsT0FURCxFQWRZOztFQTBCWixXQUFLRixRQUFMLENBQWNHLElBQWQsQ0FBbUJJLGdCQUFuQixDQUFvQyxPQUFwQyxFQUE2Q0MsQ0FBQyxJQUFJO0VBQ2hELFlBQUksQ0FBQ0EsQ0FBQyxDQUFDcEYsTUFBRixDQUFTcUYsT0FBVCxDQUFpQmpDLGtCQUFqQixDQUFMLEVBQTJDO0VBQ3pDO0VBQ0QsU0FIK0M7OztFQU1oRCxjQUFNcUMsS0FBSyxHQUFHcEUsSUFBSSxDQUFDLEtBQUt1RCxRQUFOLEVBQWdCdkIsaUJBQWhCLENBQUosQ0FBdUNvQyxLQUFyRDtFQUNBLGFBQUtDLFVBQUwsR0FBa0IsS0FBbEI7RUFFQSxhQUFLSixPQUFMLENBQ0UsS0FBS0MsV0FBTCxDQUFpQkgsQ0FBQyxDQUFDcEYsTUFBRixDQUFTd0YsWUFBVCxDQUFzQixjQUF0QixDQUFqQixDQURGLEVBRUVDLEtBRkY7RUFJRCxPQWJEO0VBZUEsV0FBS0gsT0FBTCxDQUFhLEtBQUtDLFdBQUwsQ0FBaUIsS0FBS0ksUUFBdEIsQ0FBYjtFQUNELEtBekZxQjs7RUFBQSx3Q0E4RlJDLFFBQVEsSUFBSTtFQUN4QixVQUFJakMsU0FBUyxDQUFDaUMsUUFBRCxDQUFiLEVBQXlCO0VBQ3ZCLGVBQU8sS0FBS0MsUUFBTCxDQUFjRCxRQUFkLENBQVA7RUFDRCxPQUZELE1BRU87RUFDTDtFQUNBLGNBQU1FLENBQUMsR0FBR3ZCLE9BQU8sQ0FBQyxLQUFLN0YsS0FBTixFQUFhLGdCQUFiLENBQVAsQ0FBc0MrQyxNQUF0QyxDQUNScUUsQ0FBQyxJQUFJQSxDQUFDLENBQUNOLFlBQUYsQ0FBZSxNQUFmLE1BQTJCSSxRQUR4QixFQUVSLENBRlEsQ0FBVjtFQUdBLFlBQUksQ0FBQ0UsQ0FBTCxFQUFRLE9BQU8sSUFBUDtFQUNSLGVBQU8sS0FBS0QsUUFBTCxDQUFjQyxDQUFDLENBQUNOLFlBQUYsQ0FBZSxLQUFmLENBQWQsQ0FBUDtFQUNEO0VBQ0YsS0F6R3FCOztFQUFBLG9DQThHWixPQUFPOUYsT0FBUCxFQUFnQnFHLFFBQVEsR0FBRyxJQUEzQixLQUFvQztFQUM1QyxXQUFLQyxPQUFMLENBQWExRyxJQUFiLENBQWtCSSxPQUFPLENBQUN3QixFQUExQjtFQUNBLFlBQU0rRSxJQUFJLEdBQUcsS0FBS0MsT0FBbEIsQ0FGNEM7O0VBSzVDLFlBQU1DLFFBQVEsR0FBRyxLQUFLQyxRQUFMLENBQWNDLE1BQWQsQ0FBcUJ2QixTQUF0QztFQUNBLFdBQUtzQixRQUFMLENBQWNDLE1BQWQsQ0FBcUJ2QixTQUFyQixHQUFpQyxFQUFqQyxDQU40Qzs7RUFTNUMsV0FBS3NCLFFBQUwsQ0FBY0osT0FBZCxDQUFzQmxCLFNBQXRCLElBQW1DcUIsUUFBbkMsQ0FUNEM7O0VBWTVDLFVBQUlKLFFBQUosRUFBYztFQUNaLGFBQUtPLGlCQUFMLENBQ0VMLElBREYsRUFFRUYsUUFGRixFQUdFbEgsQ0FBQyxJQUFLLEtBQUt1SCxRQUFMLENBQWNKLE9BQWQsQ0FBc0JsQixTQUF0QixJQUFtQ2pHLENBSDNDO0VBS0QsT0FsQjJDO0VBcUI1Qzs7O0VBQ0EsWUFBTSxLQUFLWSxhQUFMLENBQ0pDLE9BREksRUFFSmIsQ0FBQyxJQUFLLEtBQUt1SCxRQUFMLENBQWNDLE1BQWQsQ0FBcUJ2QixTQUFyQixJQUFrQ2pHLENBRnBDLENBQU47O0VBSUEsVUFBSWEsT0FBTyxDQUFDZ0IsTUFBUixDQUFlLE1BQWYsQ0FBSixFQUE0QjtFQUMxQjtFQUNBO0VBQ0EsYUFBSzRFLE9BQUwsQ0FBYSxLQUFLQyxXQUFMLENBQWlCN0YsT0FBTyxDQUFDRyxLQUFSLENBQWMsQ0FBZCxFQUFpQkcsTUFBbEMsQ0FBYjtFQUNBO0VBQ0QsT0EvQjJDOzs7RUFrQzVDLFVBQUksS0FBSzBGLFVBQVQsRUFBcUI7RUFDbkIsYUFBS2EsZUFBTCxDQUFxQjdHLE9BQXJCO0VBQ0QsT0FGRCxNQUVPO0VBQ0wsYUFBSzhHLGFBQUwsQ0FBbUI5RyxPQUFuQjtFQUNEO0VBQ0YsS0FySnFCOztFQUFBLDhDQTBKRixPQUFPK0csR0FBUCxFQUFZNUMsSUFBWixFQUFrQjZDLFFBQWxCLEtBQStCO0VBQ2pELFlBQU1BLFFBQVEsQ0FDWjlDLGlCQUFpQixDQUFDO0VBQ2hCNkMsUUFBQUEsR0FEZ0I7RUFFaEI1QyxRQUFBQTtFQUZnQixPQUFELENBREwsQ0FBZDtFQU1BLFdBQUs4QyxjQUFMO0VBQ0EsYUFBT3pDLE9BQU8sQ0FBQ0MsT0FBUixFQUFQO0VBQ0QsS0FuS3FCOztFQUFBLDBDQXdLTixPQUFPekUsT0FBUCxFQUFnQmdILFFBQWhCLEtBQTZCO0VBQzNDLFlBQU0zQyxPQUFPLEdBQUdyRSxPQUFPLENBQUNrSCxVQUFSLEVBQWhCO0VBQ0EsVUFBSUMsVUFBVSxHQUFHbkgsT0FBTyxDQUFDb0gsTUFBUixFQUFqQjtFQUNBLFVBQUlDLElBQUksR0FBR0YsVUFBVSxDQUFDRyxLQUFYLEVBQVg7RUFDQSxXQUFLQyxVQUFMOztFQUNBLGFBQU9GLElBQVAsRUFBYTtFQUNYLGNBQU0xSCxPQUFPLEdBQUd5RSxrQkFBa0IsQ0FBQztFQUNqQ0MsVUFBQUEsT0FEaUM7RUFFakM1QyxVQUFBQSxJQUFJLEVBQUV6QixPQUFPLENBQUN5QixJQUZtQjtFQUdqQzBDLFVBQUFBLElBQUksRUFBRWtEO0VBSDJCLFNBQUQsQ0FBbEM7RUFLQSxjQUFNOUMsS0FBSyxDQUFDLEtBQUtpRCxjQUFMLENBQW9CSCxJQUFwQixDQUFELENBQVgsQ0FOVzs7RUFPWCxjQUFNTCxRQUFRLENBQUNySCxPQUFELENBQWQ7RUFDQTBILFFBQUFBLElBQUksR0FBR0YsVUFBVSxDQUFDRyxLQUFYLEVBQVA7RUFDRDs7RUFDRCxXQUFLRyxVQUFMO0VBQ0EsV0FBS1IsY0FBTDtFQUVBLGFBQU96QyxPQUFPLENBQUNDLE9BQVIsRUFBUDtFQUNELEtBM0xxQjs7RUFBQSwyQ0FnTUxpRCxHQUFHLElBQUk7RUFDdEIsWUFBTUMsZ0JBQWdCLEdBQUcsR0FBekI7RUFDQSxZQUFNQyxJQUFJLEdBQUcsRUFBYixDQUZzQjs7RUFHdEIsYUFBT0YsR0FBRyxDQUFDdkcsTUFBSixHQUFheUcsSUFBYixHQUFvQkQsZ0JBQTNCO0VBQ0QsS0FwTXFCOztFQUFBLHVDQXlNVCxNQUFNO0VBQ2pCaEcsTUFBQUEsSUFBSSxDQUFDLEtBQUt1RCxRQUFOLEVBQWdCbkIsZUFBaEIsQ0FBSixDQUFxQzhELEtBQXJDLENBQTJDQyxVQUEzQyxHQUF3RCxTQUF4RDtFQUNELEtBM01xQjs7RUFBQSx1Q0FnTlQsTUFBTTtFQUNqQm5HLE1BQUFBLElBQUksQ0FBQyxLQUFLdUQsUUFBTixFQUFnQm5CLGVBQWhCLENBQUosQ0FBcUM4RCxLQUFyQyxDQUEyQ0MsVUFBM0MsR0FBd0QsUUFBeEQ7RUFDRCxLQWxOcUI7O0VBQUEsMkNBdU5MLE1BQU07RUFDckIsWUFBTUMsSUFBSSxHQUFHcEcsSUFBSSxDQUFDLEtBQUt1RCxRQUFOLEVBQWdCLFdBQWhCLENBQWpCO0VBQ0FBLE1BQUFBLFFBQVEsQ0FBQzhDLGdCQUFULENBQTBCQyxTQUExQixHQUFzQ0YsSUFBSSxDQUFDRyxZQUEzQztFQUNELEtBMU5xQjs7RUFBQSwwQ0ErTk4sTUFBTTtFQUNwQixZQUFNQyxLQUFLLEdBQUd4RyxJQUFJLENBQUMsS0FBS3VELFFBQU4sRUFBZ0JwQixlQUFoQixDQUFsQjtFQUNBcUUsTUFBQUEsS0FBSyxDQUFDL0MsU0FBTixHQUFrQixFQUFsQjtFQUNELEtBbE9xQjs7RUFBQSwwQ0F1T05wRixPQUFPLElBQUk7RUFDekIsV0FBS29JLGFBQUw7RUFDQSxZQUFNRCxLQUFLLEdBQUd4RyxJQUFJLENBQUMsS0FBS3VELFFBQU4sRUFBZ0JwQixlQUFoQixDQUFsQjtFQUNBOUQsTUFBQUEsT0FBTyxDQUFDRyxLQUFSLENBQWNVLE9BQWQsQ0FBc0J3SCxDQUFDLElBQUk7RUFDekJGLFFBQUFBLEtBQUssQ0FBQy9DLFNBQU4sb0ZBQXVGa0QsYUFBTSxDQUMzRkQsQ0FBQyxDQUFDL0gsTUFEeUYsQ0FBN0YsZ0JBRU0rSCxDQUFDLENBQUNoSSxPQUZSO0VBR0QsT0FKRDtFQUtELEtBL09xQjs7RUFBQSw0Q0FvUEpMLE9BQU8sSUFBSTtFQUMzQixXQUFLb0ksYUFBTDtFQUNBLFlBQU1ELEtBQUssR0FBR3hHLElBQUksQ0FBQyxLQUFLdUQsUUFBTixFQUFnQnBCLGVBQWhCLENBQWxCO0VBQ0FxRSxNQUFBQSxLQUFLLENBQUMvQyxTQUFOLGtFQUNFLEtBQUtZLFVBQUwsQ0FBZ0J1QyxXQURsQix5Q0FFNkJELGFBQU0sQ0FDakN0SSxPQUFPLENBQUNHLEtBQVIsQ0FBYyxDQUFkLEVBQWlCRyxNQURnQixDQUZuQztFQUtELEtBNVBxQjs7RUFBQSxtQ0FpUWIsQ0FBQ2tJLE1BQUQsRUFBU0QsV0FBVCxLQUEwQixLQUFLdkMsVUFBTCxHQUFrQjtFQUFFd0MsTUFBQUEsTUFBRjtFQUFVRCxNQUFBQTtFQUFWLEtBalEvQjs7RUFBQSxzQ0F1UVYsQ0FBQy9HLEVBQUQsRUFBS2lILEVBQUwsS0FBWTtFQUN0QixVQUFJLENBQUMsS0FBS2pKLFVBQUwsQ0FBZ0JnQyxFQUFoQixDQUFMLEVBQTBCO0VBQ3hCLGFBQUtoQyxVQUFMLENBQWdCZ0MsRUFBaEIsSUFBc0IsRUFBdEI7RUFDRDs7RUFDRCxXQUFLaEMsVUFBTCxDQUFnQmdDLEVBQWhCLEVBQW9CNUIsSUFBcEIsQ0FBeUI2SSxFQUF6QjtFQUNELEtBNVFxQjs7RUFDcEIsU0FBS25HLE1BQUwsR0FBY3ZELEdBQWQ7O0VBRUEsUUFBSWlHLEdBQUosRUFBUztFQUNQLFdBQUtFLFFBQUwsR0FBZ0JBLFFBQVEsQ0FBQ3dELGNBQVQsQ0FBd0JDLGtCQUF4QixDQUNkLDJCQURjLENBQWhCO0VBR0QsS0FKRCxNQUlPO0VBQ0wsV0FBS3pELFFBQUwsR0FBZ0JBLFFBQWhCO0VBQ0Q7O0VBRUQsU0FBS2xHLEtBQUwsR0FBYTJDLElBQUksQ0FBQyxLQUFLdUQsUUFBTixFQUFnQixjQUFoQixDQUFqQixDQVhvQjs7RUFjcEIsU0FBS3dCLFFBQUwsR0FBZ0I7RUFDZEMsTUFBQUEsTUFBTSxFQUFFaEYsSUFBSSxDQUFDLEtBQUt1RCxRQUFOLEVBQWdCdEIsWUFBaEIsQ0FERTtFQUVkMEMsTUFBQUEsT0FBTyxFQUFFM0UsSUFBSSxDQUFDLEtBQUt1RCxRQUFOLEVBQWdCckIsYUFBaEI7RUFGQyxLQUFoQixDQWRvQjs7RUFvQnBCLFNBQUtoRSxJQUFMLEdBQVksS0FBS2IsS0FBTCxDQUFXOEcsWUFBWCxDQUF3QixNQUF4QixLQUFtQyxFQUEvQztFQUNBLFNBQUtHLFFBQUwsR0FBZ0IsS0FBS2pILEtBQUwsQ0FBVzhHLFlBQVgsQ0FBd0IsV0FBeEIsS0FBd0MsQ0FBeEQ7RUFFQWpCLElBQUFBLE9BQU8sQ0FBQyxLQUFLN0YsS0FBTixFQUFhc0UsY0FBYixDQUFQLENBQW9DekMsT0FBcEMsQ0FBNEN1RixDQUFDLElBQUk7RUFDL0MsWUFBTTVFLEVBQUUsR0FBR29ILFFBQVEsQ0FBQ3hDLENBQUMsQ0FBQ04sWUFBRixDQUFlLEtBQWYsQ0FBRCxDQUFuQjtFQUNBLFlBQU1qRyxJQUFJLEdBQUd1RyxDQUFDLENBQUNOLFlBQUYsQ0FBZSxNQUFmLENBQWI7RUFDQSxZQUFNckUsSUFBSSxHQUFHLENBQUMyRSxDQUFDLENBQUNOLFlBQUYsQ0FBZSxNQUFmLEtBQTBCLEVBQTNCLEVBQStCekUsS0FBL0IsQ0FBcUMsTUFBckMsQ0FBYjtFQUNBLFlBQU1yQixPQUFPLEdBQUdvRyxDQUFDLENBQUNoQixTQUFGLElBQWUsRUFBL0I7RUFFQSxXQUFLZSxRQUFMLENBQWMzRSxFQUFkLElBQW9CLElBQUlGLE9BQUosQ0FBWUUsRUFBWixFQUFnQjNCLElBQWhCLEVBQXNCNEIsSUFBdEIsRUFBNEJ6QixPQUE1QixFQUFxQyxJQUFyQyxDQUFwQjtFQUNELEtBUEQ7RUFTQTJCLElBQUFBLElBQUksQ0FBQyxLQUFLdUQsUUFBTixFQUFnQixPQUFoQixDQUFKLENBQTZCRSxTQUE3QixHQUF5QyxLQUFLdkYsSUFBOUM7RUFDQThCLElBQUFBLElBQUksQ0FBQyxLQUFLdUQsUUFBTixFQUFnQixTQUFoQixDQUFKLENBQStCRSxTQUEvQixHQUEyQyxLQUFLdkYsSUFBaEQ7RUFFQSxTQUFLMEYsV0FBTCxHQUFtQixDQUFDVixPQUFPLENBQUMsS0FBS0ssUUFBTixFQUFnQjFCLFFBQWhCLENBQVAsSUFBb0MsRUFBckMsRUFBeUN4QixHQUF6QyxDQUNqQjZHLEVBQUUsSUFBSUEsRUFBRSxDQUFDekQsU0FEUSxDQUFuQjtFQUdBLFNBQUtILFVBQUwsR0FBa0IsQ0FBQ0osT0FBTyxDQUFDLEtBQUtLLFFBQU4sRUFBZ0IzQixTQUFoQixDQUFQLElBQXFDLEVBQXRDLEVBQTBDdkIsR0FBMUMsQ0FDaEI2RyxFQUFFLElBQUlBLEVBQUUsQ0FBQ3pELFNBRE8sQ0FBbEI7RUFHRDtFQUVEOzs7Ozs7RUE5RFU7O0VDdkRaLENBQUNyRyxHQUFHLElBQUk7RUFDTixNQUFJLE9BQU9BLEdBQVAsS0FBZSxXQUFuQixFQUFnQztFQUM5QkEsSUFBQUEsR0FBRyxDQUFDbUcsUUFBSixDQUFhTyxnQkFBYixDQUE4QixrQkFBOUIsRUFBa0QsVUFBU3FELEtBQVQsRUFBZ0I7RUFDaEV4RyxNQUFBQSxNQUFNLENBQUNrRCxVQUFQLEdBQW9CdUQsSUFBcEI7RUFDQXpHLE1BQUFBLE1BQU0sQ0FBQ3RELEtBQVAsR0FBZSxJQUFJK0YsS0FBSixDQUFVaEcsR0FBVixDQUFmO0VBQ0F1RCxNQUFBQSxNQUFNLENBQUN0RCxLQUFQLENBQWFnSyxLQUFiO0VBQ0QsS0FKRDtFQUtEO0VBQ0YsQ0FSRCxFQVFHMUcsTUFBTSxJQUFJMkcsU0FSYjs7OzsifQ==
    </script>
  </body>
</html>
