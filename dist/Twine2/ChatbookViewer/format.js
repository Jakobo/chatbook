window.storyFormat({"name":"TEST_ChatbookViewer","description":"An interactive chat viewer for Chatbook","author":"Jakob Heuser","image":"icon.svg","url":"github:jakobo/chatbook","version":"0.1.0","proofing":false,"source":"<!DOCTYPE html>\n<html>\n  <head>\n    <title>\n      {{STORY_NAME}}\n    </title>\n    <meta charset=\"utf-8\" />\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width, initial-scale=1, shrink-to-fit=no\"\n    />\n    <meta name=\"description\" content=\"\" />\n    <meta name=\"author\" content=\"\" />\n    <link rel=\"icon\" href=\"favicon.ico\" />\n\n    <!-- Bootstrap core CSS -->\n    <link\n      rel=\"stylesheet\"\n      href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css\"\n      integrity=\"sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB\"\n      crossorigin=\"anonymous\"\n    />\n\n    <style>/* Variables */\n\n:root {\n  --navbar-height: 56px;\n  --user-response-panel-height: 110px;\n  --bg-color: #c7bdb5; /*global chat bg color*/\n  --user-color: #417505; /*user name & placeholder avatar bg*/\n  --speaker-color: #888; /*default color for speaker name & placeholder avatar bg*/\n  --sidebar-bg-color: #fff;\n  --navbar-bg-color: #fff;\n  --passage-bg-color: #fff;\n  --passage-text-color: #000;\n}\n\n/* Atomic Utilities */\n\n.bg-color {\n  background-color: var(--bg-color);\n}\n\n.minh-full {\n  min-height: calc(\n    100vh - var(--navbar-height) - var(--user-response-panel-height) - 17px -\n      5px\n  );\n}\n\n.ml--3 {\n  margin-left: -1rem !important;\n}\n\n@media (min-width: 992px) {\n  .w-lg-auto {\n    width: auto !important;\n  }\n}\n\n/* General */\n\nhtml,\nbody {\n  overflow-x: hidden; /* Prevent scroll on narrow devices */\n  position: relative;\n  min-height: 100%;\n}\n\nbody {\n  padding-top: var(--navbar-height);\n  margin-bottom: calc(\n    var(--user-response-panel-height) + 18px + 5px\n  ); /* + height of hint + hr */\n}\n\n/* Offcanvas sidebar */\n\n@media (max-width: 991.98px) {\n  .offcanvas-collapse {\n    z-index: 1100;\n    position: fixed;\n    top: var(--navbar-height); /* Height of navbar */\n    bottom: 0;\n    left: 100%;\n    width: 100%;\n    padding-right: 1rem;\n    padding-left: 1rem;\n    overflow-y: auto;\n    visibility: hidden;\n    background-color: var(--sidebar-bg-color);\n    transition-timing-function: ease-in-out;\n    transition-duration: 0.3s;\n    transition-property: left, visibility;\n  }\n  .offcanvas-collapse.open {\n    left: 0;\n    visibility: visible;\n  }\n}\n\n/* Nav */\n\nnav.navbar {\n  height: var(--navbar-height);\n  background-color: var(--navbar-bg-color);\n  padding: 0.5rem 15px;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n}\n\nnav .nav-title {\n  font-size: 1.5rem;\n  line-height: 40px;\n  margin: 0 auto;\n}\n\nnav .nav-icon {\n  width: 35px;\n}\n\n/* Chat Panel */\n\n.chat-panel {\n  padding-top: 15px;\n}\n\n.chat-passage-wrapper {\n  position: relative;\n  margin: 0.5rem 0;\n}\n\n.chat-passage-wrapper[data-speaker=\"you\"] {\n  text-align: right;\n}\n.chat-passage-wrapper[data-speaker=\"you\"] .chat-passage:before {\n  text-align: right;\n  color: var(--user-color);\n}\n\n.chat-passage {\n  display: inline-block;\n  padding: 0.25rem 0.5rem;\n  margin-left: 35px;\n  background-color: var(--passage-bg-color);\n  max-width: calc(100% - 80px);\n  text-align: left;\n}\n@media (min-width: 576px) {\n  .chat-passage {\n    max-width: calc(100% - 100px);\n  }\n}\n@media (min-width: 768px) {\n  .chat-passage {\n    max-width: calc(100% - 80px);\n  }\n}\n@media (min-width: 992px) {\n  .chat-passage {\n    max-width: calc(100% - 100px);\n  }\n}\n\n.chat-passage:before {\n  content: attr(data-speaker);\n  display: block;\n  font-size: 0.75rem;\n  text-transform: capitalize;\n  color: var(--speaker-color);\n}\n\n.chat-passage p {\n  margin: 0;\n}\n\n.chat-passage img {\n  max-width: 100%;\n  max-height: calc(100vh - 2 * var(--user-response-panel-height));\n  padding: 0.25rem 0;\n}\n.chat-passage iframe {\n  max-width: 100%;\n  max-height: calc(100vh - 2 * var(--user-response-panel-height));\n}\n\n.chat-passage figure {\n  margin-bottom: 0.25rem;\n  font-size: 0.75rem;\n}\n\n/* User Response Panel */\n\n.user-response-panel {\n  padding-right: 15px;\n  padding-left: 15px;\n}\n@media (min-width: 992px) {\n  .user-response-panel {\n    max-width: calc(\n      100% / (12 / 6)\n    ); /* 100% / (12/[col width of chat-panel]) */\n    margin: 0 auto;\n  }\n}\n\n.user-response-panel hr {\n  margin: 0;\n  border-top: 5px solid white;\n}\n\n.user-response-hint {\n  font-style: italic;\n  font-size: 0.75rem;\n  text-align: center;\n  height: 18px;\n}\n@media (max-width: 379.98px) {\n  .user-response-hint {\n    font-size: 0.6rem;\n    height: 14px;\n  }\n  body {\n    margin-bottom: calc(\n      var(--user-response-panel-height) + 14px + 5px\n    ); /* + height of hint + hr */\n  }\n  .minh-full {\n    min-height: calc(\n      100vh - var(--navbar-height) - var(--user-response-panel-height) - 14px -\n        5px\n    );\n  }\n}\n@media (max-width: 319.98px) {\n  .user-response-hint {\n    font-size: 0.5rem;\n    height: 12px;\n  }\n  body {\n    margin-bottom: calc(\n      var(--user-response-panel-height) + 12px + 5px\n    ); /* + height of hint + hr */\n  }\n  .minh-full {\n    min-height: calc(\n      100vh - var(--navbar-height) - var(--user-response-panel-height) - 12px -\n        5px\n    );\n  }\n}\n\n.user-reponse-wrapper {\n  height: var(--user-response-panel-height);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.user-response-panel .user-response {\n  display: inline-block;\n  padding: 0.5rem;\n  margin: 0.25rem;\n  background-color: var(--passage-bg-color);\n  color: var(--passage-text-color);\n  border-top: 2px solid transparent;\n  transition: border-color 0.15s ease-in;\n}\n.user-response-panel .user-response:hover {\n  text-decoration: none;\n  border-color: var(--user-color);\n}\n\n/* Passage Avatars */\n\n.chat-passage-wrapper:before {\n  margin-right: 5px;\n  position: absolute;\n  vertical-align: top;\n  content: \"\";\n  width: 30px;\n  height: 30px;\n  background-size: 30px 30px;\n  border-radius: 15px;\n  background-color: var(--speaker-color);\n}\n.chat-passage-wrapper[data-speaker=\"you\"]:before {\n  display: none;\n}\n.chat-passage-wrapper[data-speaker=\"you\"]:after {\n  margin-left: -30px;\n  position: absolute;\n  vertical-align: top;\n  content: \"\";\n  width: 30px;\n  height: 30px;\n  background-size: 30px 30px;\n  border-radius: 15px;\n  background-color: var(--user-color);\n}\n.chat-passage[data-speaker=\"you\"] {\n  margin-left: 0;\n  margin-right: 35px;\n}\n\n/* Typing Animation */\n\ndiv.wave {\n  position: relative;\n  text-align: center;\n  margin-left: auto;\n  margin-right: auto;\n}\ndiv.wave .dot {\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  margin-right: 2px;\n  background: var(--passage-text-color);\n  animation: wave 1.2s ease-in-out infinite;\n}\ndiv.wave .dot:nth-child(2) {\n  animation-delay: 0.1s;\n}\n\ndiv.wave .dot:nth-child(3) {\n  animation-delay: 0.2s;\n}\n\n@keyframes wave {\n  0%,\n  50%,\n  100% {\n    transform: initial;\n  }\n\n  25% {\n    transform: translateY(-15px);\n  }\n}\n\n/* Modal */\n\n.modal-dialog {\n  max-width: 420px;\n}\n\n/* \n * counter extra padding-right added by BS4 modal\n * https://stackoverflow.com/questions/32862394/bootstrap-modals-keep-adding-padding-right-to-body-after-closed\n */\nbody.modal-open {\n  padding-right: 0 !important;\n}\nbody.modal-open .user-response-panel {\n  padding-right: 15px !important;\n}\nbody.modal-open nav.navbar {\n  padding-right: 15px !important;\n}\n</style>\n  </head>\n  <body class=\"bg-white\">\n    <nav class=\"navbar navbar-expand-lg fixed-top\">\n      <h1 id=\"ptitle\" class=\"nav-title\">{{STORY_NAME}}</h1>\n    </nav>\n\n    <main role=\"main\" class=\"container-fluid\">\n      <div class=\"row\">\n        <div class=\"left-sidebar col-lg d-none d-lg-block\">\n          <div\n            id=\"left-sidebar-container\"\n            class=\"content-container position-fixed mt-3 mt-lg-5 m-lg-4\"\n          ></div>\n        </div>\n        <div class=\"chat-panel col-lg-6 minh-full bg-color\">\n          <div id=\"phistory\" class=\"history chat-history\"></div>\n          <div id=\"passage\" class=\"active\"></div>\n          <div id=\"animation-container\">\n            <div class=\"chat-passage-wrapper\">\n              <div class=\"chat-passage\">\n                <div class=\"wave\">\n                  <span class=\"dot\"></span>\n                  <span class=\"dot\"></span>\n                  <span class=\"dot\"></span>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"user-response-panel fixed-bottom bg-color\">\n            <hr />\n            <div\n              id=\"user-response-hint\"\n              class=\"user-response-hint content-container\"\n            ></div>\n            <div id=\"user-response-panel\" class=\"user-reponse-wrapper\"></div>\n          </div>\n        </div>\n        <div class=\"right-sidebar col-lg offcanvas-collapse\">\n          <div class=\"position-fixed ml--3 w-100 w-lg-auto h-100\">\n            <div\n              id=\"right-sidebar-container\"\n              class=\"content-container m-3 m-sm-5 m-lg-3 mt-lg-5 m-xl-5 mt-xl-5\"\n            ></div>\n          </div>\n        </div>\n      </div>\n    </main>\n    {{STORY_DATA}} <script>(function (factory) {\n  typeof define === 'function' && define.amd ? define(factory) :\n  factory();\n}(function () { 'use strict';\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  var defineProperty = _defineProperty;\n\n  var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n  /**\n   * lodash (Custom Build) <https://lodash.com/>\n   * Build: `lodash modularize exports=\"npm\" -o ./`\n   * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n   * Released under MIT license <https://lodash.com/license>\n   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n   */\n\n  /** Used as references for various `Number` constants. */\n  var INFINITY = 1 / 0;\n\n  /** `Object#toString` result references. */\n  var symbolTag = '[object Symbol]';\n\n  /** Used to match HTML entities and HTML characters. */\n  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39|#96);/g,\n      reHasEscapedHtml = RegExp(reEscapedHtml.source);\n\n  /** Used to map HTML entities to characters. */\n  var htmlUnescapes = {\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&#39;': \"'\",\n    '&#96;': '`'\n  };\n\n  /** Detect free variable `global` from Node.js. */\n  var freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\n\n  /** Detect free variable `self`. */\n  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n  /** Used as a reference to the global object. */\n  var root = freeGlobal || freeSelf || Function('return this')();\n\n  /**\n   * The base implementation of `_.propertyOf` without support for deep paths.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function basePropertyOf(object) {\n    return function(key) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * Used by `_.unescape` to convert HTML entities to characters.\n   *\n   * @private\n   * @param {string} chr The matched character to unescape.\n   * @returns {string} Returns the unescaped character.\n   */\n  var unescapeHtmlChar = basePropertyOf(htmlUnescapes);\n\n  /** Used for built-in method references. */\n  var objectProto = Object.prototype;\n\n  /**\n   * Used to resolve the\n   * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n   * of values.\n   */\n  var objectToString = objectProto.toString;\n\n  /** Built-in value references. */\n  var Symbol = root.Symbol;\n\n  /** Used to convert symbols to primitives and strings. */\n  var symbolProto = Symbol ? Symbol.prototype : undefined,\n      symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n  /**\n   * The base implementation of `_.toString` which doesn't convert nullish\n   * values to empty strings.\n   *\n   * @private\n   * @param {*} value The value to process.\n   * @returns {string} Returns the string.\n   */\n  function baseToString(value) {\n    // Exit early for strings to avoid a performance hit in some environments.\n    if (typeof value == 'string') {\n      return value;\n    }\n    if (isSymbol(value)) {\n      return symbolToString ? symbolToString.call(value) : '';\n    }\n    var result = (value + '');\n    return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n  }\n\n  /**\n   * Checks if `value` is object-like. A value is object-like if it's not `null`\n   * and has a `typeof` result of \"object\".\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n   * @example\n   *\n   * _.isObjectLike({});\n   * // => true\n   *\n   * _.isObjectLike([1, 2, 3]);\n   * // => true\n   *\n   * _.isObjectLike(_.noop);\n   * // => false\n   *\n   * _.isObjectLike(null);\n   * // => false\n   */\n  function isObjectLike(value) {\n    return !!value && typeof value == 'object';\n  }\n\n  /**\n   * Checks if `value` is classified as a `Symbol` primitive or object.\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n   * @example\n   *\n   * _.isSymbol(Symbol.iterator);\n   * // => true\n   *\n   * _.isSymbol('abc');\n   * // => false\n   */\n  function isSymbol(value) {\n    return typeof value == 'symbol' ||\n      (isObjectLike(value) && objectToString.call(value) == symbolTag);\n  }\n\n  /**\n   * Converts `value` to a string. An empty string is returned for `null`\n   * and `undefined` values. The sign of `-0` is preserved.\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Lang\n   * @param {*} value The value to process.\n   * @returns {string} Returns the string.\n   * @example\n   *\n   * _.toString(null);\n   * // => ''\n   *\n   * _.toString(-0);\n   * // => '-0'\n   *\n   * _.toString([1, 2, 3]);\n   * // => '1,2,3'\n   */\n  function toString(value) {\n    return value == null ? '' : baseToString(value);\n  }\n\n  /**\n   * The inverse of `_.escape`; this method converts the HTML entities\n   * `&amp;`, `&lt;`, `&gt;`, `&quot;`, `&#39;`, and `&#96;` in `string` to\n   * their corresponding characters.\n   *\n   * **Note:** No other HTML entities are unescaped. To unescape additional\n   * HTML entities use a third-party library like [_he_](https://mths.be/he).\n   *\n   * @static\n   * @memberOf _\n   * @since 0.6.0\n   * @category String\n   * @param {string} [string=''] The string to unescape.\n   * @returns {string} Returns the unescaped string.\n   * @example\n   *\n   * _.unescape('fred, barney, &amp; pebbles');\n   * // => 'fred, barney, & pebbles'\n   */\n  function unescape(string) {\n    string = toString(string);\n    return (string && reHasEscapedHtml.test(string))\n      ? string.replace(reEscapedHtml, unescapeHtmlChar)\n      : string;\n  }\n\n  var lodash_unescape = unescape;\n\n  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n  const TOKEN_ESCAPED_OCTO = \"__TOKEN_ESCAPED_BACKSLASH_OCTO__\";\n  const BLOCK_DIRECTIVE = /^###@([\\S]+)([\\s\\S]*?)###/gm;\n  const INLINE_DIRECTIVE = /^#@([\\S]+)(.*)/g;\n  const BLOCK_COMMENT = /###[\\s\\S]*?###/gm;\n  const INLINE_COMMENT = /^#.*$/g;\n  const IS_EXTERNAL_URL = /^\\w+:\\/\\/\\/?\\w/i;\n  const LINK_PATTERN = /\\[\\[(.*?)\\]\\]/g;\n\n  const findStory = win => {\n    if (win && win.story) {\n      return win.story;\n    }\n\n    return {\n      state: {}\n    };\n  };\n\n  const escapeOctos = s => s.replace(\"\\\\#\", TOKEN_ESCAPED_OCTO);\n\n  const restoreOctos = s => s.replace(TOKEN_ESCAPED_OCTO, \"#\");\n\n  const stripComments = s => s.replace(BLOCK_COMMENT, \"\").replace(INLINE_COMMENT, \"\");\n\n  const extractDirectives = s => {\n    const directives = [];\n    s.replace(BLOCK_DIRECTIVE, (match, dir, content) => {\n      directives.push({\n        name: \"@\".concat(dir),\n        content: content.trim()\n      });\n      return \"\";\n    });\n    s.replace(INLINE_DIRECTIVE, (match, dir, content) => {\n      directives.push({\n        name: \"@\".concat(dir),\n        content: content.trim()\n      });\n      return \"\";\n    });\n    return directives;\n  };\n\n  const renderPassage = passage => {\n    const source = passage.source;\n    let result = source;\n    result = escapeOctos(result);\n    const directives = extractDirectives(result);\n    result = stripComments(result);\n    result = restoreOctos(result); // strip remaining comments\n\n    result = result.replace(\"\\\\#\", TOKEN_ESCAPED_OCTO).replace(BLOCK_COMMENT, \"\").replace(INLINE_COMMENT, \"\").replace(TOKEN_ESCAPED_OCTO, \"#\").trim();\n\n    if (passage) {\n      // remove links if set previously\n      passage.links = [];\n    } // [[links]]\n\n\n    result = result.replace(LINK_PATTERN, (match, t) => {\n      let display = t;\n      let target = t; // display|target format\n\n      const barIndex = t.indexOf(\"|\");\n      const rightArrIndex = t.indexOf(\"->\");\n      const leftArrIndex = t.indexOf(\"<-\");\n\n      switch (true) {\n        case barIndex >= 0:\n          display = t.substr(0, barIndex);\n          target = t.substr(barIndex + 1);\n          break;\n\n        case rightArrIndex >= 0:\n          display = t.substr(0, rightArrIndex);\n          target = t.substr(rightArrIndex + 2);\n          break;\n\n        case leftArrIndex >= 0:\n          display = t.substr(leftArrIndex + 2);\n          target = t.substr(0, leftArrIndex);\n          break;\n      } // render an external link & stop?\n\n\n      if (IS_EXTERNAL_URL.test(target)) {\n        return '<a href=\"' + target + '\" target=\"_blank\">' + display + \"</a>\";\n      } // handle passage\n\n\n      if (passage) {\n        passage.links.push({\n          display,\n          target\n        });\n      }\n\n      return \"\"; // render nothing if it's a twee link\n    }); // before handling any tags, handle any/all directives\n\n    directives.forEach(d => {\n      if (!passage.story.directives[d.name]) return;\n      passage.story.directives[d.name].forEach(run => {\n        result = run(d.content, result, passage, passage.story);\n      });\n    }); // if system tag, return an empty render set\n\n    if (passage.hasTag(\"system\")) {\n      return [];\n    } // if prompt tag is set, notify the story\n\n\n    if (passage) {\n      const prompts = passage.prefixTag(\"prompt\");\n\n      if (prompts.length) {\n        passage.story.prompt(prompts[0]);\n      }\n    } // if this is a multiline item, trim, split, and mark each item\n    // return the array\n\n\n    if (passage.hasTag(\"multiline\")) {\n      result = result.trim();\n      return result.split(/[\\r\\n]+/g);\n    } // else returns an array of 1\n\n\n    return [result];\n  };\n\n  class Passage {\n    constructor(id, name, tags, source, story) {\n      defineProperty(this, \"id\", null);\n\n      defineProperty(this, \"name\", null);\n\n      defineProperty(this, \"tags\", null);\n\n      defineProperty(this, \"tagDict\", {});\n\n      defineProperty(this, \"source\", null);\n\n      defineProperty(this, \"links\", []);\n\n      defineProperty(this, \"getSpeaker\", () => {\n        const speakerTag = this.tags.find(t => t.indexOf(\"speaker-\") === 0) || \"\";\n        const systemTag = this.hasTag(\"system\");\n        if (speakerTag) return speakerTag.replace(/^speaker-/, \"\");\n        if (systemTag) return \"system\";\n        return null;\n      });\n\n      defineProperty(this, \"prefixTag\", (pfx, asDict) => this.tags.filter(t => t.indexOf(\"\".concat(pfx, \"-\")) === 0).map(t => t.replace(\"\".concat(pfx, \"-\"), \"\")).reduce((a, t) => {\n        if (asDict) return _objectSpread({}, a, {\n          [t]: 1\n        });\n        return [...a, t];\n      }, asDict ? {} : []));\n\n      defineProperty(this, \"hasTag\", t => this.tagDict[t]);\n\n      defineProperty(this, \"render\", () => renderPassage(this));\n\n      this.id = id;\n      this.name = name;\n      this.tags = tags;\n      this.source = lodash_unescape(source);\n      this.story = story;\n      this.tags.forEach(t => this.tagDict[t] = 1);\n    }\n\n  }\n\n  defineProperty(Passage, \"render\", str => renderPassage(new Passage(null, null, null, str, findStory(window || null))));\n\n  /**\n   * lodash (Custom Build) <https://lodash.com/>\n   * Build: `lodash modularize exports=\"npm\" -o ./`\n   * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n   * Released under MIT license <https://lodash.com/license>\n   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n   */\n\n  /** Used as references for various `Number` constants. */\n  var INFINITY$1 = 1 / 0;\n\n  /** `Object#toString` result references. */\n  var symbolTag$1 = '[object Symbol]';\n\n  /** Used to match HTML entities and HTML characters. */\n  var reUnescapedHtml = /[&<>\"'`]/g,\n      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n  /** Used to map characters to HTML entities. */\n  var htmlEscapes = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '`': '&#96;'\n  };\n\n  /** Detect free variable `global` from Node.js. */\n  var freeGlobal$1 = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\n\n  /** Detect free variable `self`. */\n  var freeSelf$1 = typeof self == 'object' && self && self.Object === Object && self;\n\n  /** Used as a reference to the global object. */\n  var root$1 = freeGlobal$1 || freeSelf$1 || Function('return this')();\n\n  /**\n   * The base implementation of `_.propertyOf` without support for deep paths.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function basePropertyOf$1(object) {\n    return function(key) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * Used by `_.escape` to convert characters to HTML entities.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  var escapeHtmlChar = basePropertyOf$1(htmlEscapes);\n\n  /** Used for built-in method references. */\n  var objectProto$1 = Object.prototype;\n\n  /**\n   * Used to resolve the\n   * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n   * of values.\n   */\n  var objectToString$1 = objectProto$1.toString;\n\n  /** Built-in value references. */\n  var Symbol$1 = root$1.Symbol;\n\n  /** Used to convert symbols to primitives and strings. */\n  var symbolProto$1 = Symbol$1 ? Symbol$1.prototype : undefined,\n      symbolToString$1 = symbolProto$1 ? symbolProto$1.toString : undefined;\n\n  /**\n   * The base implementation of `_.toString` which doesn't convert nullish\n   * values to empty strings.\n   *\n   * @private\n   * @param {*} value The value to process.\n   * @returns {string} Returns the string.\n   */\n  function baseToString$1(value) {\n    // Exit early for strings to avoid a performance hit in some environments.\n    if (typeof value == 'string') {\n      return value;\n    }\n    if (isSymbol$1(value)) {\n      return symbolToString$1 ? symbolToString$1.call(value) : '';\n    }\n    var result = (value + '');\n    return (result == '0' && (1 / value) == -INFINITY$1) ? '-0' : result;\n  }\n\n  /**\n   * Checks if `value` is object-like. A value is object-like if it's not `null`\n   * and has a `typeof` result of \"object\".\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n   * @example\n   *\n   * _.isObjectLike({});\n   * // => true\n   *\n   * _.isObjectLike([1, 2, 3]);\n   * // => true\n   *\n   * _.isObjectLike(_.noop);\n   * // => false\n   *\n   * _.isObjectLike(null);\n   * // => false\n   */\n  function isObjectLike$1(value) {\n    return !!value && typeof value == 'object';\n  }\n\n  /**\n   * Checks if `value` is classified as a `Symbol` primitive or object.\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n   * @example\n   *\n   * _.isSymbol(Symbol.iterator);\n   * // => true\n   *\n   * _.isSymbol('abc');\n   * // => false\n   */\n  function isSymbol$1(value) {\n    return typeof value == 'symbol' ||\n      (isObjectLike$1(value) && objectToString$1.call(value) == symbolTag$1);\n  }\n\n  /**\n   * Converts `value` to a string. An empty string is returned for `null`\n   * and `undefined` values. The sign of `-0` is preserved.\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Lang\n   * @param {*} value The value to process.\n   * @returns {string} Returns the string.\n   * @example\n   *\n   * _.toString(null);\n   * // => ''\n   *\n   * _.toString(-0);\n   * // => '-0'\n   *\n   * _.toString([1, 2, 3]);\n   * // => '1,2,3'\n   */\n  function toString$1(value) {\n    return value == null ? '' : baseToString$1(value);\n  }\n\n  /**\n   * Converts the characters \"&\", \"<\", \">\", '\"', \"'\", and \"\\`\" in `string` to\n   * their corresponding HTML entities.\n   *\n   * **Note:** No other characters are escaped. To escape additional\n   * characters use a third-party library like [_he_](https://mths.be/he).\n   *\n   * Though the \">\" character is escaped for symmetry, characters like\n   * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n   * unless they're part of a tag or unquoted attribute value. See\n   * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n   * (under \"semi-related fun fact\") for more details.\n   *\n   * Backticks are escaped because in IE < 9, they can break out of\n   * attribute values or HTML comments. See [#59](https://html5sec.org/#59),\n   * [#102](https://html5sec.org/#102), [#108](https://html5sec.org/#108), and\n   * [#133](https://html5sec.org/#133) of the\n   * [HTML5 Security Cheatsheet](https://html5sec.org/) for more details.\n   *\n   * When working with HTML you should always\n   * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\n   * XSS vectors.\n   *\n   * @static\n   * @since 0.1.0\n   * @memberOf _\n   * @category String\n   * @param {string} [string=''] The string to escape.\n   * @returns {string} Returns the escaped string.\n   * @example\n   *\n   * _.escape('fred, barney, & pebbles');\n   * // => 'fred, barney, &amp; pebbles'\n   */\n  function escape(string) {\n    string = toString$1(string);\n    return (string && reHasUnescapedHtml.test(string))\n      ? string.replace(reUnescapedHtml, escapeHtmlChar)\n      : string;\n  }\n\n  var lodash_escape = escape;\n\n  const selectPassages = \"tw-passagedata\";\n  const selectCss = '*[type=\"text/twine-css\"]';\n  const selectJs = '*[type=\"text/twine-javascript\"]';\n  const selectActiveLink = \"#user-response-panel a[data-passage]\";\n  const selectActiveButton = \"#user-response-panel button[data-passage]\";\n  const selectActiveInput = \"#user-response-panel input\";\n  const selectActive = \".chat-panel .active\";\n  const selectHistory = \".chat-panel .history\";\n  const selectResponses = \"#user-response-panel\";\n  const typingIndicator = \"#animation-container\";\n  const IS_NUMERIC = /^[\\d]+$/;\n  /**\n   * Determine if a provided string contains only numbers\n   * In the case of `pid` values for passages, this is true\n   */\n\n  const isNumeric = d => IS_NUMERIC.test(d);\n  /**\n   * Format a user passage (such as a response)\n   */\n\n\n  const USER_PASSAGE_TMPL = ({\n    id,\n    text\n  }) => \"\\n  <div class=\\\"chat-passage-wrapper\\\" data-speaker=\\\"you\\\">\\n    <div class=\\\"chat-passage phistory\\\" data-speaker=\\\"you\\\" data-upassage=\\\"\".concat(id, \"\\\">\\n      \").concat(text, \"\\n    </div>\\n  </div>\\n\");\n  /**\n   * Format a message from a non-user\n   */\n\n\n  const OTHER_PASSAGE_TMPL = ({\n    speaker,\n    tags,\n    text\n  }) => \"\\n  <div data-speaker=\\\"\".concat(speaker, \"\\\" class=\\\"chat-passage-wrapper \").concat(tags.join(\" \"), \"\\\">\\n    <div data-speaker=\\\"\").concat(speaker, \"\\\" class=\\\"chat-passage\\\">\\n      \").concat(text, \"\\n    </div>\\n  </div>\\n\");\n  /**\n   * Forces a delay via promises in order to spread out messages\n   */\n\n\n  const delay = async (t = 0) => new Promise(resolve => setTimeout(resolve, t)); // Find one/many nodes within a context. We [...findAll] to ensure we're cast as an array\n  // not as a node list\n\n\n  const find = (ctx, s) => ctx.querySelector(s);\n\n  const findAll = (ctx, s) => [...ctx.querySelectorAll(s)] || [];\n  /**\n   * Standard Twine Format Story Object\n   */\n\n\n  class Story {\n    // Twine v2\n    constructor(win, src) {\n      defineProperty(this, \"version\", 2);\n\n      defineProperty(this, \"document\", null);\n\n      defineProperty(this, \"story\", null);\n\n      defineProperty(this, \"name\", \"\");\n\n      defineProperty(this, \"startsAt\", 0);\n\n      defineProperty(this, \"current\", 0);\n\n      defineProperty(this, \"history\", []);\n\n      defineProperty(this, \"passages\", {});\n\n      defineProperty(this, \"showPrompt\", false);\n\n      defineProperty(this, \"errorMessage\", \"\\u26a0 %s\");\n\n      defineProperty(this, \"directives\", {});\n\n      defineProperty(this, \"elements\", {});\n\n      defineProperty(this, \"userScripts\", []);\n\n      defineProperty(this, \"userStyles\", []);\n\n      defineProperty(this, \"start\", () => {\n        // activate userscripts and styles\n        this.userStyles.forEach(s => {\n          const t = this.document.createElement(\"style\");\n          t.innerHTML = s;\n          this.document.body.appendChild(t);\n        });\n        this.userScripts.forEach(s => {\n          // eval is evil, but this is simply how Twine works\n          // eslint-disable-line\n          globalEval(s);\n        }); // when you click on a[data-passage] (response link)...\n\n        this.document.body.addEventListener(\"click\", e => {\n          if (!e.target.matches(selectActiveLink)) {\n            return;\n          }\n\n          this.advance(this.findPassage(e.target.getAttribute(\"data-passage\")), e.target.innerHTML);\n        }); // when you click on button[data-passage] (response input)...\n\n        this.document.body.addEventListener(\"click\", e => {\n          if (!e.target.matches(selectActiveButton)) {\n            return;\n          } // capture and disable showPrompt feature\n\n\n          const value = find(this.document, selectActiveInput).value;\n          this.showPrompt = false;\n          this.advance(this.findPassage(e.target.getAttribute(\"data-passage\")), value);\n        });\n        this.advance(this.findPassage(this.startsAt));\n      });\n\n      defineProperty(this, \"findPassage\", idOrName => {\n        if (isNumeric(idOrName)) {\n          return this.passages[idOrName];\n        } else {\n          // handle passages with ' and \" (can't use a css selector consistently)\n          const p = findAll(this.story, \"tw-passagedata\").filter(p => p.getAttribute(\"name\") === idOrName)[0];\n          if (!p) return null;\n          return this.passages[p.getAttribute(\"pid\")];\n        }\n      });\n\n      defineProperty(this, \"advance\", async (passage, userText = null) => {\n        this.history.push(passage.id);\n        const last = this.current; // .active is captured & cleared\n\n        const existing = this.elements.active.innerHTML;\n        this.elements.active.innerHTML = \"\"; // whatever was in active is moved up into history\n\n        this.elements.history.innerHTML += existing; // if there is userText, it is added to .history\n\n        if (userText) {\n          this.renderUserMessage(last, userText, s => this.elements.history.innerHTML += s);\n        } // The new passage is rendered and placed in .active\n        // after all renders, user options are displayed\n\n\n        await this.renderPassage(passage, s => this.elements.active.innerHTML += s);\n\n        if (passage.hasTag(\"auto\")) {\n          // auto advance if the auto tag is set, skipping anything that\n          // could pause our operation\n          this.advance(this.findPassage(passage.links[0].target));\n          return;\n        } // if prompt is set from the current node, enable freetext\n\n\n        if (this.showPrompt) {\n          this.renderTextInput(passage);\n        } else {\n          this.renderChoices(passage);\n        }\n      });\n\n      defineProperty(this, \"renderUserMessage\", async (pid, text, renderer) => {\n        await renderer(USER_PASSAGE_TMPL({\n          pid,\n          text\n        }));\n        this.scrollToBottom();\n        return Promise.resolve();\n      });\n\n      defineProperty(this, \"renderPassage\", async (passage, renderer) => {\n        const speaker = passage.getSpeaker();\n        let statements = passage.render();\n        let next = statements.shift();\n        this.showTyping();\n\n        while (next) {\n          const content = OTHER_PASSAGE_TMPL({\n            speaker,\n            tags: passage.tags,\n            text: next\n          });\n          await delay(this.calculateDelay(next)); // todo\n\n          await renderer(content);\n          next = statements.shift();\n        }\n\n        this.hideTyping();\n        this.scrollToBottom();\n        return Promise.resolve();\n      });\n\n      defineProperty(this, \"calculateDelay\", txt => {\n        const typingDelayRatio = 0.3;\n        const rate = 20; // ms\n\n        return txt.length * rate * typingDelayRatio;\n      });\n\n      defineProperty(this, \"showTyping\", () => {\n        find(this.document, typingIndicator).style.visibility = \"visible\";\n      });\n\n      defineProperty(this, \"hideTyping\", () => {\n        find(this.document, typingIndicator).style.visibility = \"hidden\";\n      });\n\n      defineProperty(this, \"scrollToBottom\", () => {\n        const hist = find(this.document, \"#phistory\");\n        document.scrollingElement.scrollTop = hist.offsetHeight;\n      });\n\n      defineProperty(this, \"removeChoices\", () => {\n        const panel = find(this.document, selectResponses);\n        panel.innerHTML = \"\";\n      });\n\n      defineProperty(this, \"renderChoices\", passage => {\n        this.removeChoices();\n        const panel = find(this.document, selectResponses);\n        passage.links.forEach(l => {\n          panel.innerHTML += \"<a href=\\\"javascript:void(0)\\\" class=\\\"user-response\\\" data-passage=\\\"\".concat(lodash_escape(l.target), \"\\\">\").concat(l.display, \"</a>\");\n        });\n      });\n\n      defineProperty(this, \"renderTextInput\", passage => {\n        this.removeChoices();\n        const panel = find(this.document, selectResponses);\n        panel.innerHTML = \"<input type=\\\"text\\\" id=\\\"user-input\\\" placeholder=\\\"\".concat(this.showPrompt.placeholder, \"\\\" /><button data-passage=\\\"\").concat(lodash_escape(passage.links[0].target), \"\\\">&gt;</button>\");\n      });\n\n      defineProperty(this, \"prompt\", (saveAs, placeholder) => this.showPrompt = {\n        saveAs,\n        placeholder\n      });\n\n      defineProperty(this, \"directive\", (id, cb) => {\n        if (!this.directives[id]) {\n          this.directives[id] = [];\n        }\n\n        this.directives[id].push(cb);\n      });\n\n      this.window = win;\n\n      if (src) {\n        this.document = document.implementation.createHTMLDocument(\"Chatbook Injected Content\");\n      } else {\n        this.document = document;\n      }\n\n      this.story = find(this.document, \"tw-storydata\"); // elements\n\n      this.elements = {\n        active: find(this.document, selectActive),\n        history: find(this.document, selectHistory)\n      }; // properties of story node\n\n      this.name = this.story.getAttribute(\"name\") || \"\";\n      this.startsAt = this.story.getAttribute(\"startnode\") || 0;\n      findAll(this.story, selectPassages).forEach(p => {\n        const id = parseInt(p.getAttribute(\"pid\"));\n        const name = p.getAttribute(\"name\");\n        const tags = (p.getAttribute(\"tags\") || \"\").split(/\\s+/g);\n        const passage = p.innerHTML || \"\";\n        this.passages[id] = new Passage(id, name, tags, passage, this);\n      });\n      find(this.document, \"title\").innerHTML = this.name;\n      find(this.document, \"#ptitle\").innerHTML = this.name;\n      this.userScripts = (findAll(this.document, selectJs) || []).map(el => el.innerHTML);\n      this.userStyles = (findAll(this.document, selectCss) || []).map(el => el.innerHTML);\n    }\n    /**\n     * Starts the story by setting up listeners and then advancing\n     * to the first item in the stack\n     */\n\n\n  }\n\n  (win => {\n    if (typeof win !== \"undefined\") {\n      win.document.addEventListener(\"DOMContentLoaded\", function (event) {\n        window.globalEval = eval;\n        window.story = new Story(win);\n        window.story.start();\n      });\n    }\n  })(window || undefined);\n\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhdGJvb2sudW1kLmpzIiwic291cmNlcyI6WyIuLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eS5qcyIsIi4uL25vZGVfbW9kdWxlcy9sb2Rhc2gudW5lc2NhcGUvaW5kZXguanMiLCIuLi9zcmMvdHdpbmUvUGFzc2FnZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9sb2Rhc2guZXNjYXBlL2luZGV4LmpzIiwiLi4vc3JjL3R3aW5lL1N0b3J5LmpzIiwiLi4vc3JjL21haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2RlZmluZVByb3BlcnR5OyIsIi8qKlxuICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBJTkZJTklUWSA9IDEgLyAwO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIEhUTUwgZW50aXRpZXMgYW5kIEhUTUwgY2hhcmFjdGVycy4gKi9cbnZhciByZUVzY2FwZWRIdG1sID0gLyYoPzphbXB8bHR8Z3R8cXVvdHwjMzl8Izk2KTsvZyxcbiAgICByZUhhc0VzY2FwZWRIdG1sID0gUmVnRXhwKHJlRXNjYXBlZEh0bWwuc291cmNlKTtcblxuLyoqIFVzZWQgdG8gbWFwIEhUTUwgZW50aXRpZXMgdG8gY2hhcmFjdGVycy4gKi9cbnZhciBodG1sVW5lc2NhcGVzID0ge1xuICAnJmFtcDsnOiAnJicsXG4gICcmbHQ7JzogJzwnLFxuICAnJmd0Oyc6ICc+JyxcbiAgJyZxdW90Oyc6ICdcIicsXG4gICcmIzM5Oyc6IFwiJ1wiLFxuICAnJiM5NjsnOiAnYCdcbn07XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG52YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eU9mYCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUHJvcGVydHlPZihvYmplY3QpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuICB9O1xufVxuXG4vKipcbiAqIFVzZWQgYnkgYF8udW5lc2NhcGVgIHRvIGNvbnZlcnQgSFRNTCBlbnRpdGllcyB0byBjaGFyYWN0ZXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gY2hyIFRoZSBtYXRjaGVkIGNoYXJhY3RlciB0byB1bmVzY2FwZS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHVuZXNjYXBlZCBjaGFyYWN0ZXIuXG4gKi9cbnZhciB1bmVzY2FwZUh0bWxDaGFyID0gYmFzZVByb3BlcnR5T2YoaHRtbFVuZXNjYXBlcyk7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBTeW1ib2wgPSByb290LlN5bWJvbDtcblxuLyoqIFVzZWQgdG8gY29udmVydCBzeW1ib2xzIHRvIHByaW1pdGl2ZXMgYW5kIHN0cmluZ3MuICovXG52YXIgc3ltYm9sUHJvdG8gPSBTeW1ib2wgPyBTeW1ib2wucHJvdG90eXBlIDogdW5kZWZpbmVkLFxuICAgIHN5bWJvbFRvU3RyaW5nID0gc3ltYm9sUHJvdG8gPyBzeW1ib2xQcm90by50b1N0cmluZyA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50b1N0cmluZ2Agd2hpY2ggZG9lc24ndCBjb252ZXJ0IG51bGxpc2hcbiAqIHZhbHVlcyB0byBlbXB0eSBzdHJpbmdzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBiYXNlVG9TdHJpbmcodmFsdWUpIHtcbiAgLy8gRXhpdCBlYXJseSBmb3Igc3RyaW5ncyB0byBhdm9pZCBhIHBlcmZvcm1hbmNlIGhpdCBpbiBzb21lIGVudmlyb25tZW50cy5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIHN5bWJvbFRvU3RyaW5nID8gc3ltYm9sVG9TdHJpbmcuY2FsbCh2YWx1ZSkgOiAnJztcbiAgfVxuICB2YXIgcmVzdWx0ID0gKHZhbHVlICsgJycpO1xuICByZXR1cm4gKHJlc3VsdCA9PSAnMCcgJiYgKDEgLyB2YWx1ZSkgPT0gLUlORklOSVRZKSA/ICctMCcgOiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZCBmb3IgYG51bGxgXG4gKiBhbmQgYHVuZGVmaW5lZGAgdmFsdWVzLiBUaGUgc2lnbiBvZiBgLTBgIGlzIHByZXNlcnZlZC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b1N0cmluZyhudWxsKTtcbiAqIC8vID0+ICcnXG4gKlxuICogXy50b1N0cmluZygtMCk7XG4gKiAvLyA9PiAnLTAnXG4gKlxuICogXy50b1N0cmluZyhbMSwgMiwgM10pO1xuICogLy8gPT4gJzEsMiwzJ1xuICovXG5mdW5jdGlvbiB0b1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogYmFzZVRvU3RyaW5nKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBUaGUgaW52ZXJzZSBvZiBgXy5lc2NhcGVgOyB0aGlzIG1ldGhvZCBjb252ZXJ0cyB0aGUgSFRNTCBlbnRpdGllc1xuICogYCZhbXA7YCwgYCZsdDtgLCBgJmd0O2AsIGAmcXVvdDtgLCBgJiMzOTtgLCBhbmQgYCYjOTY7YCBpbiBgc3RyaW5nYCB0b1xuICogdGhlaXIgY29ycmVzcG9uZGluZyBjaGFyYWN0ZXJzLlxuICpcbiAqICoqTm90ZToqKiBObyBvdGhlciBIVE1MIGVudGl0aWVzIGFyZSB1bmVzY2FwZWQuIFRvIHVuZXNjYXBlIGFkZGl0aW9uYWxcbiAqIEhUTUwgZW50aXRpZXMgdXNlIGEgdGhpcmQtcGFydHkgbGlicmFyeSBsaWtlIFtfaGVfXShodHRwczovL210aHMuYmUvaGUpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC42LjBcbiAqIEBjYXRlZ29yeSBTdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIHVuZXNjYXBlLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgdW5lc2NhcGVkIHN0cmluZy5cbiAqIEBleGFtcGxlXG4gKlxuICogXy51bmVzY2FwZSgnZnJlZCwgYmFybmV5LCAmYW1wOyBwZWJibGVzJyk7XG4gKiAvLyA9PiAnZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnXG4gKi9cbmZ1bmN0aW9uIHVuZXNjYXBlKHN0cmluZykge1xuICBzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO1xuICByZXR1cm4gKHN0cmluZyAmJiByZUhhc0VzY2FwZWRIdG1sLnRlc3Qoc3RyaW5nKSlcbiAgICA/IHN0cmluZy5yZXBsYWNlKHJlRXNjYXBlZEh0bWwsIHVuZXNjYXBlSHRtbENoYXIpXG4gICAgOiBzdHJpbmc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdW5lc2NhcGU7XG4iLCJpbXBvcnQgdW5lc2NhcGUgZnJvbSBcImxvZGFzaC51bmVzY2FwZVwiO1xuXG5jb25zdCBUT0tFTl9FU0NBUEVEX09DVE8gPSBcIl9fVE9LRU5fRVNDQVBFRF9CQUNLU0xBU0hfT0NUT19fXCI7XG5cbmNvbnN0IEJMT0NLX0RJUkVDVElWRSA9IC9eIyMjQChbXFxTXSspKFtcXHNcXFNdKj8pIyMjL2dtO1xuY29uc3QgSU5MSU5FX0RJUkVDVElWRSA9IC9eI0AoW1xcU10rKSguKikvZztcblxuY29uc3QgQkxPQ0tfQ09NTUVOVCA9IC8jIyNbXFxzXFxTXSo/IyMjL2dtO1xuY29uc3QgSU5MSU5FX0NPTU1FTlQgPSAvXiMuKiQvZztcblxuY29uc3QgSVNfRVhURVJOQUxfVVJMID0gL15cXHcrOlxcL1xcL1xcLz9cXHcvaTtcbmNvbnN0IExJTktfUEFUVEVSTiA9IC9cXFtcXFsoLio/KVxcXVxcXS9nO1xuXG5jb25zdCBmaW5kU3RvcnkgPSB3aW4gPT4ge1xuICBpZiAod2luICYmIHdpbi5zdG9yeSkge1xuICAgIHJldHVybiB3aW4uc3Rvcnk7XG4gIH1cbiAgcmV0dXJuIHsgc3RhdGU6IHt9IH07XG59O1xuXG5jb25zdCBlc2NhcGVPY3RvcyA9IHMgPT4gcy5yZXBsYWNlKFwiXFxcXCNcIiwgVE9LRU5fRVNDQVBFRF9PQ1RPKTtcbmNvbnN0IHJlc3RvcmVPY3RvcyA9IHMgPT4gcy5yZXBsYWNlKFRPS0VOX0VTQ0FQRURfT0NUTywgXCIjXCIpO1xuXG5jb25zdCBzdHJpcENvbW1lbnRzID0gcyA9PlxuICBzLnJlcGxhY2UoQkxPQ0tfQ09NTUVOVCwgXCJcIikucmVwbGFjZShJTkxJTkVfQ09NTUVOVCwgXCJcIik7XG5cbmNvbnN0IGV4dHJhY3REaXJlY3RpdmVzID0gcyA9PiB7XG4gIGNvbnN0IGRpcmVjdGl2ZXMgPSBbXTtcbiAgcy5yZXBsYWNlKEJMT0NLX0RJUkVDVElWRSwgKG1hdGNoLCBkaXIsIGNvbnRlbnQpID0+IHtcbiAgICBkaXJlY3RpdmVzLnB1c2goeyBuYW1lOiBgQCR7ZGlyfWAsIGNvbnRlbnQ6IGNvbnRlbnQudHJpbSgpIH0pO1xuICAgIHJldHVybiBcIlwiO1xuICB9KTtcbiAgcy5yZXBsYWNlKElOTElORV9ESVJFQ1RJVkUsIChtYXRjaCwgZGlyLCBjb250ZW50KSA9PiB7XG4gICAgZGlyZWN0aXZlcy5wdXNoKHsgbmFtZTogYEAke2Rpcn1gLCBjb250ZW50OiBjb250ZW50LnRyaW0oKSB9KTtcbiAgICByZXR1cm4gXCJcIjtcbiAgfSk7XG5cbiAgcmV0dXJuIGRpcmVjdGl2ZXM7XG59O1xuXG5jb25zdCByZW5kZXJQYXNzYWdlID0gcGFzc2FnZSA9PiB7XG4gIGNvbnN0IHNvdXJjZSA9IHBhc3NhZ2Uuc291cmNlO1xuXG4gIGxldCByZXN1bHQgPSBzb3VyY2U7XG5cbiAgcmVzdWx0ID0gZXNjYXBlT2N0b3MocmVzdWx0KTtcbiAgY29uc3QgZGlyZWN0aXZlcyA9IGV4dHJhY3REaXJlY3RpdmVzKHJlc3VsdCk7XG4gIHJlc3VsdCA9IHN0cmlwQ29tbWVudHMocmVzdWx0KTtcbiAgcmVzdWx0ID0gcmVzdG9yZU9jdG9zKHJlc3VsdCk7XG5cbiAgLy8gc3RyaXAgcmVtYWluaW5nIGNvbW1lbnRzXG4gIHJlc3VsdCA9IHJlc3VsdFxuICAgIC5yZXBsYWNlKFwiXFxcXCNcIiwgVE9LRU5fRVNDQVBFRF9PQ1RPKVxuICAgIC5yZXBsYWNlKEJMT0NLX0NPTU1FTlQsIFwiXCIpXG4gICAgLnJlcGxhY2UoSU5MSU5FX0NPTU1FTlQsIFwiXCIpXG4gICAgLnJlcGxhY2UoVE9LRU5fRVNDQVBFRF9PQ1RPLCBcIiNcIilcbiAgICAudHJpbSgpO1xuXG4gIGlmIChwYXNzYWdlKSB7XG4gICAgLy8gcmVtb3ZlIGxpbmtzIGlmIHNldCBwcmV2aW91c2x5XG4gICAgcGFzc2FnZS5saW5rcyA9IFtdO1xuICB9XG5cbiAgLy8gW1tsaW5rc11dXG4gIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKExJTktfUEFUVEVSTiwgKG1hdGNoLCB0KSA9PiB7XG4gICAgbGV0IGRpc3BsYXkgPSB0O1xuICAgIGxldCB0YXJnZXQgPSB0O1xuXG4gICAgLy8gZGlzcGxheXx0YXJnZXQgZm9ybWF0XG4gICAgY29uc3QgYmFySW5kZXggPSB0LmluZGV4T2YoXCJ8XCIpO1xuICAgIGNvbnN0IHJpZ2h0QXJySW5kZXggPSB0LmluZGV4T2YoXCItPlwiKTtcbiAgICBjb25zdCBsZWZ0QXJySW5kZXggPSB0LmluZGV4T2YoXCI8LVwiKTtcblxuICAgIHN3aXRjaCAodHJ1ZSkge1xuICAgICAgY2FzZSBiYXJJbmRleCA+PSAwOlxuICAgICAgICBkaXNwbGF5ID0gdC5zdWJzdHIoMCwgYmFySW5kZXgpO1xuICAgICAgICB0YXJnZXQgPSB0LnN1YnN0cihiYXJJbmRleCArIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgcmlnaHRBcnJJbmRleCA+PSAwOlxuICAgICAgICBkaXNwbGF5ID0gdC5zdWJzdHIoMCwgcmlnaHRBcnJJbmRleCk7XG4gICAgICAgIHRhcmdldCA9IHQuc3Vic3RyKHJpZ2h0QXJySW5kZXggKyAyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGxlZnRBcnJJbmRleCA+PSAwOlxuICAgICAgICBkaXNwbGF5ID0gdC5zdWJzdHIobGVmdEFyckluZGV4ICsgMik7XG4gICAgICAgIHRhcmdldCA9IHQuc3Vic3RyKDAsIGxlZnRBcnJJbmRleCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIHJlbmRlciBhbiBleHRlcm5hbCBsaW5rICYgc3RvcD9cbiAgICBpZiAoSVNfRVhURVJOQUxfVVJMLnRlc3QodGFyZ2V0KSkge1xuICAgICAgcmV0dXJuICc8YSBocmVmPVwiJyArIHRhcmdldCArICdcIiB0YXJnZXQ9XCJfYmxhbmtcIj4nICsgZGlzcGxheSArIFwiPC9hPlwiO1xuICAgIH1cblxuICAgIC8vIGhhbmRsZSBwYXNzYWdlXG4gICAgaWYgKHBhc3NhZ2UpIHtcbiAgICAgIHBhc3NhZ2UubGlua3MucHVzaCh7XG4gICAgICAgIGRpc3BsYXksXG4gICAgICAgIHRhcmdldFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFwiXCI7IC8vIHJlbmRlciBub3RoaW5nIGlmIGl0J3MgYSB0d2VlIGxpbmtcbiAgfSk7XG5cbiAgLy8gYmVmb3JlIGhhbmRsaW5nIGFueSB0YWdzLCBoYW5kbGUgYW55L2FsbCBkaXJlY3RpdmVzXG4gIGRpcmVjdGl2ZXMuZm9yRWFjaChkID0+IHtcbiAgICBpZiAoIXBhc3NhZ2Uuc3RvcnkuZGlyZWN0aXZlc1tkLm5hbWVdKSByZXR1cm47XG4gICAgcGFzc2FnZS5zdG9yeS5kaXJlY3RpdmVzW2QubmFtZV0uZm9yRWFjaChydW4gPT4ge1xuICAgICAgcmVzdWx0ID0gcnVuKGQuY29udGVudCwgcmVzdWx0LCBwYXNzYWdlLCBwYXNzYWdlLnN0b3J5KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gaWYgc3lzdGVtIHRhZywgcmV0dXJuIGFuIGVtcHR5IHJlbmRlciBzZXRcbiAgaWYgKHBhc3NhZ2UuaGFzVGFnKFwic3lzdGVtXCIpKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgLy8gaWYgcHJvbXB0IHRhZyBpcyBzZXQsIG5vdGlmeSB0aGUgc3RvcnlcbiAgaWYgKHBhc3NhZ2UpIHtcbiAgICBjb25zdCBwcm9tcHRzID0gcGFzc2FnZS5wcmVmaXhUYWcoXCJwcm9tcHRcIik7XG4gICAgaWYgKHByb21wdHMubGVuZ3RoKSB7XG4gICAgICBwYXNzYWdlLnN0b3J5LnByb21wdChwcm9tcHRzWzBdKTtcbiAgICB9XG4gIH1cblxuICAvLyBpZiB0aGlzIGlzIGEgbXVsdGlsaW5lIGl0ZW0sIHRyaW0sIHNwbGl0LCBhbmQgbWFyayBlYWNoIGl0ZW1cbiAgLy8gcmV0dXJuIHRoZSBhcnJheVxuICBpZiAocGFzc2FnZS5oYXNUYWcoXCJtdWx0aWxpbmVcIikpIHtcbiAgICByZXN1bHQgPSByZXN1bHQudHJpbSgpO1xuICAgIHJldHVybiByZXN1bHQuc3BsaXQoL1tcXHJcXG5dKy9nKTtcbiAgfVxuXG4gIC8vIGVsc2UgcmV0dXJucyBhbiBhcnJheSBvZiAxXG4gIHJldHVybiBbcmVzdWx0XTtcbn07XG5cbmNsYXNzIFBhc3NhZ2Uge1xuICBpZCA9IG51bGw7XG4gIG5hbWUgPSBudWxsO1xuICB0YWdzID0gbnVsbDtcbiAgdGFnRGljdCA9IHt9O1xuICBzb3VyY2UgPSBudWxsO1xuICBsaW5rcyA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKGlkLCBuYW1lLCB0YWdzLCBzb3VyY2UsIHN0b3J5KSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy50YWdzID0gdGFncztcbiAgICB0aGlzLnNvdXJjZSA9IHVuZXNjYXBlKHNvdXJjZSk7XG4gICAgdGhpcy5zdG9yeSA9IHN0b3J5O1xuXG4gICAgdGhpcy50YWdzLmZvckVhY2godCA9PiAodGhpcy50YWdEaWN0W3RdID0gMSkpO1xuICB9XG5cbiAgZ2V0U3BlYWtlciA9ICgpID0+IHtcbiAgICBjb25zdCBzcGVha2VyVGFnID0gdGhpcy50YWdzLmZpbmQodCA9PiB0LmluZGV4T2YoXCJzcGVha2VyLVwiKSA9PT0gMCkgfHwgXCJcIjtcbiAgICBjb25zdCBzeXN0ZW1UYWcgPSB0aGlzLmhhc1RhZyhcInN5c3RlbVwiKTtcbiAgICBpZiAoc3BlYWtlclRhZykgcmV0dXJuIHNwZWFrZXJUYWcucmVwbGFjZSgvXnNwZWFrZXItLywgXCJcIik7XG4gICAgaWYgKHN5c3RlbVRhZykgcmV0dXJuIFwic3lzdGVtXCI7XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgcHJlZml4VGFnID0gKHBmeCwgYXNEaWN0KSA9PlxuICAgIHRoaXMudGFnc1xuICAgICAgLmZpbHRlcih0ID0+IHQuaW5kZXhPZihgJHtwZnh9LWApID09PSAwKVxuICAgICAgLm1hcCh0ID0+IHQucmVwbGFjZShgJHtwZnh9LWAsIFwiXCIpKVxuICAgICAgLnJlZHVjZShcbiAgICAgICAgKGEsIHQpID0+IHtcbiAgICAgICAgICBpZiAoYXNEaWN0KVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uYSxcbiAgICAgICAgICAgICAgW3RdOiAxXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgcmV0dXJuIFsuLi5hLCB0XTtcbiAgICAgICAgfSxcbiAgICAgICAgYXNEaWN0ID8ge30gOiBbXVxuICAgICAgKTtcblxuICBoYXNUYWcgPSB0ID0+IHRoaXMudGFnRGljdFt0XTtcblxuICAvLyBzdGF0aWMgYW5kIGluc3RhbmNlIHJlbmRlcnNcbiAgc3RhdGljIHJlbmRlciA9IHN0ciA9PlxuICAgIHJlbmRlclBhc3NhZ2UoXG4gICAgICBuZXcgUGFzc2FnZShudWxsLCBudWxsLCBudWxsLCBzdHIsIGZpbmRTdG9yeSh3aW5kb3cgfHwgbnVsbCkpXG4gICAgKTtcbiAgcmVuZGVyID0gKCkgPT4gcmVuZGVyUGFzc2FnZSh0aGlzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgUGFzc2FnZTtcbiIsIi8qKlxuICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBJTkZJTklUWSA9IDEgLyAwO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIEhUTUwgZW50aXRpZXMgYW5kIEhUTUwgY2hhcmFjdGVycy4gKi9cbnZhciByZVVuZXNjYXBlZEh0bWwgPSAvWyY8PlwiJ2BdL2csXG4gICAgcmVIYXNVbmVzY2FwZWRIdG1sID0gUmVnRXhwKHJlVW5lc2NhcGVkSHRtbC5zb3VyY2UpO1xuXG4vKiogVXNlZCB0byBtYXAgY2hhcmFjdGVycyB0byBIVE1MIGVudGl0aWVzLiAqL1xudmFyIGh0bWxFc2NhcGVzID0ge1xuICAnJic6ICcmYW1wOycsXG4gICc8JzogJyZsdDsnLFxuICAnPic6ICcmZ3Q7JyxcbiAgJ1wiJzogJyZxdW90OycsXG4gIFwiJ1wiOiAnJiMzOTsnLFxuICAnYCc6ICcmIzk2Oydcbn07XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG52YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eU9mYCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUHJvcGVydHlPZihvYmplY3QpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuICB9O1xufVxuXG4vKipcbiAqIFVzZWQgYnkgYF8uZXNjYXBlYCB0byBjb252ZXJ0IGNoYXJhY3RlcnMgdG8gSFRNTCBlbnRpdGllcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGNociBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gZXNjYXBlLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBjaGFyYWN0ZXIuXG4gKi9cbnZhciBlc2NhcGVIdG1sQ2hhciA9IGJhc2VQcm9wZXJ0eU9mKGh0bWxFc2NhcGVzKTtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIFN5bWJvbCA9IHJvb3QuU3ltYm9sO1xuXG4vKiogVXNlZCB0byBjb252ZXJ0IHN5bWJvbHMgdG8gcHJpbWl0aXZlcyBhbmQgc3RyaW5ncy4gKi9cbnZhciBzeW1ib2xQcm90byA9IFN5bWJvbCA/IFN5bWJvbC5wcm90b3R5cGUgOiB1bmRlZmluZWQsXG4gICAgc3ltYm9sVG9TdHJpbmcgPSBzeW1ib2xQcm90byA/IHN5bWJvbFByb3RvLnRvU3RyaW5nIDogdW5kZWZpbmVkO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRvU3RyaW5nYCB3aGljaCBkb2Vzbid0IGNvbnZlcnQgbnVsbGlzaFxuICogdmFsdWVzIHRvIGVtcHR5IHN0cmluZ3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGJhc2VUb1N0cmluZyh2YWx1ZSkge1xuICAvLyBFeGl0IGVhcmx5IGZvciBzdHJpbmdzIHRvIGF2b2lkIGEgcGVyZm9ybWFuY2UgaGl0IGluIHNvbWUgZW52aXJvbm1lbnRzLlxuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gc3ltYm9sVG9TdHJpbmcgPyBzeW1ib2xUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnO1xuICB9XG4gIHZhciByZXN1bHQgPSAodmFsdWUgKyAnJyk7XG4gIHJldHVybiAocmVzdWx0ID09ICcwJyAmJiAoMSAvIHZhbHVlKSA9PSAtSU5GSU5JVFkpID8gJy0wJyA6IHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTeW1ib2woJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3ltYm9sJyB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZy4gQW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkIGZvciBgbnVsbGBcbiAqIGFuZCBgdW5kZWZpbmVkYCB2YWx1ZXMuIFRoZSBzaWduIG9mIGAtMGAgaXMgcHJlc2VydmVkLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvU3RyaW5nKG51bGwpO1xuICogLy8gPT4gJydcbiAqXG4gKiBfLnRvU3RyaW5nKC0wKTtcbiAqIC8vID0+ICctMCdcbiAqXG4gKiBfLnRvU3RyaW5nKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiAnMSwyLDMnXG4gKi9cbmZ1bmN0aW9uIHRvU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiBiYXNlVG9TdHJpbmcodmFsdWUpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBjaGFyYWN0ZXJzIFwiJlwiLCBcIjxcIiwgXCI+XCIsICdcIicsIFwiJ1wiLCBhbmQgXCJcXGBcIiBpbiBgc3RyaW5nYCB0b1xuICogdGhlaXIgY29ycmVzcG9uZGluZyBIVE1MIGVudGl0aWVzLlxuICpcbiAqICoqTm90ZToqKiBObyBvdGhlciBjaGFyYWN0ZXJzIGFyZSBlc2NhcGVkLiBUbyBlc2NhcGUgYWRkaXRpb25hbFxuICogY2hhcmFjdGVycyB1c2UgYSB0aGlyZC1wYXJ0eSBsaWJyYXJ5IGxpa2UgW19oZV9dKGh0dHBzOi8vbXRocy5iZS9oZSkuXG4gKlxuICogVGhvdWdoIHRoZSBcIj5cIiBjaGFyYWN0ZXIgaXMgZXNjYXBlZCBmb3Igc3ltbWV0cnksIGNoYXJhY3RlcnMgbGlrZVxuICogXCI+XCIgYW5kIFwiL1wiIGRvbid0IG5lZWQgZXNjYXBpbmcgaW4gSFRNTCBhbmQgaGF2ZSBubyBzcGVjaWFsIG1lYW5pbmdcbiAqIHVubGVzcyB0aGV5J3JlIHBhcnQgb2YgYSB0YWcgb3IgdW5xdW90ZWQgYXR0cmlidXRlIHZhbHVlLiBTZWVcbiAqIFtNYXRoaWFzIEJ5bmVucydzIGFydGljbGVdKGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9hbWJpZ3VvdXMtYW1wZXJzYW5kcylcbiAqICh1bmRlciBcInNlbWktcmVsYXRlZCBmdW4gZmFjdFwiKSBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIEJhY2t0aWNrcyBhcmUgZXNjYXBlZCBiZWNhdXNlIGluIElFIDwgOSwgdGhleSBjYW4gYnJlYWsgb3V0IG9mXG4gKiBhdHRyaWJ1dGUgdmFsdWVzIG9yIEhUTUwgY29tbWVudHMuIFNlZSBbIzU5XShodHRwczovL2h0bWw1c2VjLm9yZy8jNTkpLFxuICogWyMxMDJdKGh0dHBzOi8vaHRtbDVzZWMub3JnLyMxMDIpLCBbIzEwOF0oaHR0cHM6Ly9odG1sNXNlYy5vcmcvIzEwOCksIGFuZFxuICogWyMxMzNdKGh0dHBzOi8vaHRtbDVzZWMub3JnLyMxMzMpIG9mIHRoZVxuICogW0hUTUw1IFNlY3VyaXR5IENoZWF0c2hlZXRdKGh0dHBzOi8vaHRtbDVzZWMub3JnLykgZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBXaGVuIHdvcmtpbmcgd2l0aCBIVE1MIHlvdSBzaG91bGQgYWx3YXlzXG4gKiBbcXVvdGUgYXR0cmlidXRlIHZhbHVlc10oaHR0cDovL3dvbmtvLmNvbS9wb3N0L2h0bWwtZXNjYXBpbmcpIHRvIHJlZHVjZVxuICogWFNTIHZlY3RvcnMuXG4gKlxuICogQHN0YXRpY1xuICogQHNpbmNlIDAuMS4wXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IFN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gZXNjYXBlLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBzdHJpbmcuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZXNjYXBlKCdmcmVkLCBiYXJuZXksICYgcGViYmxlcycpO1xuICogLy8gPT4gJ2ZyZWQsIGJhcm5leSwgJmFtcDsgcGViYmxlcydcbiAqL1xuZnVuY3Rpb24gZXNjYXBlKHN0cmluZykge1xuICBzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO1xuICByZXR1cm4gKHN0cmluZyAmJiByZUhhc1VuZXNjYXBlZEh0bWwudGVzdChzdHJpbmcpKVxuICAgID8gc3RyaW5nLnJlcGxhY2UocmVVbmVzY2FwZWRIdG1sLCBlc2NhcGVIdG1sQ2hhcilcbiAgICA6IHN0cmluZztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlc2NhcGU7XG4iLCJpbXBvcnQgUGFzc2FnZSBmcm9tIFwiLi9QYXNzYWdlXCI7XG5pbXBvcnQgZXNjYXBlIGZyb20gXCJsb2Rhc2guZXNjYXBlXCI7XG5cbmNvbnN0IHNlbGVjdFBhc3NhZ2VzID0gXCJ0dy1wYXNzYWdlZGF0YVwiO1xuY29uc3Qgc2VsZWN0Q3NzID0gJypbdHlwZT1cInRleHQvdHdpbmUtY3NzXCJdJztcbmNvbnN0IHNlbGVjdEpzID0gJypbdHlwZT1cInRleHQvdHdpbmUtamF2YXNjcmlwdFwiXSc7XG5jb25zdCBzZWxlY3RBY3RpdmVMaW5rID0gXCIjdXNlci1yZXNwb25zZS1wYW5lbCBhW2RhdGEtcGFzc2FnZV1cIjtcbmNvbnN0IHNlbGVjdEFjdGl2ZUJ1dHRvbiA9IFwiI3VzZXItcmVzcG9uc2UtcGFuZWwgYnV0dG9uW2RhdGEtcGFzc2FnZV1cIjtcbmNvbnN0IHNlbGVjdEFjdGl2ZUlucHV0ID0gXCIjdXNlci1yZXNwb25zZS1wYW5lbCBpbnB1dFwiO1xuY29uc3Qgc2VsZWN0QWN0aXZlID0gXCIuY2hhdC1wYW5lbCAuYWN0aXZlXCI7XG5jb25zdCBzZWxlY3RIaXN0b3J5ID0gXCIuY2hhdC1wYW5lbCAuaGlzdG9yeVwiO1xuY29uc3Qgc2VsZWN0UmVzcG9uc2VzID0gXCIjdXNlci1yZXNwb25zZS1wYW5lbFwiO1xuY29uc3QgdHlwaW5nSW5kaWNhdG9yID0gXCIjYW5pbWF0aW9uLWNvbnRhaW5lclwiO1xuXG5jb25zdCBJU19OVU1FUklDID0gL15bXFxkXSskLztcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSBwcm92aWRlZCBzdHJpbmcgY29udGFpbnMgb25seSBudW1iZXJzXG4gKiBJbiB0aGUgY2FzZSBvZiBgcGlkYCB2YWx1ZXMgZm9yIHBhc3NhZ2VzLCB0aGlzIGlzIHRydWVcbiAqL1xuY29uc3QgaXNOdW1lcmljID0gZCA9PiBJU19OVU1FUklDLnRlc3QoZCk7XG5cbi8qKlxuICogRm9ybWF0IGEgdXNlciBwYXNzYWdlIChzdWNoIGFzIGEgcmVzcG9uc2UpXG4gKi9cbmNvbnN0IFVTRVJfUEFTU0FHRV9UTVBMID0gKHsgaWQsIHRleHQgfSkgPT4gYFxuICA8ZGl2IGNsYXNzPVwiY2hhdC1wYXNzYWdlLXdyYXBwZXJcIiBkYXRhLXNwZWFrZXI9XCJ5b3VcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY2hhdC1wYXNzYWdlIHBoaXN0b3J5XCIgZGF0YS1zcGVha2VyPVwieW91XCIgZGF0YS11cGFzc2FnZT1cIiR7aWR9XCI+XG4gICAgICAke3RleHR9XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuYDtcblxuLyoqXG4gKiBGb3JtYXQgYSBtZXNzYWdlIGZyb20gYSBub24tdXNlclxuICovXG5jb25zdCBPVEhFUl9QQVNTQUdFX1RNUEwgPSAoeyBzcGVha2VyLCB0YWdzLCB0ZXh0IH0pID0+IGBcbiAgPGRpdiBkYXRhLXNwZWFrZXI9XCIke3NwZWFrZXJ9XCIgY2xhc3M9XCJjaGF0LXBhc3NhZ2Utd3JhcHBlciAke3RhZ3Muam9pbihcIiBcIil9XCI+XG4gICAgPGRpdiBkYXRhLXNwZWFrZXI9XCIke3NwZWFrZXJ9XCIgY2xhc3M9XCJjaGF0LXBhc3NhZ2VcIj5cbiAgICAgICR7dGV4dH1cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG5gO1xuXG4vKipcbiAqIEZvcmNlcyBhIGRlbGF5IHZpYSBwcm9taXNlcyBpbiBvcmRlciB0byBzcHJlYWQgb3V0IG1lc3NhZ2VzXG4gKi9cbmNvbnN0IGRlbGF5ID0gYXN5bmMgKHQgPSAwKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdCkpO1xuXG4vLyBGaW5kIG9uZS9tYW55IG5vZGVzIHdpdGhpbiBhIGNvbnRleHQuIFdlIFsuLi5maW5kQWxsXSB0byBlbnN1cmUgd2UncmUgY2FzdCBhcyBhbiBhcnJheVxuLy8gbm90IGFzIGEgbm9kZSBsaXN0XG5jb25zdCBmaW5kID0gKGN0eCwgcykgPT4gY3R4LnF1ZXJ5U2VsZWN0b3Iocyk7XG5jb25zdCBmaW5kQWxsID0gKGN0eCwgcykgPT4gWy4uLmN0eC5xdWVyeVNlbGVjdG9yQWxsKHMpXSB8fCBbXTtcblxuLyoqXG4gKiBTdGFuZGFyZCBUd2luZSBGb3JtYXQgU3RvcnkgT2JqZWN0XG4gKi9cbmNsYXNzIFN0b3J5IHtcbiAgdmVyc2lvbiA9IDI7IC8vIFR3aW5lIHYyXG5cbiAgZG9jdW1lbnQgPSBudWxsO1xuICBzdG9yeSA9IG51bGw7XG4gIG5hbWUgPSBcIlwiO1xuICBzdGFydHNBdCA9IDA7XG4gIGN1cnJlbnQgPSAwO1xuICBoaXN0b3J5ID0gW107XG4gIHBhc3NhZ2VzID0ge307XG4gIHNob3dQcm9tcHQgPSBmYWxzZTtcbiAgZXJyb3JNZXNzYWdlID0gXCJcXHUyNmEwICVzXCI7XG5cbiAgZGlyZWN0aXZlcyA9IHt9O1xuICBlbGVtZW50cyA9IHt9O1xuXG4gIHVzZXJTY3JpcHRzID0gW107XG4gIHVzZXJTdHlsZXMgPSBbXTtcblxuICBjb25zdHJ1Y3Rvcih3aW4sIHNyYykge1xuICAgIHRoaXMud2luZG93ID0gd2luO1xuXG4gICAgaWYgKHNyYykge1xuICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcbiAgICAgICAgXCJDaGF0Ym9vayBJbmplY3RlZCBDb250ZW50XCJcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICB9XG5cbiAgICB0aGlzLnN0b3J5ID0gZmluZCh0aGlzLmRvY3VtZW50LCBcInR3LXN0b3J5ZGF0YVwiKTtcblxuICAgIC8vIGVsZW1lbnRzXG4gICAgdGhpcy5lbGVtZW50cyA9IHtcbiAgICAgIGFjdGl2ZTogZmluZCh0aGlzLmRvY3VtZW50LCBzZWxlY3RBY3RpdmUpLFxuICAgICAgaGlzdG9yeTogZmluZCh0aGlzLmRvY3VtZW50LCBzZWxlY3RIaXN0b3J5KVxuICAgIH07XG5cbiAgICAvLyBwcm9wZXJ0aWVzIG9mIHN0b3J5IG5vZGVcbiAgICB0aGlzLm5hbWUgPSB0aGlzLnN0b3J5LmdldEF0dHJpYnV0ZShcIm5hbWVcIikgfHwgXCJcIjtcbiAgICB0aGlzLnN0YXJ0c0F0ID0gdGhpcy5zdG9yeS5nZXRBdHRyaWJ1dGUoXCJzdGFydG5vZGVcIikgfHwgMDtcblxuICAgIGZpbmRBbGwodGhpcy5zdG9yeSwgc2VsZWN0UGFzc2FnZXMpLmZvckVhY2gocCA9PiB7XG4gICAgICBjb25zdCBpZCA9IHBhcnNlSW50KHAuZ2V0QXR0cmlidXRlKFwicGlkXCIpKTtcbiAgICAgIGNvbnN0IG5hbWUgPSBwLmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG4gICAgICBjb25zdCB0YWdzID0gKHAuZ2V0QXR0cmlidXRlKFwidGFnc1wiKSB8fCBcIlwiKS5zcGxpdCgvXFxzKy9nKTtcbiAgICAgIGNvbnN0IHBhc3NhZ2UgPSBwLmlubmVySFRNTCB8fCBcIlwiO1xuXG4gICAgICB0aGlzLnBhc3NhZ2VzW2lkXSA9IG5ldyBQYXNzYWdlKGlkLCBuYW1lLCB0YWdzLCBwYXNzYWdlLCB0aGlzKTtcbiAgICB9KTtcblxuICAgIGZpbmQodGhpcy5kb2N1bWVudCwgXCJ0aXRsZVwiKS5pbm5lckhUTUwgPSB0aGlzLm5hbWU7XG4gICAgZmluZCh0aGlzLmRvY3VtZW50LCBcIiNwdGl0bGVcIikuaW5uZXJIVE1MID0gdGhpcy5uYW1lO1xuXG4gICAgdGhpcy51c2VyU2NyaXB0cyA9IChmaW5kQWxsKHRoaXMuZG9jdW1lbnQsIHNlbGVjdEpzKSB8fCBbXSkubWFwKFxuICAgICAgZWwgPT4gZWwuaW5uZXJIVE1MXG4gICAgKTtcbiAgICB0aGlzLnVzZXJTdHlsZXMgPSAoZmluZEFsbCh0aGlzLmRvY3VtZW50LCBzZWxlY3RDc3MpIHx8IFtdKS5tYXAoXG4gICAgICBlbCA9PiBlbC5pbm5lckhUTUxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgc3RvcnkgYnkgc2V0dGluZyB1cCBsaXN0ZW5lcnMgYW5kIHRoZW4gYWR2YW5jaW5nXG4gICAqIHRvIHRoZSBmaXJzdCBpdGVtIGluIHRoZSBzdGFja1xuICAgKi9cbiAgc3RhcnQgPSAoKSA9PiB7XG4gICAgLy8gYWN0aXZhdGUgdXNlcnNjcmlwdHMgYW5kIHN0eWxlc1xuICAgIHRoaXMudXNlclN0eWxlcy5mb3JFYWNoKHMgPT4ge1xuICAgICAgY29uc3QgdCA9IHRoaXMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgICAgdC5pbm5lckhUTUwgPSBzO1xuICAgICAgdGhpcy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHQpO1xuICAgIH0pO1xuICAgIHRoaXMudXNlclNjcmlwdHMuZm9yRWFjaChzID0+IHtcbiAgICAgIC8vIGV2YWwgaXMgZXZpbCwgYnV0IHRoaXMgaXMgc2ltcGx5IGhvdyBUd2luZSB3b3Jrc1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgZ2xvYmFsRXZhbChzKTtcbiAgICB9KTtcblxuICAgIC8vIHdoZW4geW91IGNsaWNrIG9uIGFbZGF0YS1wYXNzYWdlXSAocmVzcG9uc2UgbGluaykuLi5cbiAgICB0aGlzLmRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xuICAgICAgaWYgKCFlLnRhcmdldC5tYXRjaGVzKHNlbGVjdEFjdGl2ZUxpbmspKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5hZHZhbmNlKFxuICAgICAgICB0aGlzLmZpbmRQYXNzYWdlKGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtcGFzc2FnZVwiKSksXG4gICAgICAgIGUudGFyZ2V0LmlubmVySFRNTFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIC8vIHdoZW4geW91IGNsaWNrIG9uIGJ1dHRvbltkYXRhLXBhc3NhZ2VdIChyZXNwb25zZSBpbnB1dCkuLi5cbiAgICB0aGlzLmRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xuICAgICAgaWYgKCFlLnRhcmdldC5tYXRjaGVzKHNlbGVjdEFjdGl2ZUJ1dHRvbikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBjYXB0dXJlIGFuZCBkaXNhYmxlIHNob3dQcm9tcHQgZmVhdHVyZVxuICAgICAgY29uc3QgdmFsdWUgPSBmaW5kKHRoaXMuZG9jdW1lbnQsIHNlbGVjdEFjdGl2ZUlucHV0KS52YWx1ZTtcbiAgICAgIHRoaXMuc2hvd1Byb21wdCA9IGZhbHNlO1xuXG4gICAgICB0aGlzLmFkdmFuY2UoXG4gICAgICAgIHRoaXMuZmluZFBhc3NhZ2UoZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1wYXNzYWdlXCIpKSxcbiAgICAgICAgdmFsdWVcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkdmFuY2UodGhpcy5maW5kUGFzc2FnZSh0aGlzLnN0YXJ0c0F0KSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEZpbmQgYSBwYXNzYWdlIGJhc2VkIG9uIGl0cyBpZCBvciBuYW1lXG4gICAqL1xuICBmaW5kUGFzc2FnZSA9IGlkT3JOYW1lID0+IHtcbiAgICBpZiAoaXNOdW1lcmljKGlkT3JOYW1lKSkge1xuICAgICAgcmV0dXJuIHRoaXMucGFzc2FnZXNbaWRPck5hbWVdO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBoYW5kbGUgcGFzc2FnZXMgd2l0aCAnIGFuZCBcIiAoY2FuJ3QgdXNlIGEgY3NzIHNlbGVjdG9yIGNvbnNpc3RlbnRseSlcbiAgICAgIGNvbnN0IHAgPSBmaW5kQWxsKHRoaXMuc3RvcnksIFwidHctcGFzc2FnZWRhdGFcIikuZmlsdGVyKFxuICAgICAgICBwID0+IHAuZ2V0QXR0cmlidXRlKFwibmFtZVwiKSA9PT0gaWRPck5hbWVcbiAgICAgIClbMF07XG4gICAgICBpZiAoIXApIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIHRoaXMucGFzc2FnZXNbcC5nZXRBdHRyaWJ1dGUoXCJwaWRcIildO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQWR2YW5jZSB0aGUgc3RvcnkgdG8gdGhlIHBhc3NhZ2Ugc3BlY2lmaWVkLCBvcHRpb25hbGx5IGFkZGluZyB1c2VyVGV4dFxuICAgKi9cbiAgYWR2YW5jZSA9IGFzeW5jIChwYXNzYWdlLCB1c2VyVGV4dCA9IG51bGwpID0+IHtcbiAgICB0aGlzLmhpc3RvcnkucHVzaChwYXNzYWdlLmlkKTtcbiAgICBjb25zdCBsYXN0ID0gdGhpcy5jdXJyZW50O1xuXG4gICAgLy8gLmFjdGl2ZSBpcyBjYXB0dXJlZCAmIGNsZWFyZWRcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuZWxlbWVudHMuYWN0aXZlLmlubmVySFRNTDtcbiAgICB0aGlzLmVsZW1lbnRzLmFjdGl2ZS5pbm5lckhUTUwgPSBcIlwiO1xuXG4gICAgLy8gd2hhdGV2ZXIgd2FzIGluIGFjdGl2ZSBpcyBtb3ZlZCB1cCBpbnRvIGhpc3RvcnlcbiAgICB0aGlzLmVsZW1lbnRzLmhpc3RvcnkuaW5uZXJIVE1MICs9IGV4aXN0aW5nO1xuXG4gICAgLy8gaWYgdGhlcmUgaXMgdXNlclRleHQsIGl0IGlzIGFkZGVkIHRvIC5oaXN0b3J5XG4gICAgaWYgKHVzZXJUZXh0KSB7XG4gICAgICB0aGlzLnJlbmRlclVzZXJNZXNzYWdlKFxuICAgICAgICBsYXN0LFxuICAgICAgICB1c2VyVGV4dCxcbiAgICAgICAgcyA9PiAodGhpcy5lbGVtZW50cy5oaXN0b3J5LmlubmVySFRNTCArPSBzKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBUaGUgbmV3IHBhc3NhZ2UgaXMgcmVuZGVyZWQgYW5kIHBsYWNlZCBpbiAuYWN0aXZlXG4gICAgLy8gYWZ0ZXIgYWxsIHJlbmRlcnMsIHVzZXIgb3B0aW9ucyBhcmUgZGlzcGxheWVkXG4gICAgYXdhaXQgdGhpcy5yZW5kZXJQYXNzYWdlKFxuICAgICAgcGFzc2FnZSxcbiAgICAgIHMgPT4gKHRoaXMuZWxlbWVudHMuYWN0aXZlLmlubmVySFRNTCArPSBzKVxuICAgICk7XG4gICAgaWYgKHBhc3NhZ2UuaGFzVGFnKFwiYXV0b1wiKSkge1xuICAgICAgLy8gYXV0byBhZHZhbmNlIGlmIHRoZSBhdXRvIHRhZyBpcyBzZXQsIHNraXBwaW5nIGFueXRoaW5nIHRoYXRcbiAgICAgIC8vIGNvdWxkIHBhdXNlIG91ciBvcGVyYXRpb25cbiAgICAgIHRoaXMuYWR2YW5jZSh0aGlzLmZpbmRQYXNzYWdlKHBhc3NhZ2UubGlua3NbMF0udGFyZ2V0KSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gaWYgcHJvbXB0IGlzIHNldCBmcm9tIHRoZSBjdXJyZW50IG5vZGUsIGVuYWJsZSBmcmVldGV4dFxuICAgIGlmICh0aGlzLnNob3dQcm9tcHQpIHtcbiAgICAgIHRoaXMucmVuZGVyVGV4dElucHV0KHBhc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbmRlckNob2ljZXMocGFzc2FnZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW5kZXIgdGV4dCBhcyBpZiBpdCBjYW1lIGZyb20gdGhlIHVzZXJcbiAgICovXG4gIHJlbmRlclVzZXJNZXNzYWdlID0gYXN5bmMgKHBpZCwgdGV4dCwgcmVuZGVyZXIpID0+IHtcbiAgICBhd2FpdCByZW5kZXJlcihcbiAgICAgIFVTRVJfUEFTU0FHRV9UTVBMKHtcbiAgICAgICAgcGlkLFxuICAgICAgICB0ZXh0XG4gICAgICB9KVxuICAgICk7XG4gICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVuZGVyIGEgVHdpbmUrQ2hhdGJvb2sgcGFzc2FnZSBvYmplY3RcbiAgICovXG4gIHJlbmRlclBhc3NhZ2UgPSBhc3luYyAocGFzc2FnZSwgcmVuZGVyZXIpID0+IHtcbiAgICBjb25zdCBzcGVha2VyID0gcGFzc2FnZS5nZXRTcGVha2VyKCk7XG4gICAgbGV0IHN0YXRlbWVudHMgPSBwYXNzYWdlLnJlbmRlcigpO1xuICAgIGxldCBuZXh0ID0gc3RhdGVtZW50cy5zaGlmdCgpO1xuICAgIHRoaXMuc2hvd1R5cGluZygpO1xuICAgIHdoaWxlIChuZXh0KSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gT1RIRVJfUEFTU0FHRV9UTVBMKHtcbiAgICAgICAgc3BlYWtlcixcbiAgICAgICAgdGFnczogcGFzc2FnZS50YWdzLFxuICAgICAgICB0ZXh0OiBuZXh0XG4gICAgICB9KTtcbiAgICAgIGF3YWl0IGRlbGF5KHRoaXMuY2FsY3VsYXRlRGVsYXkobmV4dCkpOyAvLyB0b2RvXG4gICAgICBhd2FpdCByZW5kZXJlcihjb250ZW50KTtcbiAgICAgIG5leHQgPSBzdGF0ZW1lbnRzLnNoaWZ0KCk7XG4gICAgfVxuICAgIHRoaXMuaGlkZVR5cGluZygpO1xuICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfTtcblxuICAvKipcbiAgICogQSByb3VnaCBmdW5jdGlvbiBmb3IgZGV0ZXJtaW5pbmcgYSB3YWl0aW5nIHBlcmlvZCBiYXNlZCBvbiBzdHJpbmcgbGVuZ3RoXG4gICAqL1xuICBjYWxjdWxhdGVEZWxheSA9IHR4dCA9PiB7XG4gICAgY29uc3QgdHlwaW5nRGVsYXlSYXRpbyA9IDAuMztcbiAgICBjb25zdCByYXRlID0gMjA7IC8vIG1zXG4gICAgcmV0dXJuIHR4dC5sZW5ndGggKiByYXRlICogdHlwaW5nRGVsYXlSYXRpbztcbiAgfTtcblxuICAvKipcbiAgICogU2hvd3MgdGhlIHR5cGluZyBpbmRpY2F0b3JcbiAgICovXG4gIHNob3dUeXBpbmcgPSAoKSA9PiB7XG4gICAgZmluZCh0aGlzLmRvY3VtZW50LCB0eXBpbmdJbmRpY2F0b3IpLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcbiAgfTtcblxuICAvKipcbiAgICogSGlkZXMgdGhlIHR5cGluZyBpbmRpY2F0b3JcbiAgICovXG4gIGhpZGVUeXBpbmcgPSAoKSA9PiB7XG4gICAgZmluZCh0aGlzLmRvY3VtZW50LCB0eXBpbmdJbmRpY2F0b3IpLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTY3JvbGxzIHRoZSBkb2N1bWVudCBhcyBmYXIgYXMgcG9zc2libGUgKGJhc2VkIG9uIGhpc3RvcnkgY29udGFpbmVyJ3MgaGVpZ2h0KVxuICAgKi9cbiAgc2Nyb2xsVG9Cb3R0b20gPSAoKSA9PiB7XG4gICAgY29uc3QgaGlzdCA9IGZpbmQodGhpcy5kb2N1bWVudCwgXCIjcGhpc3RvcnlcIik7XG4gICAgZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudC5zY3JvbGxUb3AgPSBoaXN0Lm9mZnNldEhlaWdodDtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSBjaG9pY2VzIHBhbmVsXG4gICAqL1xuICByZW1vdmVDaG9pY2VzID0gKCkgPT4ge1xuICAgIGNvbnN0IHBhbmVsID0gZmluZCh0aGlzLmRvY3VtZW50LCBzZWxlY3RSZXNwb25zZXMpO1xuICAgIHBhbmVsLmlubmVySFRNTCA9IFwiXCI7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGNob2ljZXMgcGFuZWwgd2l0aCBhIHNldCBvZiBvcHRpb25zIGJhc2VkIG9uIHBhc3NhZ2UgbGlua3NcbiAgICovXG4gIHJlbmRlckNob2ljZXMgPSBwYXNzYWdlID0+IHtcbiAgICB0aGlzLnJlbW92ZUNob2ljZXMoKTtcbiAgICBjb25zdCBwYW5lbCA9IGZpbmQodGhpcy5kb2N1bWVudCwgc2VsZWN0UmVzcG9uc2VzKTtcbiAgICBwYXNzYWdlLmxpbmtzLmZvckVhY2gobCA9PiB7XG4gICAgICBwYW5lbC5pbm5lckhUTUwgKz0gYDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIiBjbGFzcz1cInVzZXItcmVzcG9uc2VcIiBkYXRhLXBhc3NhZ2U9XCIke2VzY2FwZShcbiAgICAgICAgbC50YXJnZXRcbiAgICAgICl9XCI+JHtsLmRpc3BsYXl9PC9hPmA7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgYSBmcmVlLXRleHQgaW5wdXQgYmFzZWQgb24gc2hvd1Byb21wdCBzZXR0aW5nc1xuICAgKi9cbiAgcmVuZGVyVGV4dElucHV0ID0gcGFzc2FnZSA9PiB7XG4gICAgdGhpcy5yZW1vdmVDaG9pY2VzKCk7XG4gICAgY29uc3QgcGFuZWwgPSBmaW5kKHRoaXMuZG9jdW1lbnQsIHNlbGVjdFJlc3BvbnNlcyk7XG4gICAgcGFuZWwuaW5uZXJIVE1MID0gYDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwidXNlci1pbnB1dFwiIHBsYWNlaG9sZGVyPVwiJHtcbiAgICAgIHRoaXMuc2hvd1Byb21wdC5wbGFjZWhvbGRlclxuICAgIH1cIiAvPjxidXR0b24gZGF0YS1wYXNzYWdlPVwiJHtlc2NhcGUoXG4gICAgICBwYXNzYWdlLmxpbmtzWzBdLnRhcmdldFxuICAgICl9XCI+Jmd0OzwvYnV0dG9uPmA7XG4gIH07XG5cbiAgLyoqXG4gICAqIEVuYWJsZXMgdGhlIHRleHQtaW5wdXQgaW5zdGVhZCBvZiBzdGFuZGFyZCBjaG9pY2VzXG4gICAqL1xuICBwcm9tcHQgPSAoc2F2ZUFzLCBwbGFjZWhvbGRlcikgPT4gKHRoaXMuc2hvd1Byb21wdCA9IHsgc2F2ZUFzLCBwbGFjZWhvbGRlciB9KTtcblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgY3VzdG9tIGRpcmVjdGl2ZSBmb3IgdGhpcyBzdG9yeVxuICAgKiBTaWduYXR1cmUgb2YgKGRpcmVjdGl2ZUNvbnRlbnQsIG91dHB1dFRleHQsIHN0b3J5LCBwYXNzYWdlLCBuZXh0KVxuICAgKi9cbiAgZGlyZWN0aXZlID0gKGlkLCBjYikgPT4ge1xuICAgIGlmICghdGhpcy5kaXJlY3RpdmVzW2lkXSkge1xuICAgICAgdGhpcy5kaXJlY3RpdmVzW2lkXSA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmRpcmVjdGl2ZXNbaWRdLnB1c2goY2IpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBTdG9yeTtcbiIsImltcG9ydCBTdG9yeSBmcm9tIFwiLi90d2luZS9TdG9yeVwiO1xuXG4od2luID0+IHtcbiAgaWYgKHR5cGVvZiB3aW4gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB3aW4uZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHdpbmRvdy5nbG9iYWxFdmFsID0gZXZhbDtcbiAgICAgIHdpbmRvdy5zdG9yeSA9IG5ldyBTdG9yeSh3aW4pO1xuICAgICAgd2luZG93LnN0b3J5LnN0YXJ0KCk7XG4gICAgfSk7XG4gIH1cbn0pKHdpbmRvdyB8fCB1bmRlZmluZWQpO1xuIl0sIm5hbWVzIjpbImdsb2JhbCIsIlRPS0VOX0VTQ0FQRURfT0NUTyIsIkJMT0NLX0RJUkVDVElWRSIsIklOTElORV9ESVJFQ1RJVkUiLCJCTE9DS19DT01NRU5UIiwiSU5MSU5FX0NPTU1FTlQiLCJJU19FWFRFUk5BTF9VUkwiLCJMSU5LX1BBVFRFUk4iLCJmaW5kU3RvcnkiLCJ3aW4iLCJzdG9yeSIsInN0YXRlIiwiZXNjYXBlT2N0b3MiLCJzIiwicmVwbGFjZSIsInJlc3RvcmVPY3RvcyIsInN0cmlwQ29tbWVudHMiLCJleHRyYWN0RGlyZWN0aXZlcyIsImRpcmVjdGl2ZXMiLCJtYXRjaCIsImRpciIsImNvbnRlbnQiLCJwdXNoIiwibmFtZSIsInRyaW0iLCJyZW5kZXJQYXNzYWdlIiwicGFzc2FnZSIsInNvdXJjZSIsInJlc3VsdCIsImxpbmtzIiwidCIsImRpc3BsYXkiLCJ0YXJnZXQiLCJiYXJJbmRleCIsImluZGV4T2YiLCJyaWdodEFyckluZGV4IiwibGVmdEFyckluZGV4Iiwic3Vic3RyIiwidGVzdCIsImZvckVhY2giLCJkIiwicnVuIiwiaGFzVGFnIiwicHJvbXB0cyIsInByZWZpeFRhZyIsImxlbmd0aCIsInByb21wdCIsInNwbGl0IiwiUGFzc2FnZSIsImNvbnN0cnVjdG9yIiwiaWQiLCJ0YWdzIiwic3BlYWtlclRhZyIsImZpbmQiLCJzeXN0ZW1UYWciLCJwZngiLCJhc0RpY3QiLCJmaWx0ZXIiLCJtYXAiLCJyZWR1Y2UiLCJhIiwidGFnRGljdCIsInVuZXNjYXBlIiwic3RyIiwid2luZG93IiwiSU5GSU5JVFkiLCJzeW1ib2xUYWciLCJmcmVlR2xvYmFsIiwiZnJlZVNlbGYiLCJyb290IiwiYmFzZVByb3BlcnR5T2YiLCJvYmplY3RQcm90byIsIm9iamVjdFRvU3RyaW5nIiwiU3ltYm9sIiwic3ltYm9sUHJvdG8iLCJzeW1ib2xUb1N0cmluZyIsImJhc2VUb1N0cmluZyIsImlzU3ltYm9sIiwiaXNPYmplY3RMaWtlIiwidG9TdHJpbmciLCJzZWxlY3RQYXNzYWdlcyIsInNlbGVjdENzcyIsInNlbGVjdEpzIiwic2VsZWN0QWN0aXZlTGluayIsInNlbGVjdEFjdGl2ZUJ1dHRvbiIsInNlbGVjdEFjdGl2ZUlucHV0Iiwic2VsZWN0QWN0aXZlIiwic2VsZWN0SGlzdG9yeSIsInNlbGVjdFJlc3BvbnNlcyIsInR5cGluZ0luZGljYXRvciIsIklTX05VTUVSSUMiLCJpc051bWVyaWMiLCJVU0VSX1BBU1NBR0VfVE1QTCIsInRleHQiLCJPVEhFUl9QQVNTQUdFX1RNUEwiLCJzcGVha2VyIiwiam9pbiIsImRlbGF5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiY3R4IiwicXVlcnlTZWxlY3RvciIsImZpbmRBbGwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiU3RvcnkiLCJzcmMiLCJ1c2VyU3R5bGVzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiYm9keSIsImFwcGVuZENoaWxkIiwidXNlclNjcmlwdHMiLCJnbG9iYWxFdmFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJtYXRjaGVzIiwiYWR2YW5jZSIsImZpbmRQYXNzYWdlIiwiZ2V0QXR0cmlidXRlIiwidmFsdWUiLCJzaG93UHJvbXB0Iiwic3RhcnRzQXQiLCJpZE9yTmFtZSIsInBhc3NhZ2VzIiwicCIsInVzZXJUZXh0IiwiaGlzdG9yeSIsImxhc3QiLCJjdXJyZW50IiwiZXhpc3RpbmciLCJlbGVtZW50cyIsImFjdGl2ZSIsInJlbmRlclVzZXJNZXNzYWdlIiwicmVuZGVyVGV4dElucHV0IiwicmVuZGVyQ2hvaWNlcyIsInBpZCIsInJlbmRlcmVyIiwic2Nyb2xsVG9Cb3R0b20iLCJnZXRTcGVha2VyIiwic3RhdGVtZW50cyIsInJlbmRlciIsIm5leHQiLCJzaGlmdCIsInNob3dUeXBpbmciLCJjYWxjdWxhdGVEZWxheSIsImhpZGVUeXBpbmciLCJ0eHQiLCJ0eXBpbmdEZWxheVJhdGlvIiwicmF0ZSIsInN0eWxlIiwidmlzaWJpbGl0eSIsImhpc3QiLCJzY3JvbGxpbmdFbGVtZW50Iiwic2Nyb2xsVG9wIiwib2Zmc2V0SGVpZ2h0IiwicGFuZWwiLCJyZW1vdmVDaG9pY2VzIiwibCIsImVzY2FwZSIsInBsYWNlaG9sZGVyIiwic2F2ZUFzIiwiY2IiLCJpbXBsZW1lbnRhdGlvbiIsImNyZWF0ZUhUTUxEb2N1bWVudCIsInBhcnNlSW50IiwiZWwiLCJldmVudCIsImV2YWwiLCJzdGFydCIsInVuZGVmaW5lZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7RUFBQSxTQUFTLGVBQWUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRTtJQUN4QyxJQUFJLEdBQUcsSUFBSSxHQUFHLEVBQUU7TUFDZCxNQUFNLENBQUMsY0FBYyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUU7UUFDOUIsS0FBSyxFQUFFLEtBQUs7UUFDWixVQUFVLEVBQUUsSUFBSTtRQUNoQixZQUFZLEVBQUUsSUFBSTtRQUNsQixRQUFRLEVBQUUsSUFBSTtPQUNmLENBQUMsQ0FBQztLQUNKLE1BQU07TUFDTCxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFDO0tBQ2xCOztJQUVELE9BQU8sR0FBRyxDQUFDO0dBQ1o7O0VBRUQsa0JBQWMsR0FBRyxlQUFlOzs7O0VDZmhDOzs7Ozs7Ozs7O0VBVUEsSUFBSSxRQUFRLEdBQUcsQ0FBQyxHQUFHLENBQUMs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\n</script>\n  </body>\n</html>\n"})